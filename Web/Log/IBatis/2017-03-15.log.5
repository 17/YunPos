Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:32,087 [12] DEBUG [(null)] - Open Connection "55827496" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:32,108 [12] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:32,111 [12] DEBUG [(null)] - Close Connection "55827496" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:34:32,112 [12] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:34:32,113 [12] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:34:32,115 [12] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:32,117 [12] DEBUG [(null)] - Open Connection "6067287" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:32,143 [12] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:32,144 [12] DEBUG [(null)] - Close Connection "6067287" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:34:32,145 [12] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [ts_notice]
      as db
       where  db.[flag_delete]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:34:32,146 [12] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Parameters: [@param0=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:34:32,149 [12] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:32,151 [12] DEBUG [(null)] - Open Connection "53130794" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:32,192 [12] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:32,193 [12] DEBUG [(null)] - Close Connection "53130794" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:34:32,194 [12] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.QueryPage] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select t.* from (select row_number() over( order by  
          db.rq_create desc
           ) as rownumber,db.* from  [ts_notice]
      as db  where  db.[flag_delete]= @param0  ) as t
       where  
          t.rownumber between ( @param1  + 1)
           and 
            ( @param1  +  @param2 )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:34:32,195 [12] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Parameters: [@param0=[flag_delete,0], @param1=[start,0], @param2=[limit,10]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:34:32,196 [12] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32], @param2=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:32,202 [12] DEBUG [(null)] - Open Connection "64468698" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:32,220 [12] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:32,222 [12] DEBUG [(null)] - Close Connection "64468698" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:34:33,414 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Gysfl.QueryTree] based off of PreparedStatement: [SET NOCOUNT ON
       
      set transaction isolation level read uncommitted
     
      SELECT db.id, db.mc AS [text], db.bm, db.id_farther AS fatherId, db.path FROM  [tb_gysfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:34:33,425 [11] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryTree] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:34:33,446 [11] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryTree] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:33,491 [11] DEBUG [(null)] - Open Connection "55188558" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:33,517 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:33,547 [11] DEBUG [(null)] - Close Connection "55188558" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:34:33,676 [10] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Gysfl.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[path],db.[id_farther],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast] from  [tb_gysfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:34:33,685 [10] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryList] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:34:33,686 [10] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:33,687 [10] DEBUG [(null)] - Open Connection "54923467" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:33,707 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:33,708 [10] DEBUG [(null)] - Close Connection "54923467" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:34:46,006 [12] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser],db.flag_delete from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  and db.[flag_delete]= @param1  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:34:46,009 [12] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:34:46,011 [12] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:46,012 [12] DEBUG [(null)] - Open Connection "51164121" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:46,028 [12] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:46,029 [12] DEBUG [(null)] - Close Connection "51164121" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:34:46,031 [12] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:34:46,032 [12] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:34:46,033 [12] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:46,034 [12] DEBUG [(null)] - Open Connection "27343886" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:46,070 [12] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:46,072 [12] DEBUG [(null)] - Close Connection "27343886" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:34:46,089 [12] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:34:46,090 [12] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-15], @param2=[bgrq,2017/3/15 23:59:59], @param3=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:34:46,092 [12] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:46,093 [12] DEBUG [(null)] - Open Connection "39939821" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:46,110 [12] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:46,117 [12] DEBUG [(null)] - Close Connection "39939821" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:34:46,121 [12] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:34:46,124 [12] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-15], @param2=[bgrq,2017/3/15 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:34:46,125 [12] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:46,126 [12] DEBUG [(null)] - Open Connection "36435753" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:46,142 [12] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:46,143 [12] DEBUG [(null)] - Close Connection "36435753" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:34:46,144 [12] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:34:46,145 [12] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:34:46,146 [12] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:46,147 [12] DEBUG [(null)] - Open Connection "52046762" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:46,160 [12] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:46,161 [12] DEBUG [(null)] - Close Connection "52046762" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:34:46,162 [12] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '2a7a8a51-fe78-4687-8036-1494130f7945','a6057a78-1836-4fc3-8688-d987fcf1a99a','2017-03-15','2017/3/15 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:46,163 [12] DEBUG [(null)] - Open Connection "7014991" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:46,175 [12] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:46,176 [12] DEBUG [(null)] - Close Connection "7014991" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:34:46,177 [12] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:34:46,179 [12] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:34:46,180 [12] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:46,181 [12] DEBUG [(null)] - Open Connection "36250246" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:46,205 [12] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:46,206 [12] DEBUG [(null)] - Close Connection "36250246" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:34:46,207 [12] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:34:46,208 [12] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:34:46,210 [12] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:46,211 [12] DEBUG [(null)] - Open Connection "42214894" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:46,234 [12] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:46,235 [12] DEBUG [(null)] - Close Connection "42214894" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:34:46,236 [12] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [ts_notice]
      as db
       where  db.[flag_delete]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:34:46,237 [12] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Parameters: [@param0=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:34:46,238 [12] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:46,239 [12] DEBUG [(null)] - Open Connection "22796872" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:46,250 [12] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:46,250 [12] DEBUG [(null)] - Close Connection "22796872" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:34:46,251 [12] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.QueryPage] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select t.* from (select row_number() over( order by  
          db.rq_create desc
           ) as rownumber,db.* from  [ts_notice]
      as db  where  db.[flag_delete]= @param0  ) as t
       where  
          t.rownumber between ( @param1  + 1)
           and 
            ( @param1  +  @param2 )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:34:46,252 [12] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Parameters: [@param0=[flag_delete,0], @param1=[start,0], @param2=[limit,10]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:34:46,254 [12] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32], @param2=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:46,254 [12] DEBUG [(null)] - Open Connection "274690" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:46,275 [12] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:46,276 [12] DEBUG [(null)] - Close Connection "274690" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:34:47,486 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Gysfl.QueryTree] based off of PreparedStatement: [SET NOCOUNT ON
       
      set transaction isolation level read uncommitted
     
      SELECT db.id, db.mc AS [text], db.bm, db.id_farther AS fatherId, db.path FROM  [tb_gysfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:34:47,489 [3] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryTree] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:34:47,491 [3] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryTree] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:47,492 [3] DEBUG [(null)] - Open Connection "32198081" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:47,529 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:47,534 [3] DEBUG [(null)] - Close Connection "32198081" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:34:47,630 [10] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Gysfl.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[path],db.[id_farther],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast] from  [tb_gysfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:34:47,631 [10] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryList] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:34:47,639 [10] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:47,644 [10] DEBUG [(null)] - Open Connection "33847093" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:47,665 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:34:47,666 [10] DEBUG [(null)] - Close Connection "33847093" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:36:22,584 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser],db.flag_delete from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  and db.[flag_delete]= @param1  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:36:22,585 [3] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:36:22,587 [3] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:36:22,589 [3] DEBUG [(null)] - Open Connection "1651832" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:36:22,601 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:36:22,603 [3] DEBUG [(null)] - Close Connection "1651832" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:36:22,604 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:36:22,606 [3] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:36:22,607 [3] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:36:22,608 [3] DEBUG [(null)] - Open Connection "28081154" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:36:22,649 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:36:22,651 [3] DEBUG [(null)] - Close Connection "28081154" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:36:22,662 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:36:22,663 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-15], @param2=[bgrq,2017/3/15 23:59:59], @param3=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:36:22,664 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:36:22,665 [3] DEBUG [(null)] - Open Connection "7617576" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:36:22,679 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:36:22,680 [3] DEBUG [(null)] - Close Connection "7617576" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:36:22,684 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:36:22,687 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-15], @param2=[bgrq,2017/3/15 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:36:22,688 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:36:22,690 [3] DEBUG [(null)] - Open Connection "62389934" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:36:22,705 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:36:22,706 [3] DEBUG [(null)] - Close Connection "62389934" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:36:22,707 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:36:22,707 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:36:22,708 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:36:22,709 [3] DEBUG [(null)] - Open Connection "53995929" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:36:22,727 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:36:22,728 [3] DEBUG [(null)] - Close Connection "53995929" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:36:22,729 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '2a7a8a51-fe78-4687-8036-1494130f7945','a6057a78-1836-4fc3-8688-d987fcf1a99a','2017-03-15','2017/3/15 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:36:22,729 [3] DEBUG [(null)] - Open Connection "45515563" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:36:22,742 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:36:22,743 [3] DEBUG [(null)] - Close Connection "45515563" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:36:22,745 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:36:22,745 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:36:22,746 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:36:22,747 [3] DEBUG [(null)] - Open Connection "35567082" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:36:22,767 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:36:22,768 [3] DEBUG [(null)] - Close Connection "35567082" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:36:22,769 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:36:22,769 [3] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:36:22,770 [3] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:36:22,771 [3] DEBUG [(null)] - Open Connection "660634" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:36:22,793 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:36:22,794 [3] DEBUG [(null)] - Close Connection "660634" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:36:22,795 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [ts_notice]
      as db
       where  db.[flag_delete]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:36:22,796 [3] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Parameters: [@param0=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:36:22,797 [3] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:36:22,797 [3] DEBUG [(null)] - Open Connection "11230781" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:36:22,813 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:36:22,814 [3] DEBUG [(null)] - Close Connection "11230781" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:36:22,815 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.QueryPage] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select t.* from (select row_number() over( order by  
          db.rq_create desc
           ) as rownumber,db.* from  [ts_notice]
      as db  where  db.[flag_delete]= @param0  ) as t
       where  
          t.rownumber between ( @param1  + 1)
           and 
            ( @param1  +  @param2 )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:36:22,816 [3] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Parameters: [@param0=[flag_delete,0], @param1=[start,0], @param2=[limit,10]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:36:22,817 [3] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32], @param2=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:36:22,818 [3] DEBUG [(null)] - Open Connection "56705561" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:36:22,836 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:36:22,837 [3] DEBUG [(null)] - Close Connection "56705561" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:36:23,954 [10] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Gysfl.QueryTree] based off of PreparedStatement: [SET NOCOUNT ON
       
      set transaction isolation level read uncommitted
     
      SELECT db.id, db.mc AS [text], db.bm, db.id_farther AS fatherId, db.path FROM  [tb_gysfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:36:23,957 [10] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryTree] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:36:23,958 [10] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryTree] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:36:23,959 [10] DEBUG [(null)] - Open Connection "56321170" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:36:24,013 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:36:24,021 [10] DEBUG [(null)] - Close Connection "56321170" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:36:24,118 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Gysfl.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[path],db.[id_farther],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast] from  [tb_gysfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:36:24,120 [11] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryList] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:36:24,123 [11] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:36:24,125 [11] DEBUG [(null)] - Open Connection "25175354" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:36:24,144 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:36:24,145 [11] DEBUG [(null)] - Close Connection "25175354" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:37:06,420 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser],db.flag_delete from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  and db.[flag_delete]= @param1  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:37:06,422 [9] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:37:06,423 [9] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:37:06,423 [9] DEBUG [(null)] - Open Connection "66994965" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:37:06,442 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:37:06,443 [9] DEBUG [(null)] - Close Connection "66994965" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:37:06,445 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:37:06,447 [9] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:37:06,449 [9] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:37:06,451 [9] DEBUG [(null)] - Open Connection "62439013" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:37:06,487 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:37:06,488 [9] DEBUG [(null)] - Close Connection "62439013" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:37:06,501 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:37:06,502 [9] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-15], @param2=[bgrq,2017/3/15 23:59:59], @param3=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:37:06,504 [9] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:37:06,506 [9] DEBUG [(null)] - Open Connection "9862715" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:37:06,526 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:37:06,527 [9] DEBUG [(null)] - Close Connection "9862715" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:37:06,529 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:37:06,532 [9] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-15], @param2=[bgrq,2017/3/15 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:37:06,533 [9] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:37:06,534 [9] DEBUG [(null)] - Open Connection "1718135" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:37:06,547 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:37:06,548 [9] DEBUG [(null)] - Close Connection "1718135" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:37:06,549 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:37:06,550 [9] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:37:06,551 [9] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:37:06,551 [9] DEBUG [(null)] - Open Connection "3334691" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:37:06,562 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:37:06,563 [9] DEBUG [(null)] - Close Connection "3334691" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:37:06,565 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '2a7a8a51-fe78-4687-8036-1494130f7945','a6057a78-1836-4fc3-8688-d987fcf1a99a','2017-03-15','2017/3/15 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:37:06,566 [9] DEBUG [(null)] - Open Connection "2504624" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:37:06,585 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:37:06,586 [9] DEBUG [(null)] - Close Connection "2504624" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:37:06,587 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:37:06,588 [9] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:37:06,589 [9] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:37:06,590 [9] DEBUG [(null)] - Open Connection "35580726" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:37:06,605 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:37:06,605 [9] DEBUG [(null)] - Close Connection "35580726" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:37:06,606 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:37:06,607 [9] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:37:06,608 [9] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:37:06,609 [9] DEBUG [(null)] - Open Connection "49523639" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:37:06,631 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:37:06,632 [9] DEBUG [(null)] - Close Connection "49523639" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:37:06,633 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [ts_notice]
      as db
       where  db.[flag_delete]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:37:06,634 [9] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Parameters: [@param0=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:37:06,635 [9] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:37:06,636 [9] DEBUG [(null)] - Open Connection "17203291" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:37:06,654 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:37:06,655 [9] DEBUG [(null)] - Close Connection "17203291" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:37:06,657 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.QueryPage] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select t.* from (select row_number() over( order by  
          db.rq_create desc
           ) as rownumber,db.* from  [ts_notice]
      as db  where  db.[flag_delete]= @param0  ) as t
       where  
          t.rownumber between ( @param1  + 1)
           and 
            ( @param1  +  @param2 )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:37:06,658 [9] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Parameters: [@param0=[flag_delete,0], @param1=[start,0], @param2=[limit,10]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:37:06,660 [9] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32], @param2=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:37:06,661 [9] DEBUG [(null)] - Open Connection "34246324" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:37:06,677 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:37:06,678 [9] DEBUG [(null)] - Close Connection "34246324" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:37:07,859 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Gysfl.QueryTree] based off of PreparedStatement: [SET NOCOUNT ON
       
      set transaction isolation level read uncommitted
     
      SELECT db.id, db.mc AS [text], db.bm, db.id_farther AS fatherId, db.path FROM  [tb_gysfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:37:07,861 [9] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryTree] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:37:07,865 [9] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryTree] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:37:07,867 [9] DEBUG [(null)] - Open Connection "21317488" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:37:07,886 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:37:07,887 [9] DEBUG [(null)] - Close Connection "21317488" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:37:08,031 [14] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Gysfl.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[path],db.[id_farther],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast] from  [tb_gysfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:37:08,033 [14] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryList] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:37:08,035 [14] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:37:08,037 [14] DEBUG [(null)] - Open Connection "31239457" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:37:08,066 [14] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:37:08,069 [14] DEBUG [(null)] - Close Connection "31239457" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:38:35,230 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser],db.flag_delete from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  and db.[flag_delete]= @param1  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:38:35,232 [9] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:38:35,233 [9] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:38:35,234 [9] DEBUG [(null)] - Open Connection "18607936" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:38:35,247 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:38:35,248 [9] DEBUG [(null)] - Close Connection "18607936" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:38:35,250 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:38:35,252 [9] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:38:35,253 [9] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:38:35,255 [9] DEBUG [(null)] - Open Connection "24727889" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:38:35,289 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:38:35,291 [9] DEBUG [(null)] - Close Connection "24727889" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:38:35,302 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:38:35,303 [9] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-15], @param2=[bgrq,2017/3/15 23:59:59], @param3=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:38:35,304 [9] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:38:35,305 [9] DEBUG [(null)] - Open Connection "7210501" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:38:35,317 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:38:35,318 [9] DEBUG [(null)] - Close Connection "7210501" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:38:35,319 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:38:35,321 [9] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-15], @param2=[bgrq,2017/3/15 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:38:35,322 [9] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:38:35,323 [9] DEBUG [(null)] - Open Connection "27195118" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:38:35,340 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:38:35,341 [9] DEBUG [(null)] - Close Connection "27195118" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:38:35,343 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:38:35,344 [9] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:38:35,345 [9] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:38:35,345 [9] DEBUG [(null)] - Open Connection "41258053" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:38:35,355 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:38:35,356 [9] DEBUG [(null)] - Close Connection "41258053" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:38:35,357 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '2a7a8a51-fe78-4687-8036-1494130f7945','a6057a78-1836-4fc3-8688-d987fcf1a99a','2017-03-15','2017/3/15 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:38:35,359 [9] DEBUG [(null)] - Open Connection "13858603" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:38:35,370 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:38:35,371 [9] DEBUG [(null)] - Close Connection "13858603" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:38:35,372 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:38:35,373 [9] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:38:35,373 [9] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:38:35,375 [9] DEBUG [(null)] - Open Connection "31331816" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:38:35,398 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:38:35,399 [9] DEBUG [(null)] - Close Connection "31331816" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:38:35,400 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:38:35,401 [9] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:38:35,402 [9] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:38:35,403 [9] DEBUG [(null)] - Open Connection "9536045" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:38:35,424 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:38:35,425 [9] DEBUG [(null)] - Close Connection "9536045" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:38:35,427 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [ts_notice]
      as db
       where  db.[flag_delete]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:38:35,428 [9] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Parameters: [@param0=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:38:35,429 [9] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:38:35,430 [9] DEBUG [(null)] - Open Connection "55433557" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:38:35,449 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:38:35,453 [9] DEBUG [(null)] - Close Connection "55433557" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:38:35,456 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.QueryPage] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select t.* from (select row_number() over( order by  
          db.rq_create desc
           ) as rownumber,db.* from  [ts_notice]
      as db  where  db.[flag_delete]= @param0  ) as t
       where  
          t.rownumber between ( @param1  + 1)
           and 
            ( @param1  +  @param2 )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:38:35,458 [9] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Parameters: [@param0=[flag_delete,0], @param1=[start,0], @param2=[limit,10]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:38:35,460 [9] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32], @param2=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:38:35,461 [9] DEBUG [(null)] - Open Connection "58183326" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:38:35,473 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:38:35,473 [9] DEBUG [(null)] - Close Connection "58183326" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:38:36,812 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Gysfl.QueryTree] based off of PreparedStatement: [SET NOCOUNT ON
       
      set transaction isolation level read uncommitted
     
      SELECT db.id, db.mc AS [text], db.bm, db.id_farther AS fatherId, db.path FROM  [tb_gysfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:38:36,814 [11] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryTree] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:38:36,816 [11] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryTree] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:38:36,817 [11] DEBUG [(null)] - Open Connection "46948770" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:38:36,832 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:38:36,833 [11] DEBUG [(null)] - Close Connection "46948770" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:38:36,952 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Gysfl.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[path],db.[id_farther],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast] from  [tb_gysfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:38:36,954 [13] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryList] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:38:36,955 [13] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:38:36,956 [13] DEBUG [(null)] - Open Connection "44473547" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:38:36,972 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:38:36,975 [13] DEBUG [(null)] - Close Connection "44473547" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:09,217 [14] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser],db.flag_delete from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  and db.[flag_delete]= @param1  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:09,218 [14] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:09,219 [14] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:09,220 [14] DEBUG [(null)] - Open Connection "4507368" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:09,238 [14] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:09,240 [14] DEBUG [(null)] - Close Connection "4507368" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:09,242 [14] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:09,243 [14] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:09,244 [14] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:09,245 [14] DEBUG [(null)] - Open Connection "6513993" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:09,276 [14] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:09,277 [14] DEBUG [(null)] - Close Connection "6513993" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:09,287 [14] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:09,289 [14] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-15], @param2=[bgrq,2017/3/15 23:59:59], @param3=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:09,290 [14] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:09,291 [14] DEBUG [(null)] - Open Connection "61809309" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:09,303 [14] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:09,304 [14] DEBUG [(null)] - Close Connection "61809309" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:09,305 [14] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:09,306 [14] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-15], @param2=[bgrq,2017/3/15 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:09,308 [14] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:09,309 [14] DEBUG [(null)] - Open Connection "12271480" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:09,321 [14] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:09,323 [14] DEBUG [(null)] - Close Connection "12271480" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:09,324 [14] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:09,325 [14] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:09,326 [14] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:09,327 [14] DEBUG [(null)] - Open Connection "10362792" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:09,337 [14] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:09,338 [14] DEBUG [(null)] - Close Connection "10362792" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:09,341 [14] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '2a7a8a51-fe78-4687-8036-1494130f7945','a6057a78-1836-4fc3-8688-d987fcf1a99a','2017-03-15','2017/3/15 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:09,342 [14] DEBUG [(null)] - Open Connection "28150549" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:09,363 [14] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:09,364 [14] DEBUG [(null)] - Close Connection "28150549" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:09,365 [14] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:09,366 [14] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:09,366 [14] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:09,367 [14] DEBUG [(null)] - Open Connection "39461910" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:09,392 [14] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:09,393 [14] DEBUG [(null)] - Close Connection "39461910" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:09,394 [14] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:09,395 [14] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:09,396 [14] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:09,398 [14] DEBUG [(null)] - Open Connection "58366327" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:09,419 [14] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:09,419 [14] DEBUG [(null)] - Close Connection "58366327" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:09,421 [14] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [ts_notice]
      as db
       where  db.[flag_delete]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:09,422 [14] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Parameters: [@param0=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:09,423 [14] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:09,424 [14] DEBUG [(null)] - Open Connection "3576167" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:09,433 [14] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:09,434 [14] DEBUG [(null)] - Close Connection "3576167" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:09,435 [14] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.QueryPage] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select t.* from (select row_number() over( order by  
          db.rq_create desc
           ) as rownumber,db.* from  [ts_notice]
      as db  where  db.[flag_delete]= @param0  ) as t
       where  
          t.rownumber between ( @param1  + 1)
           and 
            ( @param1  +  @param2 )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:09,436 [14] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Parameters: [@param0=[flag_delete,0], @param1=[start,0], @param2=[limit,10]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:09,436 [14] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32], @param2=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:09,437 [14] DEBUG [(null)] - Open Connection "16819619" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:09,455 [14] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:09,456 [14] DEBUG [(null)] - Close Connection "16819619" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:10,455 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Gysfl.QueryTree] based off of PreparedStatement: [SET NOCOUNT ON
       
      set transaction isolation level read uncommitted
     
      SELECT db.id, db.mc AS [text], db.bm, db.id_farther AS fatherId, db.path FROM  [tb_gysfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:10,462 [15] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryTree] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:10,467 [15] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryTree] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:10,469 [15] DEBUG [(null)] - Open Connection "34669690" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:10,499 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:10,502 [15] DEBUG [(null)] - Close Connection "34669690" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:10,690 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Gysfl.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[path],db.[id_farther],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast] from  [tb_gysfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:10,692 [13] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryList] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:10,693 [13] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:10,695 [13] DEBUG [(null)] - Open Connection "55552187" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:10,713 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:10,730 [13] DEBUG [(null)] - Close Connection "55552187" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:24,268 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser],db.flag_delete from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  and db.[flag_delete]= @param1  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:24,269 [13] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:24,270 [13] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:24,271 [13] DEBUG [(null)] - Open Connection "39451119" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:24,285 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:24,286 [13] DEBUG [(null)] - Close Connection "39451119" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:24,287 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:24,288 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:24,289 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:24,290 [13] DEBUG [(null)] - Open Connection "34121299" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:24,336 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:24,338 [13] DEBUG [(null)] - Close Connection "34121299" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:24,349 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:24,350 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-15], @param2=[bgrq,2017/3/15 23:59:59], @param3=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:24,351 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:24,352 [13] DEBUG [(null)] - Open Connection "65865880" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:24,366 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:24,367 [13] DEBUG [(null)] - Close Connection "65865880" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:24,368 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:24,369 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-15], @param2=[bgrq,2017/3/15 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:24,370 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:24,371 [13] DEBUG [(null)] - Open Connection "63367663" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:24,384 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:24,385 [13] DEBUG [(null)] - Close Connection "63367663" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:24,386 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:24,387 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:24,388 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:24,389 [13] DEBUG [(null)] - Open Connection "55187008" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:24,414 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:24,415 [13] DEBUG [(null)] - Close Connection "55187008" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:24,416 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '2a7a8a51-fe78-4687-8036-1494130f7945','a6057a78-1836-4fc3-8688-d987fcf1a99a','2017-03-15','2017/3/15 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:24,417 [13] DEBUG [(null)] - Open Connection "58651758" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:24,428 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:24,430 [13] DEBUG [(null)] - Close Connection "58651758" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:24,431 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:24,432 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:24,432 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:24,433 [13] DEBUG [(null)] - Open Connection "54815888" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:24,448 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:24,449 [13] DEBUG [(null)] - Close Connection "54815888" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:24,450 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:24,451 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:24,452 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:24,453 [13] DEBUG [(null)] - Open Connection "37497912" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:24,485 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:24,486 [13] DEBUG [(null)] - Close Connection "37497912" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:24,488 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [ts_notice]
      as db
       where  db.[flag_delete]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:24,489 [13] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Parameters: [@param0=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:24,490 [13] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:24,490 [13] DEBUG [(null)] - Open Connection "57006256" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:24,501 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:24,502 [13] DEBUG [(null)] - Close Connection "57006256" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:24,503 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.QueryPage] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select t.* from (select row_number() over( order by  
          db.rq_create desc
           ) as rownumber,db.* from  [ts_notice]
      as db  where  db.[flag_delete]= @param0  ) as t
       where  
          t.rownumber between ( @param1  + 1)
           and 
            ( @param1  +  @param2 )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:24,504 [13] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Parameters: [@param0=[flag_delete,0], @param1=[start,0], @param2=[limit,10]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:24,505 [13] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32], @param2=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:24,506 [13] DEBUG [(null)] - Open Connection "28131127" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:24,523 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:24,524 [13] DEBUG [(null)] - Close Connection "28131127" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:25,659 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Gysfl.QueryTree] based off of PreparedStatement: [SET NOCOUNT ON
       
      set transaction isolation level read uncommitted
     
      SELECT db.id, db.mc AS [text], db.bm, db.id_farther AS fatherId, db.path FROM  [tb_gysfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:25,663 [15] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryTree] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:25,668 [15] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryTree] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:25,669 [15] DEBUG [(null)] - Open Connection "35437027" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:25,688 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:25,689 [15] DEBUG [(null)] - Close Connection "35437027" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:25,771 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Gysfl.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[path],db.[id_farther],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast] from  [tb_gysfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:25,775 [13] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryList] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:41:25,781 [13] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:25,783 [13] DEBUG [(null)] - Open Connection "63812042" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:25,816 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:41:25,823 [13] DEBUG [(null)] - Close Connection "63812042" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,274 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,277 [15] DEBUG [(null)] - Close Connection "7392464" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,283 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,286 [15] DEBUG [(null)] - Close Connection "65042846" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,289 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,290 [15] DEBUG [(null)] - Close Connection "67035476" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,315 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,316 [15] DEBUG [(null)] - Close Connection "39734417" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,337 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,338 [15] DEBUG [(null)] - Close Connection "13966708" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,340 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,341 [15] DEBUG [(null)] - Close Connection "35420828" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,349 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,350 [15] DEBUG [(null)] - Close Connection "50341318" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,351 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,352 [15] DEBUG [(null)] - Close Connection "50960243" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,354 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,355 [15] DEBUG [(null)] - Close Connection "24081505" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,356 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,357 [15] DEBUG [(null)] - Close Connection "21794000" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,358 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,359 [15] DEBUG [(null)] - Close Connection "7323904" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,360 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,361 [15] DEBUG [(null)] - Close Connection "6291761" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,392 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,393 [15] DEBUG [(null)] - Close Connection "66589434" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,395 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,397 [15] DEBUG [(null)] - Close Connection "25127075" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,398 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,399 [15] DEBUG [(null)] - Close Connection "22647176" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,419 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,420 [15] DEBUG [(null)] - Close Connection "15919468" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,421 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,422 [15] DEBUG [(null)] - Close Connection "28132472" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,423 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,424 [15] DEBUG [(null)] - Close Connection "16671365" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,428 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,429 [15] DEBUG [(null)] - Close Connection "66159592" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,445 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,447 [15] DEBUG [(null)] - Close Connection "16556777" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,465 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,466 [15] DEBUG [(null)] - Close Connection "13405599" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,468 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,469 [15] DEBUG [(null)] - Close Connection "66057625" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,470 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,471 [15] DEBUG [(null)] - Close Connection "54813008" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,473 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,474 [15] DEBUG [(null)] - Close Connection "6075789" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,476 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,477 [15] DEBUG [(null)] - Close Connection "36134603" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,531 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:27,532 [15] DEBUG [(null)] - Close Connection "41067960" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:30,084 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser],db.flag_delete from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  and db.[flag_delete]= @param1  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:30,089 [15] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:30,090 [15] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:30,117 [15] DEBUG [(null)] - Open Connection "22955985" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:30,170 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:30,172 [15] DEBUG [(null)] - Close Connection "22955985" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:30,183 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:30,188 [15] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:30,192 [15] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:30,194 [15] DEBUG [(null)] - Open Connection "13673488" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:30,238 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:30,239 [15] DEBUG [(null)] - Close Connection "13673488" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:30,262 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:30,264 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-15], @param2=[bgrq,2017/3/15 23:59:59], @param3=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:30,266 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:30,268 [15] DEBUG [(null)] - Open Connection "56865279" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:30,287 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:30,288 [15] DEBUG [(null)] - Close Connection "56865279" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:30,291 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:30,292 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-15], @param2=[bgrq,2017/3/15 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:30,292 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:30,293 [15] DEBUG [(null)] - Open Connection "5255640" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:30,307 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:30,308 [15] DEBUG [(null)] - Close Connection "5255640" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:30,310 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:30,311 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:30,312 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:30,313 [15] DEBUG [(null)] - Open Connection "6072306" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:30,333 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:30,334 [15] DEBUG [(null)] - Close Connection "6072306" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:30,336 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '2a7a8a51-fe78-4687-8036-1494130f7945','a6057a78-1836-4fc3-8688-d987fcf1a99a','2017-03-15','2017/3/15 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:30,337 [15] DEBUG [(null)] - Open Connection "59155597" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:30,350 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:30,351 [15] DEBUG [(null)] - Close Connection "59155597" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:30,353 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:30,355 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:30,356 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:30,357 [15] DEBUG [(null)] - Open Connection "19908585" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:30,375 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:30,376 [15] DEBUG [(null)] - Close Connection "19908585" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:30,379 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:30,381 [15] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:30,383 [15] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:30,384 [15] DEBUG [(null)] - Open Connection "26366948" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:30,423 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:30,425 [15] DEBUG [(null)] - Close Connection "26366948" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:30,745 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [ts_notice]
      as db
       where  db.[flag_delete]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:30,748 [15] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Parameters: [@param0=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:30,751 [15] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:30,753 [15] DEBUG [(null)] - Open Connection "43833334" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:30,786 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:30,787 [15] DEBUG [(null)] - Close Connection "43833334" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:30,789 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.QueryPage] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select t.* from (select row_number() over( order by  
          db.rq_create desc
           ) as rownumber,db.* from  [ts_notice]
      as db  where  db.[flag_delete]= @param0  ) as t
       where  
          t.rownumber between ( @param1  + 1)
           and 
            ( @param1  +  @param2 )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:30,790 [15] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Parameters: [@param0=[flag_delete,0], @param1=[start,0], @param2=[limit,10]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:30,791 [15] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32], @param2=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:30,793 [15] DEBUG [(null)] - Open Connection "30594484" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.MappedStatements.ReaderAutoMapper: 2017-03-15 14:49:30,820 [15] ERROR [(null)] - The column [rownumber] could not be auto mapped to a property on [CySoft.Model.Ts.Ts_Notice_View]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:30,825 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:30,826 [15] DEBUG [(null)] - Close Connection "30594484" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:30,840 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User.GetItem] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select  db.[id_cyuser],db.[id_masteruser],db.[id],db.[username],db.[password],db.[name],isnull(master.companyname,db.[companyname])companyname,db.[flag_sex],db.[id_father],db.[job],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[rq_start],db.[rq_stop],db.[flag_state],db.[flag_master],db.[bz],db.[id_province],db.[id_city],db.[id_county],db.[zipcode],db.[address],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[version],db.flag_delete,db.[flag_industry],db.[companyno]
      ,db.id_shop
      from  [tb_user]
      as db
      LEFT JOIN Tb_user master ON db.id_father=master.id
       where  db.[id]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:30,844 [15] DEBUG [(null)] - Statement Id: [Tb_User.GetItem] Parameters: [@param0=[id,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:30,846 [15] DEBUG [(null)] - Statement Id: [Tb_User.GetItem] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:30,853 [15] DEBUG [(null)] - Open Connection "10026996" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:30,886 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:30,887 [15] DEBUG [(null)] - Close Connection "10026996" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:30,889 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser],db.flag_delete from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  and db.[flag_delete]= @param1  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:30,890 [15] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:30,891 [15] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:30,892 [15] DEBUG [(null)] - Open Connection "47774965" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:30,907 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:30,908 [15] DEBUG [(null)] - Close Connection "47774965" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:30,909 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  
					db.[flag_type] in  (  @param0 ,   @param1 ) and db.[flag_stop]= @param2  and 
					exists(
					select 1 from Tb_function as fun
					where
					fun.flag_stop = 0
					 and 
						exists(select 1 from Tb_role_function as rf where rf.id_function = fun.id and rf.id_role in  (  @param3 ,   @param4 ,   @param5 ,   @param6 ) )
					 
					and (db.path+'/' like fun.path+'/%' or fun.path+'/' like db.path+'/%')
					)
				 order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:30,910 [15] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_typeList[0],controller], @param1=[flag_typeList[1],action], @param2=[flag_stop,0], @param3=[id_roleList[0],], @param4=[id_roleList[1],1], @param5=[id_roleList[2],2], @param6=[id_roleList[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:30,911 [15] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[Int32, System.Int32], @param3=[String, System.String], @param4=[String, System.String], @param5=[String, System.String], @param6=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:30,912 [15] DEBUG [(null)] - Open Connection "14206590" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:31,057 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:31,059 [15] DEBUG [(null)] - Close Connection "14206590" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:31,064 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param0 ,   @param1 ,   @param2 ,   @param3 ) )
         order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:31,067 [15] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[rolelist[0],], @param1=[rolelist[1],1], @param2=[rolelist[2],2], @param3=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:31,069 [15] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:31,072 [15] DEBUG [(null)] - Open Connection "51013123" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:31,207 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:31,210 [15] DEBUG [(null)] - Close Connection "51013123" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:32,639 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Gysfl.QueryTree] based off of PreparedStatement: [SET NOCOUNT ON
       
      set transaction isolation level read uncommitted
     
      SELECT db.id, db.mc AS [text], db.bm, db.id_farther AS fatherId, db.path FROM  [tb_gysfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:32,641 [15] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryTree] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:32,642 [15] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryTree] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:32,644 [15] DEBUG [(null)] - Open Connection "25391150" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:32,676 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:32,679 [15] DEBUG [(null)] - Close Connection "25391150" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:34,819 [23] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Gysfl.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[path],db.[id_farther],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast] from  [tb_gysfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:34,823 [23] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryList] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:34,826 [23] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:34,830 [23] DEBUG [(null)] - Open Connection "15435229" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:34,870 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:34,872 [23] DEBUG [(null)] - Close Connection "15435229" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:55,608 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser],db.flag_delete from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  and db.[flag_delete]= @param1  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:55,610 [15] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:55,611 [15] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:55,612 [15] DEBUG [(null)] - Open Connection "26703748" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:55,634 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:55,635 [15] DEBUG [(null)] - Close Connection "26703748" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:55,637 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:55,638 [15] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:55,642 [15] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:55,643 [15] DEBUG [(null)] - Open Connection "58022059" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:55,678 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:55,679 [15] DEBUG [(null)] - Close Connection "58022059" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:55,692 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:55,693 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-15], @param2=[bgrq,2017/3/15 23:59:59], @param3=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:55,694 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:55,695 [15] DEBUG [(null)] - Open Connection "13337491" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:55,709 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:55,710 [15] DEBUG [(null)] - Close Connection "13337491" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:55,711 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:55,712 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-15], @param2=[bgrq,2017/3/15 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:55,713 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:55,714 [15] DEBUG [(null)] - Open Connection "61630588" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:55,736 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:55,737 [15] DEBUG [(null)] - Close Connection "61630588" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:55,740 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:55,741 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:55,742 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:55,743 [15] DEBUG [(null)] - Open Connection "46565286" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:55,754 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:55,756 [15] DEBUG [(null)] - Close Connection "46565286" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:55,757 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '2a7a8a51-fe78-4687-8036-1494130f7945','a6057a78-1836-4fc3-8688-d987fcf1a99a','2017-03-15','2017/3/15 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:55,758 [15] DEBUG [(null)] - Open Connection "6844753" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:55,773 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:55,775 [15] DEBUG [(null)] - Close Connection "6844753" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:55,776 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:55,778 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:55,779 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:55,780 [15] DEBUG [(null)] - Open Connection "42255805" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:55,804 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:55,807 [15] DEBUG [(null)] - Close Connection "42255805" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:55,808 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:55,809 [15] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:55,810 [15] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:55,811 [15] DEBUG [(null)] - Open Connection "62272810" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:55,832 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:55,833 [15] DEBUG [(null)] - Close Connection "62272810" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:55,834 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [ts_notice]
      as db
       where  db.[flag_delete]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:55,835 [15] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Parameters: [@param0=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:55,836 [15] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:55,837 [15] DEBUG [(null)] - Open Connection "21200856" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:55,865 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:55,866 [15] DEBUG [(null)] - Close Connection "21200856" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:55,868 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.QueryPage] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select t.* from (select row_number() over( order by  
          db.rq_create desc
           ) as rownumber,db.* from  [ts_notice]
      as db  where  db.[flag_delete]= @param0  ) as t
       where  
          t.rownumber between ( @param1  + 1)
           and 
            ( @param1  +  @param2 )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:55,869 [15] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Parameters: [@param0=[flag_delete,0], @param1=[start,0], @param2=[limit,10]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:55,872 [15] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32], @param2=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:55,873 [15] DEBUG [(null)] - Open Connection "35878407" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:55,887 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:55,888 [15] DEBUG [(null)] - Close Connection "35878407" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:57,200 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Gysfl.QueryTree] based off of PreparedStatement: [SET NOCOUNT ON
       
      set transaction isolation level read uncommitted
     
      SELECT db.id, db.mc AS [text], db.bm, db.id_farther AS fatherId, db.path FROM  [tb_gysfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:57,202 [15] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryTree] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:57,212 [15] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryTree] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:57,216 [15] DEBUG [(null)] - Open Connection "34171822" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:57,252 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:57,253 [15] DEBUG [(null)] - Close Connection "34171822" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:58,251 [23] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Gysfl.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[path],db.[id_farther],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast] from  [tb_gysfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:58,252 [23] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryList] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:49:58,254 [23] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:58,255 [23] DEBUG [(null)] - Open Connection "57810841" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:58,269 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:49:58,270 [23] DEBUG [(null)] - Close Connection "57810841" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:50:36,146 [24] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser],db.flag_delete from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  and db.[flag_delete]= @param1  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:50:36,147 [24] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:50:36,149 [24] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:50:36,150 [24] DEBUG [(null)] - Open Connection "52057342" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:50:36,162 [24] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:50:36,163 [24] DEBUG [(null)] - Close Connection "52057342" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:50:36,165 [24] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:50:36,166 [24] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:50:36,167 [24] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:50:36,171 [24] DEBUG [(null)] - Open Connection "23300225" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:50:36,211 [24] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:50:36,212 [24] DEBUG [(null)] - Close Connection "23300225" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:50:36,224 [24] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:50:36,225 [24] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-15], @param2=[bgrq,2017/3/15 23:59:59], @param3=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:50:36,226 [24] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:50:36,227 [24] DEBUG [(null)] - Open Connection "4512562" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:50:36,240 [24] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:50:36,242 [24] DEBUG [(null)] - Close Connection "4512562" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:50:36,243 [24] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:50:36,244 [24] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-15], @param2=[bgrq,2017/3/15 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:50:36,245 [24] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:50:36,246 [24] DEBUG [(null)] - Open Connection "53115612" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:50:36,260 [24] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:50:36,261 [24] DEBUG [(null)] - Close Connection "53115612" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:50:36,263 [24] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:50:36,264 [24] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:50:36,265 [24] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:50:36,266 [24] DEBUG [(null)] - Open Connection "63076630" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:50:36,290 [24] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:50:36,292 [24] DEBUG [(null)] - Close Connection "63076630" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:50:36,293 [24] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '2a7a8a51-fe78-4687-8036-1494130f7945','a6057a78-1836-4fc3-8688-d987fcf1a99a','2017-03-15','2017/3/15 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:50:36,294 [24] DEBUG [(null)] - Open Connection "62506432" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:50:36,307 [24] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:50:36,308 [24] DEBUG [(null)] - Close Connection "62506432" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:50:36,309 [24] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:50:36,311 [24] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:50:36,313 [24] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:50:36,315 [24] DEBUG [(null)] - Open Connection "4916512" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:50:36,338 [24] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:50:36,344 [24] DEBUG [(null)] - Close Connection "4916512" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:50:36,346 [24] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:50:36,347 [24] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:50:36,349 [24] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:50:36,350 [24] DEBUG [(null)] - Open Connection "26805692" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:50:36,391 [24] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:50:36,393 [24] DEBUG [(null)] - Close Connection "26805692" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:50:36,395 [24] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [ts_notice]
      as db
       where  db.[flag_delete]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:50:36,397 [24] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Parameters: [@param0=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:50:36,398 [24] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:50:36,399 [24] DEBUG [(null)] - Open Connection "23020374" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:50:36,416 [24] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:50:36,417 [24] DEBUG [(null)] - Close Connection "23020374" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:50:36,422 [24] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.QueryPage] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select t.* from (select row_number() over( order by  
          db.rq_create desc
           ) as rownumber,db.* from  [ts_notice]
      as db  where  db.[flag_delete]= @param0  ) as t
       where  
          t.rownumber between ( @param1  + 1)
           and 
            ( @param1  +  @param2 )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:50:36,424 [24] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Parameters: [@param0=[flag_delete,0], @param1=[start,0], @param2=[limit,10]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:50:36,425 [24] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32], @param2=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:50:36,427 [24] DEBUG [(null)] - Open Connection "43356461" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:50:36,446 [24] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:50:36,447 [24] DEBUG [(null)] - Close Connection "43356461" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:50:37,711 [21] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Gysfl.QueryTree] based off of PreparedStatement: [SET NOCOUNT ON
       
      set transaction isolation level read uncommitted
     
      SELECT db.id, db.mc AS [text], db.bm, db.id_farther AS fatherId, db.path FROM  [tb_gysfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:50:37,713 [21] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryTree] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:50:37,714 [21] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryTree] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:50:37,735 [21] DEBUG [(null)] - Open Connection "38548507" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:50:37,755 [21] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:50:37,756 [21] DEBUG [(null)] - Close Connection "38548507" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:50:38,749 [24] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Gysfl.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[path],db.[id_farther],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast] from  [tb_gysfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:50:38,750 [24] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryList] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:50:38,753 [24] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:50:38,754 [24] DEBUG [(null)] - Open Connection "23210225" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:50:38,769 [24] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:50:38,770 [24] DEBUG [(null)] - Close Connection "23210225" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:28,792 [21] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser],db.flag_delete from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  and db.[flag_delete]= @param1  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:28,794 [21] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:28,796 [21] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:28,797 [21] DEBUG [(null)] - Open Connection "23740392" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:28,814 [21] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:28,815 [21] DEBUG [(null)] - Close Connection "23740392" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:28,818 [21] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:28,820 [21] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:28,821 [21] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:28,822 [21] DEBUG [(null)] - Open Connection "32520191" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:28,858 [21] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:28,859 [21] DEBUG [(null)] - Close Connection "32520191" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:28,872 [21] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:28,873 [21] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-15], @param2=[bgrq,2017/3/15 23:59:59], @param3=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:28,874 [21] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:28,875 [21] DEBUG [(null)] - Open Connection "8615902" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:28,888 [21] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:28,889 [21] DEBUG [(null)] - Close Connection "8615902" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:28,890 [21] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:28,891 [21] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-15], @param2=[bgrq,2017/3/15 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:28,892 [21] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:28,893 [21] DEBUG [(null)] - Open Connection "28617831" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:28,913 [21] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:28,914 [21] DEBUG [(null)] - Close Connection "28617831" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:28,915 [21] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:28,917 [21] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:28,918 [21] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:28,919 [21] DEBUG [(null)] - Open Connection "63958993" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:28,933 [21] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:28,936 [21] DEBUG [(null)] - Close Connection "63958993" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:28,938 [21] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '2a7a8a51-fe78-4687-8036-1494130f7945','a6057a78-1836-4fc3-8688-d987fcf1a99a','2017-03-15','2017/3/15 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:28,941 [21] DEBUG [(null)] - Open Connection "55205871" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:28,957 [21] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:28,958 [21] DEBUG [(null)] - Close Connection "55205871" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:28,959 [21] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:28,960 [21] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:28,961 [21] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:28,962 [21] DEBUG [(null)] - Open Connection "14375530" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:28,990 [21] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:28,992 [21] DEBUG [(null)] - Close Connection "14375530" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:28,993 [21] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:28,994 [21] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:28,996 [21] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:28,997 [21] DEBUG [(null)] - Open Connection "4353794" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:29,023 [21] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:29,024 [21] DEBUG [(null)] - Close Connection "4353794" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:29,026 [21] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [ts_notice]
      as db
       where  db.[flag_delete]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:29,027 [21] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Parameters: [@param0=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:29,029 [21] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:29,030 [21] DEBUG [(null)] - Open Connection "51943376" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:29,060 [21] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:29,061 [21] DEBUG [(null)] - Close Connection "51943376" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:29,062 [21] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.QueryPage] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select t.* from (select row_number() over( order by  
          db.rq_create desc
           ) as rownumber,db.* from  [ts_notice]
      as db  where  db.[flag_delete]= @param0  ) as t
       where  
          t.rownumber between ( @param1  + 1)
           and 
            ( @param1  +  @param2 )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:29,063 [21] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Parameters: [@param0=[flag_delete,0], @param1=[start,0], @param2=[limit,10]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:29,064 [21] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32], @param2=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:29,065 [21] DEBUG [(null)] - Open Connection "59557766" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:29,081 [21] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:29,082 [21] DEBUG [(null)] - Close Connection "59557766" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:30,267 [21] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Gysfl.QueryTree] based off of PreparedStatement: [SET NOCOUNT ON
       
      set transaction isolation level read uncommitted
     
      SELECT db.id, db.mc AS [text], db.bm, db.id_farther AS fatherId, db.path FROM  [tb_gysfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:30,271 [21] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryTree] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:30,275 [21] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryTree] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:30,278 [21] DEBUG [(null)] - Open Connection "31223023" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:30,298 [21] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:30,299 [21] DEBUG [(null)] - Close Connection "31223023" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:31,370 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Gysfl.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[path],db.[id_farther],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast] from  [tb_gysfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:31,372 [6] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryList] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:31,373 [6] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:31,374 [6] DEBUG [(null)] - Open Connection "27320396" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:31,387 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:31,389 [6] DEBUG [(null)] - Close Connection "27320396" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:57,154 [21] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser],db.flag_delete from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  and db.[flag_delete]= @param1  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:57,156 [21] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:57,157 [21] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:57,158 [21] DEBUG [(null)] - Open Connection "20240971" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:57,189 [21] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:57,190 [21] DEBUG [(null)] - Close Connection "20240971" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:57,191 [21] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:57,193 [21] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:57,197 [21] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:57,198 [21] DEBUG [(null)] - Open Connection "56615959" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:57,230 [21] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:57,231 [21] DEBUG [(null)] - Close Connection "56615959" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:57,242 [21] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:57,245 [21] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-15], @param2=[bgrq,2017/3/15 23:59:59], @param3=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:57,247 [21] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:57,248 [21] DEBUG [(null)] - Open Connection "5655567" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:57,259 [21] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:57,262 [21] DEBUG [(null)] - Close Connection "5655567" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:57,263 [21] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:57,265 [21] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-15], @param2=[bgrq,2017/3/15 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:57,266 [21] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:57,267 [21] DEBUG [(null)] - Open Connection "33583477" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:57,297 [21] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:57,301 [21] DEBUG [(null)] - Close Connection "33583477" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:57,302 [21] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:57,303 [21] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:57,304 [21] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:57,306 [21] DEBUG [(null)] - Open Connection "36139489" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:57,320 [21] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:57,322 [21] DEBUG [(null)] - Close Connection "36139489" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:57,323 [21] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '2a7a8a51-fe78-4687-8036-1494130f7945','a6057a78-1836-4fc3-8688-d987fcf1a99a','2017-03-15','2017/3/15 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:57,324 [21] DEBUG [(null)] - Open Connection "62297989" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:57,344 [21] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:57,347 [21] DEBUG [(null)] - Close Connection "62297989" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:57,350 [21] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:57,353 [21] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:57,354 [21] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:57,356 [21] DEBUG [(null)] - Open Connection "41594217" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:57,396 [21] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:57,397 [21] DEBUG [(null)] - Close Connection "41594217" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:57,398 [21] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:57,399 [21] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:57,400 [21] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:57,402 [21] DEBUG [(null)] - Open Connection "10897838" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:57,425 [21] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:57,429 [21] DEBUG [(null)] - Close Connection "10897838" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:57,431 [21] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [ts_notice]
      as db
       where  db.[flag_delete]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:57,432 [21] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Parameters: [@param0=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:57,433 [21] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:57,434 [21] DEBUG [(null)] - Open Connection "30383566" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:57,443 [21] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:57,447 [21] DEBUG [(null)] - Close Connection "30383566" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:57,448 [21] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.QueryPage] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select t.* from (select row_number() over( order by  
          db.rq_create desc
           ) as rownumber,db.* from  [ts_notice]
      as db  where  db.[flag_delete]= @param0  ) as t
       where  
          t.rownumber between ( @param1  + 1)
           and 
            ( @param1  +  @param2 )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:57,450 [21] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Parameters: [@param0=[flag_delete,0], @param1=[start,0], @param2=[limit,10]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:57,450 [21] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32], @param2=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:57,452 [21] DEBUG [(null)] - Open Connection "19782873" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:57,472 [21] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:57,473 [21] DEBUG [(null)] - Close Connection "19782873" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:58,703 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Gysfl.QueryTree] based off of PreparedStatement: [SET NOCOUNT ON
       
      set transaction isolation level read uncommitted
     
      SELECT db.id, db.mc AS [text], db.bm, db.id_farther AS fatherId, db.path FROM  [tb_gysfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:58,705 [17] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryTree] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:51:58,707 [17] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryTree] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:58,717 [17] DEBUG [(null)] - Open Connection "37110825" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:58,762 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:51:58,765 [17] DEBUG [(null)] - Close Connection "37110825" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:52:00,290 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Gysfl.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[path],db.[id_farther],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast] from  [tb_gysfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:52:00,291 [6] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryList] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:52:00,293 [6] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:52:00,296 [6] DEBUG [(null)] - Open Connection "37399616" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:52:00,315 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:52:00,317 [6] DEBUG [(null)] - Close Connection "37399616" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:53:47,391 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser],db.flag_delete from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  and db.[flag_delete]= @param1  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:53:47,393 [13] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:53:47,395 [13] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:53:47,397 [13] DEBUG [(null)] - Open Connection "909897" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:53:47,411 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:53:47,414 [13] DEBUG [(null)] - Close Connection "909897" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:53:47,416 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:53:47,417 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:53:47,419 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:53:47,420 [13] DEBUG [(null)] - Open Connection "51864172" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:53:47,559 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:53:47,561 [13] DEBUG [(null)] - Close Connection "51864172" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:53:47,581 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:53:47,584 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-15], @param2=[bgrq,2017/3/15 23:59:59], @param3=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:53:47,585 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:53:47,586 [13] DEBUG [(null)] - Open Connection "3467825" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:53:47,610 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:53:47,614 [13] DEBUG [(null)] - Close Connection "3467825" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:53:47,616 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:53:47,617 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-15], @param2=[bgrq,2017/3/15 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:53:47,619 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:53:47,620 [13] DEBUG [(null)] - Open Connection "63448321" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:53:47,636 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:53:47,638 [13] DEBUG [(null)] - Close Connection "63448321" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:53:47,639 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:53:47,641 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:53:47,642 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:53:47,643 [13] DEBUG [(null)] - Open Connection "59784508" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:53:47,656 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:53:47,657 [13] DEBUG [(null)] - Close Connection "59784508" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:53:47,658 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '2a7a8a51-fe78-4687-8036-1494130f7945','a6057a78-1836-4fc3-8688-d987fcf1a99a','2017-03-15','2017/3/15 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:53:47,660 [13] DEBUG [(null)] - Open Connection "52273788" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:53:47,700 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:53:47,710 [13] DEBUG [(null)] - Close Connection "52273788" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:53:47,716 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:53:47,717 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:53:47,719 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:53:47,720 [13] DEBUG [(null)] - Open Connection "26815955" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:53:47,736 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:53:47,737 [13] DEBUG [(null)] - Close Connection "26815955" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:53:47,738 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:53:47,739 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:53:47,740 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:53:47,741 [13] DEBUG [(null)] - Open Connection "52114440" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:53:47,765 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:53:47,766 [13] DEBUG [(null)] - Close Connection "52114440" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:53:47,767 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [ts_notice]
      as db
       where  db.[flag_delete]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:53:47,768 [13] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Parameters: [@param0=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:53:47,769 [13] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:53:47,770 [13] DEBUG [(null)] - Open Connection "17733085" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:53:47,783 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:53:47,784 [13] DEBUG [(null)] - Close Connection "17733085" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:53:47,785 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.QueryPage] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select t.* from (select row_number() over( order by  
          db.rq_create desc
           ) as rownumber,db.* from  [ts_notice]
      as db  where  db.[flag_delete]= @param0  ) as t
       where  
          t.rownumber between ( @param1  + 1)
           and 
            ( @param1  +  @param2 )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:53:47,786 [13] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Parameters: [@param0=[flag_delete,0], @param1=[start,0], @param2=[limit,10]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:53:47,787 [13] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32], @param2=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:53:47,788 [13] DEBUG [(null)] - Open Connection "4152907" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:53:47,803 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:53:47,804 [13] DEBUG [(null)] - Close Connection "4152907" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:53:48,990 [14] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Gysfl.QueryTree] based off of PreparedStatement: [SET NOCOUNT ON
       
      set transaction isolation level read uncommitted
     
      SELECT db.id, db.mc AS [text], db.bm, db.id_farther AS fatherId, db.path FROM  [tb_gysfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:53:48,992 [14] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryTree] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:53:48,994 [14] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryTree] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:53:49,000 [14] DEBUG [(null)] - Open Connection "42898860" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:53:49,025 [14] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:53:49,030 [14] DEBUG [(null)] - Close Connection "42898860" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:53:50,072 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Gysfl.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[path],db.[id_farther],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast] from  [tb_gysfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:53:50,073 [13] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryList] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:53:50,075 [13] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:53:50,077 [13] DEBUG [(null)] - Open Connection "44967309" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:53:50,093 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:53:50,096 [13] DEBUG [(null)] - Close Connection "44967309" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:54:22,653 [21] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser],db.flag_delete from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  and db.[flag_delete]= @param1  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:54:22,654 [21] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:54:22,657 [21] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:54:22,659 [21] DEBUG [(null)] - Open Connection "7479014" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:54:22,691 [21] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:54:22,692 [21] DEBUG [(null)] - Close Connection "7479014" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:54:22,693 [21] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:54:22,694 [21] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:54:22,695 [21] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:54:22,696 [21] DEBUG [(null)] - Open Connection "61652522" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:54:22,832 [21] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:54:22,835 [21] DEBUG [(null)] - Close Connection "61652522" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:54:22,858 [21] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:54:22,860 [21] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-15], @param2=[bgrq,2017/3/15 23:59:59], @param3=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:54:22,861 [21] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:54:22,862 [21] DEBUG [(null)] - Open Connection "51256550" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:54:22,888 [21] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:54:22,891 [21] DEBUG [(null)] - Close Connection "51256550" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:54:22,893 [21] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:54:22,895 [21] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-15], @param2=[bgrq,2017/3/15 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:54:22,896 [21] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:54:22,897 [21] DEBUG [(null)] - Open Connection "65539106" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:54:22,941 [21] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:54:22,942 [21] DEBUG [(null)] - Close Connection "65539106" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:54:22,943 [21] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:54:22,944 [21] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:54:22,946 [21] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:54:22,946 [21] DEBUG [(null)] - Open Connection "61618175" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:54:22,967 [21] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:54:22,968 [21] DEBUG [(null)] - Close Connection "61618175" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:54:22,969 [21] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '2a7a8a51-fe78-4687-8036-1494130f7945','a6057a78-1836-4fc3-8688-d987fcf1a99a','2017-03-15','2017/3/15 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:54:22,970 [21] DEBUG [(null)] - Open Connection "48199671" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:54:23,019 [21] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:54:23,020 [21] DEBUG [(null)] - Close Connection "48199671" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:54:23,022 [21] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:54:23,025 [21] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:54:23,027 [21] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:54:23,030 [21] DEBUG [(null)] - Open Connection "61912346" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:54:23,094 [21] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:54:23,096 [21] DEBUG [(null)] - Close Connection "61912346" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:54:23,101 [21] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:54:23,102 [21] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:54:23,105 [21] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:54:23,114 [21] DEBUG [(null)] - Open Connection "7272018" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:54:23,140 [21] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:54:23,143 [21] DEBUG [(null)] - Close Connection "7272018" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:54:23,146 [21] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [ts_notice]
      as db
       where  db.[flag_delete]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:54:23,147 [21] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Parameters: [@param0=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:54:23,149 [21] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:54:23,151 [21] DEBUG [(null)] - Open Connection "43229855" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:54:23,166 [21] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:54:23,169 [21] DEBUG [(null)] - Close Connection "43229855" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:54:23,173 [21] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.QueryPage] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select t.* from (select row_number() over( order by  
          db.rq_create desc
           ) as rownumber,db.* from  [ts_notice]
      as db  where  db.[flag_delete]= @param0  ) as t
       where  
          t.rownumber between ( @param1  + 1)
           and 
            ( @param1  +  @param2 )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:54:23,176 [21] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Parameters: [@param0=[flag_delete,0], @param1=[start,0], @param2=[limit,10]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:54:23,177 [21] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32], @param2=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:54:23,179 [21] DEBUG [(null)] - Open Connection "22251866" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:54:23,203 [21] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:54:23,205 [21] DEBUG [(null)] - Close Connection "22251866" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:54:24,519 [21] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Gysfl.QueryTree] based off of PreparedStatement: [SET NOCOUNT ON
       
      set transaction isolation level read uncommitted
     
      SELECT db.id, db.mc AS [text], db.bm, db.id_farther AS fatherId, db.path FROM  [tb_gysfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:54:24,521 [21] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryTree] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:54:24,527 [21] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryTree] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:54:24,531 [21] DEBUG [(null)] - Open Connection "37554896" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:54:24,572 [21] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:54:24,576 [21] DEBUG [(null)] - Close Connection "37554896" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:54:25,553 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Gysfl.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[path],db.[id_farther],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast] from  [tb_gysfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:54:25,554 [17] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryList] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 14:54:25,558 [17] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:54:25,559 [17] DEBUG [(null)] - Open Connection "25182286" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:54:25,573 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 14:54:25,574 [17] DEBUG [(null)] - Close Connection "25182286" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:49:13,130 [36] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser],db.flag_delete from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  and db.[flag_delete]= @param1  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:49:13,143 [36] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:49:13,144 [36] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:49:13,145 [36] DEBUG [(null)] - Open Connection "33681255" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:49:13,163 [36] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:49:13,165 [36] DEBUG [(null)] - Close Connection "33681255" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:49:13,168 [36] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:49:13,169 [36] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:49:13,171 [36] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:49:13,172 [36] DEBUG [(null)] - Open Connection "52451126" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:49:13,295 [36] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:49:13,296 [36] DEBUG [(null)] - Close Connection "52451126" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:49:13,310 [36] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:49:13,312 [36] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-15], @param2=[bgrq,2017/3/15 23:59:59], @param3=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:49:13,313 [36] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:49:13,314 [36] DEBUG [(null)] - Open Connection "30589629" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:49:13,337 [36] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:49:13,338 [36] DEBUG [(null)] - Close Connection "30589629" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:49:13,340 [36] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:49:13,342 [36] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-15], @param2=[bgrq,2017/3/15 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:49:13,344 [36] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:49:13,345 [36] DEBUG [(null)] - Open Connection "61560858" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:49:13,363 [36] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:49:13,366 [36] DEBUG [(null)] - Close Connection "61560858" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:49:13,368 [36] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:49:13,398 [36] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:49:13,401 [36] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:49:13,413 [36] DEBUG [(null)] - Open Connection "45762431" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:49:13,433 [36] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:49:13,436 [36] DEBUG [(null)] - Close Connection "45762431" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:49:13,437 [36] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '2a7a8a51-fe78-4687-8036-1494130f7945','a6057a78-1836-4fc3-8688-d987fcf1a99a','2017-03-15','2017/3/15 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:49:13,439 [36] DEBUG [(null)] - Open Connection "40606975" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:49:13,525 [36] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:49:13,527 [36] DEBUG [(null)] - Close Connection "40606975" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:49:13,529 [36] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:49:13,530 [36] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:49:13,531 [36] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:49:13,532 [36] DEBUG [(null)] - Open Connection "10641659" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:49:13,548 [36] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:49:13,549 [36] DEBUG [(null)] - Close Connection "10641659" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:49:13,552 [36] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:49:13,553 [36] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:49:13,554 [36] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:49:13,556 [36] DEBUG [(null)] - Open Connection "42103372" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:49:13,580 [36] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:49:13,581 [36] DEBUG [(null)] - Close Connection "42103372" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:49:13,585 [36] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [ts_notice]
      as db
       where  db.[flag_delete]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:49:13,590 [36] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Parameters: [@param0=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:49:13,592 [36] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:49:13,593 [36] DEBUG [(null)] - Open Connection "32278159" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:49:13,611 [36] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:49:13,613 [36] DEBUG [(null)] - Close Connection "32278159" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:49:13,616 [36] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.QueryPage] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select t.* from (select row_number() over( order by  
          db.rq_create desc
           ) as rownumber,db.* from  [ts_notice]
      as db  where  db.[flag_delete]= @param0  ) as t
       where  
          t.rownumber between ( @param1  + 1)
           and 
            ( @param1  +  @param2 )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:49:13,618 [36] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Parameters: [@param0=[flag_delete,0], @param1=[start,0], @param2=[limit,10]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:49:13,619 [36] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32], @param2=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:49:13,621 [36] DEBUG [(null)] - Open Connection "44716470" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:49:13,638 [36] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:49:13,645 [36] DEBUG [(null)] - Close Connection "44716470" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:49:15,004 [36] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Gysfl.QueryTree] based off of PreparedStatement: [SET NOCOUNT ON
       
      set transaction isolation level read uncommitted
     
      SELECT db.id, db.mc AS [text], db.bm, db.id_farther AS fatherId, db.path FROM  [tb_gysfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:49:15,017 [36] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryTree] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:49:15,019 [36] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryTree] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:49:15,021 [36] DEBUG [(null)] - Open Connection "64672982" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:49:15,072 [36] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:49:15,075 [36] DEBUG [(null)] - Close Connection "64672982" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:49:17,150 [37] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Gysfl.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[path],db.[id_farther],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast] from  [tb_gysfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:49:17,163 [37] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryList] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:49:17,168 [37] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:49:17,180 [37] DEBUG [(null)] - Open Connection "40010867" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:49:17,223 [37] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:49:17,245 [37] DEBUG [(null)] - Close Connection "40010867" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:51:57,820 [40] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser],db.flag_delete from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  and db.[flag_delete]= @param1  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:51:57,821 [40] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:51:57,822 [40] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:51:57,823 [40] DEBUG [(null)] - Open Connection "6570134" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:51:57,836 [40] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:51:57,837 [40] DEBUG [(null)] - Close Connection "6570134" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:51:57,838 [40] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:51:57,840 [40] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:51:57,841 [40] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:51:57,842 [40] DEBUG [(null)] - Open Connection "10330309" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:51:57,885 [40] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:51:57,886 [40] DEBUG [(null)] - Close Connection "10330309" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:51:57,898 [40] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:51:57,899 [40] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-15], @param2=[bgrq,2017/3/15 23:59:59], @param3=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:51:57,900 [40] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:51:57,901 [40] DEBUG [(null)] - Open Connection "26779421" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:51:57,914 [40] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:51:57,916 [40] DEBUG [(null)] - Close Connection "26779421" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:51:57,917 [40] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:51:57,919 [40] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-15], @param2=[bgrq,2017/3/15 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:51:57,920 [40] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:51:57,921 [40] DEBUG [(null)] - Open Connection "56528323" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:51:57,934 [40] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:51:57,936 [40] DEBUG [(null)] - Close Connection "56528323" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:51:57,938 [40] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:51:57,940 [40] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:51:57,941 [40] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:51:57,944 [40] DEBUG [(null)] - Open Connection "66150073" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:51:57,963 [40] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:51:57,965 [40] DEBUG [(null)] - Close Connection "66150073" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:51:57,966 [40] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '2a7a8a51-fe78-4687-8036-1494130f7945','a6057a78-1836-4fc3-8688-d987fcf1a99a','2017-03-15','2017/3/15 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:51:57,968 [40] DEBUG [(null)] - Open Connection "43126131" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:51:57,984 [40] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:51:57,985 [40] DEBUG [(null)] - Close Connection "43126131" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:51:57,987 [40] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:51:57,987 [40] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:51:57,988 [40] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:51:57,989 [40] DEBUG [(null)] - Open Connection "2272056" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:51:58,003 [40] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:51:58,004 [40] DEBUG [(null)] - Close Connection "2272056" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:51:58,005 [40] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:51:58,006 [40] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:51:58,007 [40] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:51:58,008 [40] DEBUG [(null)] - Open Connection "39345051" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:51:58,037 [40] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:51:58,038 [40] DEBUG [(null)] - Close Connection "39345051" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:51:58,040 [40] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [ts_notice]
      as db
       where  db.[flag_delete]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:51:58,041 [40] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Parameters: [@param0=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:51:58,042 [40] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:51:58,043 [40] DEBUG [(null)] - Open Connection "49482553" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:51:58,052 [40] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:51:58,053 [40] DEBUG [(null)] - Close Connection "49482553" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:51:58,054 [40] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.QueryPage] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select t.* from (select row_number() over( order by  
          db.rq_create desc
           ) as rownumber,db.* from  [ts_notice]
      as db  where  db.[flag_delete]= @param0  ) as t
       where  
          t.rownumber between ( @param1  + 1)
           and 
            ( @param1  +  @param2 )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:51:58,055 [40] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Parameters: [@param0=[flag_delete,0], @param1=[start,0], @param2=[limit,10]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:51:58,057 [40] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32], @param2=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:51:58,058 [40] DEBUG [(null)] - Open Connection "44448786" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:51:58,070 [40] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:51:58,071 [40] DEBUG [(null)] - Close Connection "44448786" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:51:59,452 [36] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Gysfl.QueryTree] based off of PreparedStatement: [SET NOCOUNT ON
       
      set transaction isolation level read uncommitted
     
      SELECT db.id, db.mc AS [text], db.bm, db.id_farther AS fatherId, db.path FROM  [tb_gysfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:51:59,458 [36] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryTree] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:51:59,499 [36] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryTree] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:51:59,501 [36] DEBUG [(null)] - Open Connection "66308500" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:51:59,519 [36] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:51:59,521 [36] DEBUG [(null)] - Close Connection "66308500" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:51:59,662 [37] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Gysfl.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[path],db.[id_farther],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast] from  [tb_gysfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:51:59,663 [37] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryList] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:51:59,671 [37] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:51:59,673 [37] DEBUG [(null)] - Open Connection "40431307" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:51:59,796 [37] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:51:59,825 [37] DEBUG [(null)] - Close Connection "40431307" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:23,666 [39] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  and ( db.[bm] like  @param2   or db.mc like  @param2   or db.lxr like  @param2    or db.tel like  @param2    or db.phone like  @param2  ) and 
          id in
          (
          select id_shop_child from tb_shop_shop where path like '%'+(
          select top 1 path from tb_shop_shop
          WHERE 1=1
          and id_masteruser= @param0 
          and id_shop_child= @param3 
          )+'%'
          )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:23,667 [39] DEBUG [(null)] - Statement Id: [Tb_Shop.GetCount] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0], @param2=[keyword,%%], @param3=[query_self_child,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:23,668 [39] DEBUG [(null)] - Statement Id: [Tb_Shop.GetCount] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32], @param2=[String, System.String], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:23,669 [39] DEBUG [(null)] - Open Connection "60820696" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:23,717 [39] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:23,718 [39] DEBUG [(null)] - Close Connection "60820696" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:23,720 [39] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryPage] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select t.* from (select row_number() over( order by  
          db. bm  asc
           ) as rownumber,db.* from  [tb_shop]
      as db  where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  and ( db.[bm] like  @param2   or db.mc like  @param2   or db.lxr like  @param2    or db.tel like  @param2    or db.phone like  @param2  ) and 
          id in
          (
          select id_shop_child from tb_shop_shop where path like '%'+(
          select top 1 path from tb_shop_shop
          WHERE 1=1
          and id_masteruser= @param0 
          and id_shop_child= @param3 
          )+'%'
          )
         ) as t
       where  
          t.rownumber between ( @param4  + 1)
           and 
            ( @param4  +  @param5 )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:23,722 [39] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryPage] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0], @param2=[keyword,%%], @param3=[query_self_child,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param4=[start,0], @param5=[limit,10]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:23,722 [39] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryPage] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32], @param2=[String, System.String], @param3=[String, System.String], @param4=[Int32, System.Int32], @param5=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:23,724 [39] DEBUG [(null)] - Open Connection "61346896" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.MappedStatements.ReaderAutoMapper: 2017-03-15 15:54:23,753 [39] ERROR [(null)] - The column [rownumber] could not be auto mapped to a property on [CySoft.Model.Tb.Tb_Shop]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:23,759 [39] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:23,760 [39] DEBUG [(null)] - Close Connection "61346896" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:23,762 [39] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no],db.flag_type,db.id_shop_ps,db.id_kh  from 
       [tb_shop]
      as db 
       where  db.[id]= @param0  and db.[id_masteruser]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:23,763 [39] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:23,764 [39] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:23,765 [39] DEBUG [(null)] - Open Connection "28378584" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.MappedStatements.ReaderAutoMapper: 2017-03-15 15:54:23,779 [39] ERROR [(null)] - The column [id_shop] could not be auto mapped to a property on [CySoft.Model.Tb.Tb_Shop]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:23,780 [39] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:23,781 [39] DEBUG [(null)] - Close Connection "28378584" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:23,857 [39] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:23,858 [39] DEBUG [(null)] - Statement Id: [Tb_Shop.GetCount] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:23,859 [39] DEBUG [(null)] - Statement Id: [Tb_Shop.GetCount] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:23,861 [39] DEBUG [(null)] - Open Connection "2727095" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:23,873 [39] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:23,874 [39] DEBUG [(null)] - Close Connection "2727095" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:29,497 [37] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryShopSelectModels] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[mc] from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:29,500 [37] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryShopSelectModels] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:29,502 [37] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryShopSelectModels] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:29,504 [37] DEBUG [(null)] - Open Connection "33918082" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:29,563 [37] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:29,564 [37] DEBUG [(null)] - Close Connection "33918082" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:29,588 [37] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[id_shop_child],db.[id_shop_father],db.[path],db.[flag_state],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],s.flag_type
      ,s.mc,s.bm
      ,s.flag_state shop_flag_state
      ,s.flag_delete shop_flag_delete
      from  [tb_shop_shop]
      as db
      left join tb_shop s on db.id_shop_child=s.id
       where  db.[id_masteruser]= @param0  and s.[flag_state]= @param1  and s.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:29,589 [37] DEBUG [(null)] - Statement Id: [Tb_Shop_Shop.QueryList] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[tb_shop_state,1], @param2=[tb_shop_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:29,591 [37] DEBUG [(null)] - Statement Id: [Tb_Shop_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:29,593 [37] DEBUG [(null)] - Open Connection "23419969" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:29,621 [37] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:29,622 [37] DEBUG [(null)] - Close Connection "23419969" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:29,627 [37] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no],db.flag_type,db.id_shop_ps,db.id_kh  from 
       [tb_shop]
      as db 
       where  db.[id]= @param0  and db.[id_masteruser]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:29,629 [37] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:29,630 [37] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:29,631 [37] DEBUG [(null)] - Open Connection "26485467" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:29,643 [37] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:29,645 [37] DEBUG [(null)] - Close Connection "26485467" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:29,657 [37] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Flag.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id],db.[listcode],db.[listname],db.[listdata],db.[listdisplay],db.[listsort],db.[id_father] from  [ts_flag]
      as db
       where  db.[listcode]= @param0  order by  
          db.listsort
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:29,658 [37] DEBUG [(null)] - Statement Id: [Ts_Flag.QueryList] Parameters: [@param0=[listcode,shoptype]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:29,659 [37] DEBUG [(null)] - Statement Id: [Ts_Flag.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:29,663 [37] DEBUG [(null)] - Open Connection "2905057" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:29,685 [37] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:29,686 [37] DEBUG [(null)] - Close Connection "2905057" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:29,691 [37] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[id_shop_child],db.[id_shop_father],db.[path],db.[flag_state],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],s.flag_type
      ,s.mc,s.bm
      ,s.flag_state shop_flag_state
      ,s.flag_delete shop_flag_delete
      from  [tb_shop_shop]
      as db
      left join tb_shop s on db.id_shop_child=s.id
       where  db.[id_masteruser]= @param0  and s.[flag_state]= @param1  and s.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:29,692 [37] DEBUG [(null)] - Statement Id: [Tb_Shop_Shop.QueryList] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[tb_shop_state,1], @param2=[tb_shop_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:29,695 [37] DEBUG [(null)] - Statement Id: [Tb_Shop_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:29,698 [37] DEBUG [(null)] - Open Connection "3716081" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:29,712 [37] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:29,714 [37] DEBUG [(null)] - Close Connection "3716081" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:29,800 [40] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.GetMaxBMInfo] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select MAX(bm) bm from tb_shop
      where 1=1 and id_masteruser= @param0 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:29,802 [40] DEBUG [(null)] - Statement Id: [Tb_Shop.GetMaxBMInfo] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:29,803 [40] DEBUG [(null)] - Statement Id: [Tb_Shop.GetMaxBMInfo] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:29,804 [40] DEBUG [(null)] - Open Connection "53036316" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:29,821 [40] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:29,822 [40] DEBUG [(null)] - Close Connection "53036316" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:35,013 [39] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  and ( db.[bm] like  @param2   or db.mc like  @param2   or db.lxr like  @param2    or db.tel like  @param2    or db.phone like  @param2  ) and 
          id in
          (
          select id_shop_child from tb_shop_shop where path like '%'+(
          select top 1 path from tb_shop_shop
          WHERE 1=1
          and id_masteruser= @param0 
          and id_shop_child= @param3 
          )+'%'
          )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:35,014 [39] DEBUG [(null)] - Statement Id: [Tb_Shop.GetCount] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0], @param2=[keyword,%%], @param3=[query_self_child,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:35,015 [39] DEBUG [(null)] - Statement Id: [Tb_Shop.GetCount] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32], @param2=[String, System.String], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:35,016 [39] DEBUG [(null)] - Open Connection "29831705" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:35,035 [39] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:35,037 [39] DEBUG [(null)] - Close Connection "29831705" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:35,040 [39] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryPage] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select t.* from (select row_number() over( order by  
          db. bm  asc
           ) as rownumber,db.* from  [tb_shop]
      as db  where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  and ( db.[bm] like  @param2   or db.mc like  @param2   or db.lxr like  @param2    or db.tel like  @param2    or db.phone like  @param2  ) and 
          id in
          (
          select id_shop_child from tb_shop_shop where path like '%'+(
          select top 1 path from tb_shop_shop
          WHERE 1=1
          and id_masteruser= @param0 
          and id_shop_child= @param3 
          )+'%'
          )
         ) as t
       where  
          t.rownumber between ( @param4  + 1)
           and 
            ( @param4  +  @param5 )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:35,043 [39] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryPage] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0], @param2=[keyword,%%], @param3=[query_self_child,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param4=[start,0], @param5=[limit,10]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:35,046 [39] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryPage] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32], @param2=[String, System.String], @param3=[String, System.String], @param4=[Int32, System.Int32], @param5=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:35,048 [39] DEBUG [(null)] - Open Connection "38175221" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:35,064 [39] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:35,065 [39] DEBUG [(null)] - Close Connection "38175221" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:35,067 [39] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no],db.flag_type,db.id_shop_ps,db.id_kh  from 
       [tb_shop]
      as db 
       where  db.[id]= @param0  and db.[id_masteruser]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:35,068 [39] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:35,070 [39] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:35,072 [39] DEBUG [(null)] - Open Connection "39304019" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:35,098 [39] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:35,099 [39] DEBUG [(null)] - Close Connection "39304019" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:35,100 [39] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:35,102 [39] DEBUG [(null)] - Statement Id: [Tb_Shop.GetCount] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:35,103 [39] DEBUG [(null)] - Statement Id: [Tb_Shop.GetCount] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:35,104 [39] DEBUG [(null)] - Open Connection "19713988" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:35,117 [39] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:35,119 [39] DEBUG [(null)] - Close Connection "19713988" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:37,020 [37] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryShopSelectModels] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[mc] from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:37,021 [37] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryShopSelectModels] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:37,023 [37] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryShopSelectModels] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:37,024 [37] DEBUG [(null)] - Open Connection "29840677" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:37,044 [37] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:37,047 [37] DEBUG [(null)] - Close Connection "29840677" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:37,049 [37] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[id_shop_child],db.[id_shop_father],db.[path],db.[flag_state],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],s.flag_type
      ,s.mc,s.bm
      ,s.flag_state shop_flag_state
      ,s.flag_delete shop_flag_delete
      from  [tb_shop_shop]
      as db
      left join tb_shop s on db.id_shop_child=s.id
       where  db.[id_masteruser]= @param0  and s.[flag_state]= @param1  and s.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:37,051 [37] DEBUG [(null)] - Statement Id: [Tb_Shop_Shop.QueryList] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[tb_shop_state,1], @param2=[tb_shop_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:37,051 [37] DEBUG [(null)] - Statement Id: [Tb_Shop_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:37,052 [37] DEBUG [(null)] - Open Connection "2220891" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:37,065 [37] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:37,066 [37] DEBUG [(null)] - Close Connection "2220891" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:37,067 [37] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no],db.flag_type,db.id_shop_ps,db.id_kh  from 
       [tb_shop]
      as db 
       where  db.[id]= @param0  and db.[id_masteruser]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:37,068 [37] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:37,070 [37] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:37,071 [37] DEBUG [(null)] - Open Connection "4252029" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:37,084 [37] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:37,085 [37] DEBUG [(null)] - Close Connection "4252029" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:37,087 [37] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Flag.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id],db.[listcode],db.[listname],db.[listdata],db.[listdisplay],db.[listsort],db.[id_father] from  [ts_flag]
      as db
       where  db.[listcode]= @param0  order by  
          db.listsort
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:37,088 [37] DEBUG [(null)] - Statement Id: [Ts_Flag.QueryList] Parameters: [@param0=[listcode,shoptype]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:37,089 [37] DEBUG [(null)] - Statement Id: [Ts_Flag.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:37,091 [37] DEBUG [(null)] - Open Connection "46580708" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:37,114 [37] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:37,115 [37] DEBUG [(null)] - Close Connection "46580708" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:37,116 [37] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[id_shop_child],db.[id_shop_father],db.[path],db.[flag_state],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],s.flag_type
      ,s.mc,s.bm
      ,s.flag_state shop_flag_state
      ,s.flag_delete shop_flag_delete
      from  [tb_shop_shop]
      as db
      left join tb_shop s on db.id_shop_child=s.id
       where  db.[id_masteruser]= @param0  and s.[flag_state]= @param1  and s.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:37,117 [37] DEBUG [(null)] - Statement Id: [Tb_Shop_Shop.QueryList] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[tb_shop_state,1], @param2=[tb_shop_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:37,118 [37] DEBUG [(null)] - Statement Id: [Tb_Shop_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:37,119 [37] DEBUG [(null)] - Open Connection "13308866" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:37,133 [37] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:37,134 [37] DEBUG [(null)] - Close Connection "13308866" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:37,180 [40] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.GetMaxBMInfo] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select MAX(bm) bm from tb_shop
      where 1=1 and id_masteruser= @param0 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:37,181 [40] DEBUG [(null)] - Statement Id: [Tb_Shop.GetMaxBMInfo] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:54:37,183 [40] DEBUG [(null)] - Statement Id: [Tb_Shop.GetMaxBMInfo] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:37,184 [40] DEBUG [(null)] - Open Connection "29097196" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:37,212 [40] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:54:37,216 [40] DEBUG [(null)] - Close Connection "29097196" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:55:37,717 [39] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  and ( db.[bm] like  @param2   or db.mc like  @param2   or db.lxr like  @param2    or db.tel like  @param2    or db.phone like  @param2  ) and 
          id in
          (
          select id_shop_child from tb_shop_shop where path like '%'+(
          select top 1 path from tb_shop_shop
          WHERE 1=1
          and id_masteruser= @param0 
          and id_shop_child= @param3 
          )+'%'
          )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:55:37,718 [39] DEBUG [(null)] - Statement Id: [Tb_Shop.GetCount] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0], @param2=[keyword,%%], @param3=[query_self_child,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:55:37,719 [39] DEBUG [(null)] - Statement Id: [Tb_Shop.GetCount] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32], @param2=[String, System.String], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:55:37,720 [39] DEBUG [(null)] - Open Connection "11965619" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:55:37,738 [39] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:55:37,739 [39] DEBUG [(null)] - Close Connection "11965619" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:55:37,747 [39] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryPage] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select t.* from (select row_number() over( order by  
          db. bm  asc
           ) as rownumber,db.* from  [tb_shop]
      as db  where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  and ( db.[bm] like  @param2   or db.mc like  @param2   or db.lxr like  @param2    or db.tel like  @param2    or db.phone like  @param2  ) and 
          id in
          (
          select id_shop_child from tb_shop_shop where path like '%'+(
          select top 1 path from tb_shop_shop
          WHERE 1=1
          and id_masteruser= @param0 
          and id_shop_child= @param3 
          )+'%'
          )
         ) as t
       where  
          t.rownumber between ( @param4  + 1)
           and 
            ( @param4  +  @param5 )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:55:37,749 [39] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryPage] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0], @param2=[keyword,%%], @param3=[query_self_child,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param4=[start,0], @param5=[limit,10]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:55:37,751 [39] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryPage] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32], @param2=[String, System.String], @param3=[String, System.String], @param4=[Int32, System.Int32], @param5=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:55:37,752 [39] DEBUG [(null)] - Open Connection "47416517" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:55:37,771 [39] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:55:37,773 [39] DEBUG [(null)] - Close Connection "47416517" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:55:37,774 [39] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no],db.flag_type,db.id_shop_ps,db.id_kh  from 
       [tb_shop]
      as db 
       where  db.[id]= @param0  and db.[id_masteruser]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:55:37,776 [39] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:55:37,784 [39] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:55:37,787 [39] DEBUG [(null)] - Open Connection "50757657" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:55:37,804 [39] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:55:37,805 [39] DEBUG [(null)] - Close Connection "50757657" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:55:37,807 [39] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:55:37,808 [39] DEBUG [(null)] - Statement Id: [Tb_Shop.GetCount] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:55:37,809 [39] DEBUG [(null)] - Statement Id: [Tb_Shop.GetCount] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:55:37,810 [39] DEBUG [(null)] - Open Connection "51810368" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:55:37,823 [39] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:55:37,825 [39] DEBUG [(null)] - Close Connection "51810368" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:55:41,721 [42] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryShopSelectModels] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[mc] from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:55:41,722 [42] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryShopSelectModels] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:55:41,724 [42] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryShopSelectModels] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:55:41,725 [42] DEBUG [(null)] - Open Connection "64362429" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:55:41,740 [42] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:55:41,742 [42] DEBUG [(null)] - Close Connection "64362429" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:55:41,744 [42] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[id_shop_child],db.[id_shop_father],db.[path],db.[flag_state],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],s.flag_type
      ,s.mc,s.bm
      ,s.flag_state shop_flag_state
      ,s.flag_delete shop_flag_delete
      from  [tb_shop_shop]
      as db
      left join tb_shop s on db.id_shop_child=s.id
       where  db.[id_masteruser]= @param0  and s.[flag_state]= @param1  and s.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:55:41,745 [42] DEBUG [(null)] - Statement Id: [Tb_Shop_Shop.QueryList] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[tb_shop_state,1], @param2=[tb_shop_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:55:41,748 [42] DEBUG [(null)] - Statement Id: [Tb_Shop_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:55:41,749 [42] DEBUG [(null)] - Open Connection "61737821" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:55:41,764 [42] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:55:41,766 [42] DEBUG [(null)] - Close Connection "61737821" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:55:41,768 [42] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no],db.flag_type,db.id_shop_ps,db.id_kh  from 
       [tb_shop]
      as db 
       where  db.[id]= @param0  and db.[id_masteruser]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:55:41,769 [42] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:55:41,770 [42] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:55:41,771 [42] DEBUG [(null)] - Open Connection "10333813" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:55:41,799 [42] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:55:41,800 [42] DEBUG [(null)] - Close Connection "10333813" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:55:41,802 [42] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Flag.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id],db.[listcode],db.[listname],db.[listdata],db.[listdisplay],db.[listsort],db.[id_father] from  [ts_flag]
      as db
       where  db.[listcode]= @param0  order by  
          db.listsort
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:55:41,803 [42] DEBUG [(null)] - Statement Id: [Ts_Flag.QueryList] Parameters: [@param0=[listcode,shoptype]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:55:41,804 [42] DEBUG [(null)] - Statement Id: [Ts_Flag.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:55:41,805 [42] DEBUG [(null)] - Open Connection "42919322" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:55:41,817 [42] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:55:41,818 [42] DEBUG [(null)] - Close Connection "42919322" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:55:41,819 [42] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[id_shop_child],db.[id_shop_father],db.[path],db.[flag_state],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],s.flag_type
      ,s.mc,s.bm
      ,s.flag_state shop_flag_state
      ,s.flag_delete shop_flag_delete
      from  [tb_shop_shop]
      as db
      left join tb_shop s on db.id_shop_child=s.id
       where  db.[id_masteruser]= @param0  and s.[flag_state]= @param1  and s.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:55:41,820 [42] DEBUG [(null)] - Statement Id: [Tb_Shop_Shop.QueryList] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[tb_shop_state,1], @param2=[tb_shop_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:55:41,821 [42] DEBUG [(null)] - Statement Id: [Tb_Shop_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:55:41,822 [42] DEBUG [(null)] - Open Connection "43067817" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:55:41,835 [42] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:55:41,837 [42] DEBUG [(null)] - Close Connection "43067817" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:55:41,902 [40] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.GetMaxBMInfo] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select MAX(bm) bm from tb_shop
      where 1=1 and id_masteruser= @param0 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:55:41,903 [40] DEBUG [(null)] - Statement Id: [Tb_Shop.GetMaxBMInfo] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:55:41,904 [40] DEBUG [(null)] - Statement Id: [Tb_Shop.GetMaxBMInfo] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:55:41,905 [40] DEBUG [(null)] - Open Connection "44167342" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:55:41,919 [40] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:55:41,921 [40] DEBUG [(null)] - Close Connection "44167342" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:55:55,086 [40] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Gysfl.QueryTree] based off of PreparedStatement: [SET NOCOUNT ON
       
      set transaction isolation level read uncommitted
     
      SELECT db.id, db.mc AS [text], db.bm, db.id_farther AS fatherId, db.path FROM  [tb_gysfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:55:55,089 [40] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryTree] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:55:55,090 [40] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryTree] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:55:55,092 [40] DEBUG [(null)] - Open Connection "15956588" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:55:55,117 [40] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:55:55,119 [40] DEBUG [(null)] - Close Connection "15956588" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:55:55,219 [41] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Gysfl.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[path],db.[id_farther],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast] from  [tb_gysfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:55:55,221 [41] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryList] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:55:55,222 [41] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:55:55,223 [41] DEBUG [(null)] - Open Connection "45323768" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:55:55,246 [41] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:55:55,247 [41] DEBUG [(null)] - Close Connection "45323768" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:13,418 [39] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser],db.flag_delete from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  and db.[flag_delete]= @param1  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:13,419 [39] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:13,420 [39] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:13,421 [39] DEBUG [(null)] - Open Connection "43679638" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:13,435 [39] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:13,436 [39] DEBUG [(null)] - Close Connection "43679638" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:13,438 [39] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:13,439 [39] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:13,440 [39] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:13,442 [39] DEBUG [(null)] - Open Connection "53099914" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:13,473 [39] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:13,474 [39] DEBUG [(null)] - Close Connection "53099914" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:13,487 [39] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:13,488 [39] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-15], @param2=[bgrq,2017/3/15 23:59:59], @param3=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:13,489 [39] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:13,490 [39] DEBUG [(null)] - Open Connection "26260561" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:13,517 [39] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:13,518 [39] DEBUG [(null)] - Close Connection "26260561" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:13,519 [39] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:13,520 [39] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-15], @param2=[bgrq,2017/3/15 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:13,521 [39] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:13,523 [39] DEBUG [(null)] - Open Connection "92027" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:13,540 [39] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:13,542 [39] DEBUG [(null)] - Close Connection "92027" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:13,543 [39] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:13,545 [39] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:13,546 [39] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:13,547 [39] DEBUG [(null)] - Open Connection "14816407" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:13,570 [39] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:13,571 [39] DEBUG [(null)] - Close Connection "14816407" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:13,572 [39] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '2a7a8a51-fe78-4687-8036-1494130f7945','a6057a78-1836-4fc3-8688-d987fcf1a99a','2017-03-15','2017/3/15 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:13,573 [39] DEBUG [(null)] - Open Connection "36631349" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:13,588 [39] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:13,589 [39] DEBUG [(null)] - Close Connection "36631349" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:13,590 [39] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:13,592 [39] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:13,594 [39] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:13,595 [39] DEBUG [(null)] - Open Connection "59176166" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:13,617 [39] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:13,618 [39] DEBUG [(null)] - Close Connection "59176166" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:13,619 [39] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:13,620 [39] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:13,621 [39] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:13,622 [39] DEBUG [(null)] - Open Connection "65013050" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:13,643 [39] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:13,644 [39] DEBUG [(null)] - Close Connection "65013050" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:13,645 [39] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [ts_notice]
      as db
       where  db.[flag_delete]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:13,647 [39] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Parameters: [@param0=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:13,648 [39] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:13,649 [39] DEBUG [(null)] - Open Connection "65227200" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:13,666 [39] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:13,667 [39] DEBUG [(null)] - Close Connection "65227200" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:13,669 [39] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.QueryPage] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select t.* from (select row_number() over( order by  
          db.rq_create desc
           ) as rownumber,db.* from  [ts_notice]
      as db  where  db.[flag_delete]= @param0  ) as t
       where  
          t.rownumber between ( @param1  + 1)
           and 
            ( @param1  +  @param2 )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:13,670 [39] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Parameters: [@param0=[flag_delete,0], @param1=[start,0], @param2=[limit,10]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:13,671 [39] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32], @param2=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:13,672 [39] DEBUG [(null)] - Open Connection "32596488" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:13,684 [39] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:13,686 [39] DEBUG [(null)] - Close Connection "32596488" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:15,069 [39] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Gysfl.QueryTree] based off of PreparedStatement: [SET NOCOUNT ON
       
      set transaction isolation level read uncommitted
     
      SELECT db.id, db.mc AS [text], db.bm, db.id_farther AS fatherId, db.path FROM  [tb_gysfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:15,070 [39] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryTree] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:15,071 [39] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryTree] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:15,073 [39] DEBUG [(null)] - Open Connection "33854561" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:15,094 [39] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:15,095 [39] DEBUG [(null)] - Close Connection "33854561" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:15,247 [42] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Gysfl.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[path],db.[id_farther],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast] from  [tb_gysfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:15,249 [42] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryList] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:15,251 [42] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:15,254 [42] DEBUG [(null)] - Open Connection "51210398" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:15,272 [42] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:15,281 [42] DEBUG [(null)] - Close Connection "51210398" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:36,798 [39] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser],db.flag_delete from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  and db.[flag_delete]= @param1  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:36,801 [39] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:36,803 [39] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:36,806 [39] DEBUG [(null)] - Open Connection "27900424" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:36,821 [39] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:36,822 [39] DEBUG [(null)] - Close Connection "27900424" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:36,824 [39] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:36,825 [39] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:36,826 [39] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:36,827 [39] DEBUG [(null)] - Open Connection "62783388" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:36,867 [39] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:36,868 [39] DEBUG [(null)] - Close Connection "62783388" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:36,879 [39] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:36,880 [39] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-15], @param2=[bgrq,2017/3/15 23:59:59], @param3=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:36,881 [39] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:36,883 [39] DEBUG [(null)] - Open Connection "41795938" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:36,897 [39] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:36,898 [39] DEBUG [(null)] - Close Connection "41795938" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:36,900 [39] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:36,902 [39] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-15], @param2=[bgrq,2017/3/15 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:36,903 [39] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:36,904 [39] DEBUG [(null)] - Open Connection "18259690" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:36,914 [39] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:36,916 [39] DEBUG [(null)] - Close Connection "18259690" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:36,918 [39] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:36,919 [39] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:36,920 [39] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:36,921 [39] DEBUG [(null)] - Open Connection "54129093" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:36,945 [39] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:36,946 [39] DEBUG [(null)] - Close Connection "54129093" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:36,948 [39] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '2a7a8a51-fe78-4687-8036-1494130f7945','a6057a78-1836-4fc3-8688-d987fcf1a99a','2017-03-15','2017/3/15 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:36,953 [39] DEBUG [(null)] - Open Connection "57740675" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:36,972 [39] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:36,974 [39] DEBUG [(null)] - Close Connection "57740675" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:36,976 [39] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:36,978 [39] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:36,980 [39] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:36,983 [39] DEBUG [(null)] - Open Connection "35225523" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:36,996 [39] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:36,997 [39] DEBUG [(null)] - Close Connection "35225523" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:36,999 [39] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:37,000 [39] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:37,001 [39] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:37,002 [39] DEBUG [(null)] - Open Connection "34164710" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:37,029 [39] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:37,030 [39] DEBUG [(null)] - Close Connection "34164710" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:37,032 [39] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [ts_notice]
      as db
       where  db.[flag_delete]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:37,034 [39] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Parameters: [@param0=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:37,035 [39] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:37,036 [39] DEBUG [(null)] - Open Connection "64700331" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:37,046 [39] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:37,047 [39] DEBUG [(null)] - Close Connection "64700331" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:37,049 [39] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.QueryPage] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select t.* from (select row_number() over( order by  
          db.rq_create desc
           ) as rownumber,db.* from  [ts_notice]
      as db  where  db.[flag_delete]= @param0  ) as t
       where  
          t.rownumber between ( @param1  + 1)
           and 
            ( @param1  +  @param2 )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:37,051 [39] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Parameters: [@param0=[flag_delete,0], @param1=[start,0], @param2=[limit,10]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:37,052 [39] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32], @param2=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:37,053 [39] DEBUG [(null)] - Open Connection "14879378" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:37,064 [39] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:37,065 [39] DEBUG [(null)] - Close Connection "14879378" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:38,323 [39] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Gysfl.QueryTree] based off of PreparedStatement: [SET NOCOUNT ON
       
      set transaction isolation level read uncommitted
     
      SELECT db.id, db.mc AS [text], db.bm, db.id_farther AS fatherId, db.path FROM  [tb_gysfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:38,330 [39] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryTree] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:38,336 [39] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryTree] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:38,347 [39] DEBUG [(null)] - Open Connection "2722682" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:38,393 [39] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:38,407 [39] DEBUG [(null)] - Close Connection "2722682" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:39,637 [41] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Gysfl.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[path],db.[id_farther],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast] from  [tb_gysfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:39,638 [41] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryList] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:39,639 [41] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:39,641 [41] DEBUG [(null)] - Open Connection "26431054" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:39,654 [41] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:39,655 [41] DEBUG [(null)] - Close Connection "26431054" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:46,872 [40] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser],db.flag_delete from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  and db.[flag_delete]= @param1  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:46,874 [40] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:46,876 [40] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:46,878 [40] DEBUG [(null)] - Open Connection "64438492" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:46,890 [40] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:46,892 [40] DEBUG [(null)] - Close Connection "64438492" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:46,893 [40] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:46,895 [40] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:46,896 [40] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:46,898 [40] DEBUG [(null)] - Open Connection "29150758" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:46,932 [40] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:46,933 [40] DEBUG [(null)] - Close Connection "29150758" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:46,946 [40] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:46,947 [40] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-15], @param2=[bgrq,2017/3/15 23:59:59], @param3=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:46,948 [40] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:46,949 [40] DEBUG [(null)] - Open Connection "45145767" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:46,974 [40] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:46,975 [40] DEBUG [(null)] - Close Connection "45145767" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:46,978 [40] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:46,979 [40] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-15], @param2=[bgrq,2017/3/15 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:46,981 [40] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:46,982 [40] DEBUG [(null)] - Open Connection "67076558" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:47,000 [40] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:47,002 [40] DEBUG [(null)] - Close Connection "67076558" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:47,004 [40] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:47,005 [40] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:47,007 [40] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:47,008 [40] DEBUG [(null)] - Open Connection "61778513" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:47,026 [40] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:47,027 [40] DEBUG [(null)] - Close Connection "61778513" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:47,028 [40] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '2a7a8a51-fe78-4687-8036-1494130f7945','a6057a78-1836-4fc3-8688-d987fcf1a99a','2017-03-15','2017/3/15 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:47,030 [40] DEBUG [(null)] - Open Connection "60016219" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:47,049 [40] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:47,050 [40] DEBUG [(null)] - Close Connection "60016219" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:47,052 [40] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:47,054 [40] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:47,055 [40] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:47,056 [40] DEBUG [(null)] - Open Connection "37673240" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:47,071 [40] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:47,072 [40] DEBUG [(null)] - Close Connection "37673240" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:47,073 [40] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:47,074 [40] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:47,075 [40] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:47,076 [40] DEBUG [(null)] - Open Connection "42069186" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:47,099 [40] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:47,101 [40] DEBUG [(null)] - Close Connection "42069186" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:47,104 [40] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [ts_notice]
      as db
       where  db.[flag_delete]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:47,105 [40] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Parameters: [@param0=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:47,107 [40] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:47,108 [40] DEBUG [(null)] - Open Connection "29202826" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:47,128 [40] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:47,129 [40] DEBUG [(null)] - Close Connection "29202826" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:47,130 [40] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.QueryPage] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select t.* from (select row_number() over( order by  
          db.rq_create desc
           ) as rownumber,db.* from  [ts_notice]
      as db  where  db.[flag_delete]= @param0  ) as t
       where  
          t.rownumber between ( @param1  + 1)
           and 
            ( @param1  +  @param2 )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:47,131 [40] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Parameters: [@param0=[flag_delete,0], @param1=[start,0], @param2=[limit,10]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:47,132 [40] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32], @param2=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:47,133 [40] DEBUG [(null)] - Open Connection "53737098" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:47,147 [40] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:47,148 [40] DEBUG [(null)] - Close Connection "53737098" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:48,292 [42] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Gysfl.QueryTree] based off of PreparedStatement: [SET NOCOUNT ON
       
      set transaction isolation level read uncommitted
     
      SELECT db.id, db.mc AS [text], db.bm, db.id_farther AS fatherId, db.path FROM  [tb_gysfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:48,294 [42] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryTree] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:48,296 [42] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryTree] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:48,297 [42] DEBUG [(null)] - Open Connection "12984781" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:48,331 [42] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:48,333 [42] DEBUG [(null)] - Close Connection "12984781" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:49,501 [40] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Gysfl.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[path],db.[id_farther],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast] from  [tb_gysfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:49,506 [40] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryList] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 15:57:49,515 [40] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:49,517 [40] DEBUG [(null)] - Open Connection "18996320" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:49,547 [40] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 15:57:49,548 [40] DEBUG [(null)] - Close Connection "18996320" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:07,222 [42] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser],db.flag_delete from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  and db.[flag_delete]= @param1  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:07,225 [42] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:07,228 [42] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:07,230 [42] DEBUG [(null)] - Open Connection "18497178" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:07,247 [42] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:07,248 [42] DEBUG [(null)] - Close Connection "18497178" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:07,249 [42] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:07,251 [42] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:07,256 [42] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:07,258 [42] DEBUG [(null)] - Open Connection "45895264" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:07,307 [42] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:07,308 [42] DEBUG [(null)] - Close Connection "45895264" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:07,325 [42] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:07,326 [42] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-15], @param2=[bgrq,2017/3/15 23:59:59], @param3=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:07,327 [42] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:07,329 [42] DEBUG [(null)] - Open Connection "21034790" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:07,351 [42] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:07,355 [42] DEBUG [(null)] - Close Connection "21034790" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:07,358 [42] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:07,362 [42] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-15], @param2=[bgrq,2017/3/15 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:07,365 [42] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:07,367 [42] DEBUG [(null)] - Open Connection "15140065" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:07,413 [42] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:07,414 [42] DEBUG [(null)] - Close Connection "15140065" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:07,416 [42] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:07,417 [42] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:07,421 [42] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:07,422 [42] DEBUG [(null)] - Open Connection "1985613" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:07,438 [42] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:07,440 [42] DEBUG [(null)] - Close Connection "1985613" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:07,441 [42] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '2a7a8a51-fe78-4687-8036-1494130f7945','a6057a78-1836-4fc3-8688-d987fcf1a99a','2017-03-15','2017/3/15 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:07,442 [42] DEBUG [(null)] - Open Connection "7966883" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:07,457 [42] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:07,458 [42] DEBUG [(null)] - Close Connection "7966883" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:07,460 [42] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:07,461 [42] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:07,463 [42] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:07,464 [42] DEBUG [(null)] - Open Connection "36093495" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:07,483 [42] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:07,485 [42] DEBUG [(null)] - Close Connection "36093495" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:07,487 [42] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:07,488 [42] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:07,489 [42] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:07,490 [42] DEBUG [(null)] - Open Connection "3050323" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:07,520 [42] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:07,522 [42] DEBUG [(null)] - Close Connection "3050323" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:07,524 [42] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [ts_notice]
      as db
       where  db.[flag_delete]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:07,526 [42] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Parameters: [@param0=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:07,527 [42] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:07,528 [42] DEBUG [(null)] - Open Connection "57943928" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:07,541 [42] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:07,542 [42] DEBUG [(null)] - Close Connection "57943928" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:07,543 [42] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.QueryPage] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select t.* from (select row_number() over( order by  
          db.rq_create desc
           ) as rownumber,db.* from  [ts_notice]
      as db  where  db.[flag_delete]= @param0  ) as t
       where  
          t.rownumber between ( @param1  + 1)
           and 
            ( @param1  +  @param2 )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:07,544 [42] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Parameters: [@param0=[flag_delete,0], @param1=[start,0], @param2=[limit,10]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:07,546 [42] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32], @param2=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:07,547 [42] DEBUG [(null)] - Open Connection "25078864" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:07,562 [42] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:07,563 [42] DEBUG [(null)] - Close Connection "25078864" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:08,934 [42] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Gysfl.QueryTree] based off of PreparedStatement: [SET NOCOUNT ON
       
      set transaction isolation level read uncommitted
     
      SELECT db.id, db.mc AS [text], db.bm, db.id_farther AS fatherId, db.path FROM  [tb_gysfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:08,941 [42] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryTree] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:08,944 [42] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryTree] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:08,947 [42] DEBUG [(null)] - Open Connection "40015659" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:08,986 [42] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:09,049 [42] DEBUG [(null)] - Close Connection "40015659" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:10,846 [37] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Gysfl.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[path],db.[id_farther],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast] from  [tb_gysfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:10,848 [37] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryList] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:10,849 [37] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:10,852 [37] DEBUG [(null)] - Open Connection "47140415" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:10,877 [37] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:10,878 [37] DEBUG [(null)] - Close Connection "47140415" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:19,466 [41] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser],db.flag_delete from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  and db.[flag_delete]= @param1  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:19,467 [41] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:19,468 [41] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:19,469 [41] DEBUG [(null)] - Open Connection "27699138" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:19,483 [41] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:19,484 [41] DEBUG [(null)] - Close Connection "27699138" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:19,486 [41] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:19,487 [41] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:19,488 [41] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:19,491 [41] DEBUG [(null)] - Open Connection "50642838" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:19,531 [41] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:19,532 [41] DEBUG [(null)] - Close Connection "50642838" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:19,544 [41] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:19,546 [41] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-15], @param2=[bgrq,2017/3/15 23:59:59], @param3=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:19,547 [41] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:19,548 [41] DEBUG [(null)] - Open Connection "35813901" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:19,570 [41] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:19,572 [41] DEBUG [(null)] - Close Connection "35813901" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:19,573 [41] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:19,575 [41] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-15], @param2=[bgrq,2017/3/15 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:19,576 [41] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:19,578 [41] DEBUG [(null)] - Open Connection "12751667" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:19,592 [41] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:19,593 [41] DEBUG [(null)] - Close Connection "12751667" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:19,594 [41] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:19,595 [41] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:19,596 [41] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:19,597 [41] DEBUG [(null)] - Open Connection "7548151" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:19,609 [41] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:19,610 [41] DEBUG [(null)] - Close Connection "7548151" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:19,611 [41] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '2a7a8a51-fe78-4687-8036-1494130f7945','a6057a78-1836-4fc3-8688-d987fcf1a99a','2017-03-15','2017/3/15 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:19,612 [41] DEBUG [(null)] - Open Connection "569203" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:19,632 [41] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:19,634 [41] DEBUG [(null)] - Close Connection "569203" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:19,635 [41] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:19,636 [41] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:19,637 [41] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:19,639 [41] DEBUG [(null)] - Open Connection "29086503" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:19,658 [41] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:19,660 [41] DEBUG [(null)] - Close Connection "29086503" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:19,661 [41] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:19,663 [41] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:19,665 [41] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:19,667 [41] DEBUG [(null)] - Open Connection "16672061" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:19,696 [41] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:19,698 [41] DEBUG [(null)] - Close Connection "16672061" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:19,700 [41] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [ts_notice]
      as db
       where  db.[flag_delete]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:19,702 [41] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Parameters: [@param0=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:19,703 [41] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:19,705 [41] DEBUG [(null)] - Open Connection "66115014" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:19,730 [41] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:19,731 [41] DEBUG [(null)] - Close Connection "66115014" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:19,733 [41] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.QueryPage] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select t.* from (select row_number() over( order by  
          db.rq_create desc
           ) as rownumber,db.* from  [ts_notice]
      as db  where  db.[flag_delete]= @param0  ) as t
       where  
          t.rownumber between ( @param1  + 1)
           and 
            ( @param1  +  @param2 )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:19,735 [41] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Parameters: [@param0=[flag_delete,0], @param1=[start,0], @param2=[limit,10]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:19,736 [41] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32], @param2=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:19,737 [41] DEBUG [(null)] - Open Connection "33366010" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:19,754 [41] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:19,755 [41] DEBUG [(null)] - Close Connection "33366010" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:21,006 [42] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Gysfl.QueryTree] based off of PreparedStatement: [SET NOCOUNT ON
       
      set transaction isolation level read uncommitted
     
      SELECT db.id, db.mc AS [text], db.bm, db.id_farther AS fatherId, db.path FROM  [tb_gysfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:21,015 [42] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryTree] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:21,017 [42] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryTree] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:21,019 [42] DEBUG [(null)] - Open Connection "39342463" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:21,044 [42] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:21,046 [42] DEBUG [(null)] - Close Connection "39342463" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:22,233 [37] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Gysfl.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[path],db.[id_farther],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast] from  [tb_gysfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:22,234 [37] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryList] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:22,236 [37] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:22,237 [37] DEBUG [(null)] - Open Connection "39915811" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:22,260 [37] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:22,261 [37] DEBUG [(null)] - Close Connection "39915811" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:56,974 [42] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser],db.flag_delete from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  and db.[flag_delete]= @param1  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:56,977 [42] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:56,978 [42] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:56,979 [42] DEBUG [(null)] - Open Connection "26942766" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:56,991 [42] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:56,992 [42] DEBUG [(null)] - Close Connection "26942766" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:56,994 [42] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:56,995 [42] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:56,996 [42] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:56,997 [42] DEBUG [(null)] - Open Connection "30587012" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:57,030 [42] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:57,031 [42] DEBUG [(null)] - Close Connection "30587012" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:57,042 [42] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:57,044 [42] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-15], @param2=[bgrq,2017/3/15 23:59:59], @param3=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:57,044 [42] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:57,045 [42] DEBUG [(null)] - Open Connection "57061829" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:57,060 [42] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:57,061 [42] DEBUG [(null)] - Close Connection "57061829" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:57,062 [42] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:57,064 [42] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-15], @param2=[bgrq,2017/3/15 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:57,065 [42] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:57,066 [42] DEBUG [(null)] - Open Connection "6693579" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:57,085 [42] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:57,087 [42] DEBUG [(null)] - Close Connection "6693579" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:57,089 [42] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:57,091 [42] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:57,092 [42] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:57,094 [42] DEBUG [(null)] - Open Connection "17138533" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:57,117 [42] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:57,123 [42] DEBUG [(null)] - Close Connection "17138533" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:57,127 [42] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '2a7a8a51-fe78-4687-8036-1494130f7945','a6057a78-1836-4fc3-8688-d987fcf1a99a','2017-03-15','2017/3/15 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:57,129 [42] DEBUG [(null)] - Open Connection "12176206" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:57,156 [42] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:57,158 [42] DEBUG [(null)] - Close Connection "12176206" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:57,159 [42] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:57,160 [42] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:57,163 [42] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:57,164 [42] DEBUG [(null)] - Open Connection "26108945" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:57,190 [42] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:57,191 [42] DEBUG [(null)] - Close Connection "26108945" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:57,193 [42] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:57,195 [42] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:57,196 [42] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:57,197 [42] DEBUG [(null)] - Open Connection "20553756" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:57,225 [42] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:57,227 [42] DEBUG [(null)] - Close Connection "20553756" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:57,229 [42] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [ts_notice]
      as db
       where  db.[flag_delete]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:57,230 [42] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Parameters: [@param0=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:57,231 [42] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:57,232 [42] DEBUG [(null)] - Open Connection "66138946" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:57,246 [42] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:57,248 [42] DEBUG [(null)] - Close Connection "66138946" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:57,251 [42] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.QueryPage] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select t.* from (select row_number() over( order by  
          db.rq_create desc
           ) as rownumber,db.* from  [ts_notice]
      as db  where  db.[flag_delete]= @param0  ) as t
       where  
          t.rownumber between ( @param1  + 1)
           and 
            ( @param1  +  @param2 )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:57,252 [42] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Parameters: [@param0=[flag_delete,0], @param1=[start,0], @param2=[limit,10]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:57,255 [42] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32], @param2=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:57,256 [42] DEBUG [(null)] - Open Connection "33530867" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:57,279 [42] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:57,280 [42] DEBUG [(null)] - Close Connection "33530867" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:58,495 [42] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Gysfl.QueryTree] based off of PreparedStatement: [SET NOCOUNT ON
       
      set transaction isolation level read uncommitted
     
      SELECT db.id, db.mc AS [text], db.bm, db.id_farther AS fatherId, db.path FROM  [tb_gysfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:58,506 [42] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryTree] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:58,523 [42] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryTree] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:58,611 [42] DEBUG [(null)] - Open Connection "64366069" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:58,642 [42] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:58,655 [42] DEBUG [(null)] - Close Connection "64366069" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:59,745 [38] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Gysfl.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[path],db.[id_farther],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast] from  [tb_gysfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:59,746 [38] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryList] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:03:59,748 [38] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:59,749 [38] DEBUG [(null)] - Open Connection "61362267" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:59,771 [38] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:03:59,772 [38] DEBUG [(null)] - Close Connection "61362267" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:08:42,866 [37] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Spfl.QueryTree] based off of PreparedStatement: [SET NOCOUNT ON
       
      set transaction isolation level read uncommitted
     
      SELECT db.id, db.mc AS [text], db.bm, db.id_father AS fatherId, db.path FROM  [tb_spfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:08:42,868 [37] DEBUG [(null)] - Statement Id: [Tb_Spfl.QueryTree] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:08:42,869 [37] DEBUG [(null)] - Statement Id: [Tb_Spfl.QueryTree] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:08:42,870 [37] DEBUG [(null)] - Open Connection "19767072" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:08:42,894 [37] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:08:42,895 [37] DEBUG [(null)] - Close Connection "19767072" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:08:44,260 [38] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Spfl.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[path],db.[id_father],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[sort_id] from  [tb_spfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:08:44,261 [38] DEBUG [(null)] - Statement Id: [Tb_Spfl.QueryList] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:08:44,262 [38] DEBUG [(null)] - Statement Id: [Tb_Spfl.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:08:44,264 [38] DEBUG [(null)] - Open Connection "13891000" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:08:44,297 [38] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:08:44,298 [38] DEBUG [(null)] - Close Connection "13891000" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:08:44,335 [37] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Spfl.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[path],db.[id_father],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[sort_id] from  [tb_spfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  and db.[id_father]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:08:44,336 [37] DEBUG [(null)] - Statement Id: [Tb_Spfl.QueryList] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0], @param2=[fatherId,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:08:44,338 [37] DEBUG [(null)] - Statement Id: [Tb_Spfl.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32], @param2=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:08:44,339 [37] DEBUG [(null)] - Open Connection "29192312" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:08:44,354 [37] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:08:44,356 [37] DEBUG [(null)] - Close Connection "29192312" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:08:53,590 [38] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Gysfl.QueryTree] based off of PreparedStatement: [SET NOCOUNT ON
       
      set transaction isolation level read uncommitted
     
      SELECT db.id, db.mc AS [text], db.bm, db.id_farther AS fatherId, db.path FROM  [tb_gysfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:08:53,592 [38] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryTree] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:08:53,603 [38] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryTree] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:08:53,606 [38] DEBUG [(null)] - Open Connection "5501238" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:08:53,632 [38] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:08:53,635 [38] DEBUG [(null)] - Close Connection "5501238" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:08:53,684 [36] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Gysfl.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[path],db.[id_farther],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast] from  [tb_gysfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:08:53,686 [36] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryList] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:08:53,687 [36] DEBUG [(null)] - Statement Id: [Tb_Gysfl.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:08:53,696 [36] DEBUG [(null)] - Open Connection "61658343" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:08:53,714 [36] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:08:53,715 [36] DEBUG [(null)] - Close Connection "61658343" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:10:14,204 [42] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser],db.flag_delete from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  and db.[flag_delete]= @param1  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:10:14,206 [42] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:10:14,207 [42] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:10:14,210 [42] DEBUG [(null)] - Open Connection "30155261" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:10:14,222 [42] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:10:14,223 [42] DEBUG [(null)] - Close Connection "30155261" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:10:14,225 [42] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:10:14,226 [42] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:10:14,227 [42] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:10:14,228 [42] DEBUG [(null)] - Open Connection "49477776" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:10:14,260 [42] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-15 16:10:14,261 [42] DEBUG [(null)] - Close Connection "49477776" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-15 16:10:14,272 [42] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
