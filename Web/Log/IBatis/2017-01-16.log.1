Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 15:59:45,573 [20] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/16 0:00:00], @param2=[bgrq,2017/1/16 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 15:59:45,584 [20] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 15:59:45,585 [20] DEBUG [(null)] - Open Connection "34764300" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 15:59:45,599 [20] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 15:59:45,600 [20] DEBUG [(null)] - Close Connection "34764300" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 15:59:45,601 [20] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 15:59:45,602 [20] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 15:59:45,603 [20] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 15:59:45,604 [20] DEBUG [(null)] - Open Connection "2175502" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 15:59:45,616 [20] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 15:59:45,617 [20] DEBUG [(null)] - Close Connection "2175502" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 15:59:45,618 [20] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '08e9ed0b-db42-480d-ab10-47a788e65318','382952aa-ecb3-4708-95a0-c01754009101','2017/1/16 0:00:00','2017/1/16 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 15:59:45,619 [20] DEBUG [(null)] - Open Connection "50699993" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 15:59:45,642 [20] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 15:59:45,643 [20] DEBUG [(null)] - Close Connection "50699993" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 15:59:45,644 [20] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 15:59:45,645 [20] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 15:59:45,646 [20] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 15:59:45,646 [20] DEBUG [(null)] - Open Connection "14532178" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 15:59:45,696 [20] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 15:59:45,697 [20] DEBUG [(null)] - Close Connection "14532178" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 15:59:45,699 [20] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 15:59:45,700 [20] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 15:59:45,701 [20] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 15:59:45,702 [20] DEBUG [(null)] - Open Connection "27275584" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 15:59:45,721 [20] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 15:59:45,722 [20] DEBUG [(null)] - Close Connection "27275584" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:00:43,232 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:00:43,233 [11] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:00:43,235 [11] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:00:43,237 [11] DEBUG [(null)] - Open Connection "27295079" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:00:43,252 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:00:43,253 [11] DEBUG [(null)] - Close Connection "27295079" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:00:43,254 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:00:43,256 [11] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],2], @param2=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:00:43,257 [11] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:00:43,258 [11] DEBUG [(null)] - Open Connection "62390471" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:00:43,296 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:00:43,297 [11] DEBUG [(null)] - Close Connection "62390471" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:00:43,309 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:00:43,310 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/16 0:00:00], @param2=[bgrq,2017/1/16 23:59:59], @param3=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:00:43,311 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:00:43,313 [11] DEBUG [(null)] - Open Connection "37234203" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:00:43,330 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:00:43,333 [11] DEBUG [(null)] - Close Connection "37234203" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:00:43,335 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:00:43,336 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/16 0:00:00], @param2=[bgrq,2017/1/16 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:00:43,337 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:00:43,339 [11] DEBUG [(null)] - Open Connection "12536648" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:00:43,356 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:00:43,358 [11] DEBUG [(null)] - Close Connection "12536648" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:00:43,360 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:00:43,364 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:00:43,368 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:00:43,369 [11] DEBUG [(null)] - Open Connection "10316018" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:00:43,396 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:00:43,398 [11] DEBUG [(null)] - Close Connection "10316018" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:00:43,400 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '08e9ed0b-db42-480d-ab10-47a788e65318','382952aa-ecb3-4708-95a0-c01754009101','2017/1/16 0:00:00','2017/1/16 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:00:43,401 [11] DEBUG [(null)] - Open Connection "35722877" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:00:43,414 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:00:43,415 [11] DEBUG [(null)] - Close Connection "35722877" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:00:43,418 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:00:43,419 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:00:43,420 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:00:43,421 [11] DEBUG [(null)] - Open Connection "5590541" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:00:43,467 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:00:43,468 [11] DEBUG [(null)] - Close Connection "5590541" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:00:43,469 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:00:43,471 [11] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:00:43,472 [11] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:00:43,473 [11] DEBUG [(null)] - Open Connection "5501061" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:00:43,506 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:00:43,507 [11] DEBUG [(null)] - Close Connection "5501061" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:01:09,196 [28] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:01:09,199 [28] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:01:09,200 [28] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:01:09,202 [28] DEBUG [(null)] - Open Connection "28897719" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:01:09,218 [28] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:01:09,219 [28] DEBUG [(null)] - Close Connection "28897719" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:01:09,220 [28] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:01:09,221 [28] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],2], @param2=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:01:09,224 [28] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:01:09,226 [28] DEBUG [(null)] - Open Connection "25590036" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:01:09,252 [28] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:01:09,253 [28] DEBUG [(null)] - Close Connection "25590036" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:01:09,262 [28] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:01:09,263 [28] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/16 0:00:00], @param2=[bgrq,2017/1/16 23:59:59], @param3=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:01:09,264 [28] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:01:09,265 [28] DEBUG [(null)] - Open Connection "41244238" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:01:09,283 [28] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:01:09,284 [28] DEBUG [(null)] - Close Connection "41244238" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:01:09,285 [28] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:01:09,286 [28] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/16 0:00:00], @param2=[bgrq,2017/1/16 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:01:09,287 [28] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:01:09,287 [28] DEBUG [(null)] - Open Connection "60846509" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:01:09,299 [28] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:01:09,300 [28] DEBUG [(null)] - Close Connection "60846509" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:01:09,301 [28] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:01:09,302 [28] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:01:09,303 [28] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:01:09,304 [28] DEBUG [(null)] - Open Connection "5502007" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:01:09,314 [28] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:01:09,315 [28] DEBUG [(null)] - Close Connection "5502007" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:01:09,316 [28] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '08e9ed0b-db42-480d-ab10-47a788e65318','382952aa-ecb3-4708-95a0-c01754009101','2017/1/16 0:00:00','2017/1/16 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:01:09,317 [28] DEBUG [(null)] - Open Connection "39755090" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:01:09,336 [28] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:01:09,337 [28] DEBUG [(null)] - Close Connection "39755090" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:01:09,338 [28] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:01:09,340 [28] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:01:09,342 [28] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:01:09,343 [28] DEBUG [(null)] - Open Connection "20833978" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:01:09,391 [28] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:01:09,395 [28] DEBUG [(null)] - Close Connection "20833978" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:01:09,398 [28] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:01:09,401 [28] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:01:09,404 [28] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:01:09,406 [28] DEBUG [(null)] - Open Connection "21656322" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:01:09,438 [28] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:01:09,440 [28] DEBUG [(null)] - Close Connection "21656322" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:03:24,072 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:03:24,073 [7] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:03:24,075 [7] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:03:24,076 [7] DEBUG [(null)] - Open Connection "25059025" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:03:24,159 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:03:24,161 [7] DEBUG [(null)] - Close Connection "25059025" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:03:24,163 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:03:24,168 [7] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],2], @param2=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:03:24,170 [7] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:03:24,172 [7] DEBUG [(null)] - Open Connection "21641481" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:03:24,279 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:03:24,284 [7] DEBUG [(null)] - Close Connection "21641481" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:03:24,300 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:03:24,302 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/16 0:00:00], @param2=[bgrq,2017/1/16 23:59:59], @param3=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:03:24,305 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:03:24,307 [7] DEBUG [(null)] - Open Connection "43080258" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:03:24,449 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:03:24,452 [7] DEBUG [(null)] - Close Connection "43080258" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:03:24,454 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:03:24,456 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/16 0:00:00], @param2=[bgrq,2017/1/16 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:03:24,458 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:03:24,471 [7] DEBUG [(null)] - Open Connection "12362379" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:03:24,514 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:03:24,515 [7] DEBUG [(null)] - Close Connection "12362379" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:03:24,519 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:03:24,524 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:03:24,525 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:03:24,527 [7] DEBUG [(null)] - Open Connection "5305332" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:03:24,539 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:03:24,540 [7] DEBUG [(null)] - Close Connection "5305332" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:03:24,542 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '08e9ed0b-db42-480d-ab10-47a788e65318','382952aa-ecb3-4708-95a0-c01754009101','2017/1/16 0:00:00','2017/1/16 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:03:24,542 [7] DEBUG [(null)] - Open Connection "40858254" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:03:24,583 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:03:24,584 [7] DEBUG [(null)] - Close Connection "40858254" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:03:24,585 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:03:24,586 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:03:24,587 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:03:24,588 [7] DEBUG [(null)] - Open Connection "6145129" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:03:24,660 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:03:24,662 [7] DEBUG [(null)] - Close Connection "6145129" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:03:24,663 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:03:24,664 [7] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:03:24,665 [7] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:03:24,666 [7] DEBUG [(null)] - Open Connection "1462676" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:03:24,691 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:03:24,692 [7] DEBUG [(null)] - Close Connection "1462676" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:03:28,797 [20] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:03:28,798 [20] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:03:28,799 [20] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:03:28,801 [20] DEBUG [(null)] - Open Connection "18108079" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:03:28,834 [20] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:03:28,846 [20] DEBUG [(null)] - Close Connection "18108079" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:03:28,848 [20] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:03:28,850 [20] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:03:28,860 [20] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:03:28,864 [20] DEBUG [(null)] - Open Connection "62791748" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:03:28,980 [20] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:03:29,007 [20] DEBUG [(null)] - Close Connection "62791748" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:03:29,315 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_cyuser],db.[id_masteruser],db.[id],db.[username],db.[password],db.[name],db.[companyname],db.[flag_sex],db.[id_father],db.[job],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[rq_start],db.[rq_stop],db.[flag_state],db.[flag_master],db.[bz],db.[id_province],db.[id_city],db.[id_county],db.[zipcode],db.[address],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[version],db.id_shop,db.flag_delete  from  [tb_user]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:03:29,326 [3] DEBUG [(null)] - Statement Id: [Tb_User.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:03:29,382 [3] DEBUG [(null)] - Statement Id: [Tb_User.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:03:29,456 [3] DEBUG [(null)] - Open Connection "15648090" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:03:29,611 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:03:29,645 [3] DEBUG [(null)] - Close Connection "15648090" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:04:57,235 [20] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:04:57,237 [20] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:04:57,238 [20] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:04:57,239 [20] DEBUG [(null)] - Open Connection "29335148" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:04:57,257 [20] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:04:57,258 [20] DEBUG [(null)] - Close Connection "29335148" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:04:57,260 [20] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:04:57,265 [20] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],2], @param2=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:04:57,266 [20] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:04:57,268 [20] DEBUG [(null)] - Open Connection "10459677" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:04:57,291 [20] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:04:57,293 [20] DEBUG [(null)] - Close Connection "10459677" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:04:57,304 [20] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:04:57,305 [20] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/16 0:00:00], @param2=[bgrq,2017/1/16 23:59:59], @param3=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:04:57,306 [20] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:04:57,307 [20] DEBUG [(null)] - Open Connection "16657320" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:04:57,321 [20] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:04:57,322 [20] DEBUG [(null)] - Close Connection "16657320" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:04:57,324 [20] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:04:57,324 [20] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/16 0:00:00], @param2=[bgrq,2017/1/16 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:04:57,325 [20] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:04:57,326 [20] DEBUG [(null)] - Open Connection "6586139" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:04:57,339 [20] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:04:57,340 [20] DEBUG [(null)] - Close Connection "6586139" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:04:57,341 [20] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:04:57,342 [20] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:04:57,342 [20] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:04:57,343 [20] DEBUG [(null)] - Open Connection "22950961" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:04:57,354 [20] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:04:57,355 [20] DEBUG [(null)] - Close Connection "22950961" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:04:57,356 [20] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '08e9ed0b-db42-480d-ab10-47a788e65318','382952aa-ecb3-4708-95a0-c01754009101','2017/1/16 0:00:00','2017/1/16 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:04:57,357 [20] DEBUG [(null)] - Open Connection "4674667" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:04:57,374 [20] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:04:57,375 [20] DEBUG [(null)] - Close Connection "4674667" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:04:57,376 [20] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:04:57,377 [20] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:04:57,378 [20] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:04:57,379 [20] DEBUG [(null)] - Open Connection "61802420" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:04:57,427 [20] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:04:57,429 [20] DEBUG [(null)] - Close Connection "61802420" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:04:57,431 [20] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:04:57,432 [20] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:04:57,433 [20] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:04:57,435 [20] DEBUG [(null)] - Open Connection "18714322" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:04:57,456 [20] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:04:57,457 [20] DEBUG [(null)] - Close Connection "18714322" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:05:01,696 [20] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:05:01,702 [20] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:05:01,707 [20] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:05:01,711 [20] DEBUG [(null)] - Open Connection "52376561" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:05:01,742 [20] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:05:01,744 [20] DEBUG [(null)] - Close Connection "52376561" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:05:01,745 [20] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:05:01,785 [20] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:05:01,790 [20] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:05:01,795 [20] DEBUG [(null)] - Open Connection "22822694" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:05:01,849 [20] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:05:01,859 [20] DEBUG [(null)] - Close Connection "22822694" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:05:02,212 [23] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_cyuser],db.[id_masteruser],db.[id],db.[username],db.[password],db.[name],db.[companyname],db.[flag_sex],db.[id_father],db.[job],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[rq_start],db.[rq_stop],db.[flag_state],db.[flag_master],db.[bz],db.[id_province],db.[id_city],db.[id_county],db.[zipcode],db.[address],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[version],db.id_shop,db.flag_delete  from  [tb_user]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:05:02,271 [23] DEBUG [(null)] - Statement Id: [Tb_User.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:05:02,278 [23] DEBUG [(null)] - Statement Id: [Tb_User.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:05:02,285 [23] DEBUG [(null)] - Open Connection "28392865" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:05:02,329 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:05:02,332 [23] DEBUG [(null)] - Close Connection "28392865" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:22,149 [12] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:22,154 [12] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:22,155 [12] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:22,163 [12] DEBUG [(null)] - Open Connection "46643722" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:22,181 [12] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:22,182 [12] DEBUG [(null)] - Close Connection "46643722" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:22,183 [12] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:22,184 [12] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:22,185 [12] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:22,186 [12] DEBUG [(null)] - Open Connection "56198207" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:22,201 [12] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:22,202 [12] DEBUG [(null)] - Close Connection "56198207" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:22,655 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_cyuser],db.[id_masteruser],db.[id],db.[username],db.[password],db.[name],db.[companyname],db.[flag_sex],db.[id_father],db.[job],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[rq_start],db.[rq_stop],db.[flag_state],db.[flag_master],db.[bz],db.[id_province],db.[id_city],db.[id_county],db.[zipcode],db.[address],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[version],db.id_shop,db.flag_delete  from  [tb_user]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:22,661 [9] DEBUG [(null)] - Statement Id: [Tb_User.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:22,665 [9] DEBUG [(null)] - Statement Id: [Tb_User.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:22,668 [9] DEBUG [(null)] - Open Connection "51833655" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:22,699 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:22,701 [9] DEBUG [(null)] - Close Connection "51833655" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:40,608 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:40,610 [25] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:40,611 [25] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:40,613 [25] DEBUG [(null)] - Open Connection "24680267" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:40,624 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:40,626 [25] DEBUG [(null)] - Close Connection "24680267" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:40,627 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:40,633 [25] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],2], @param2=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:40,636 [25] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:40,637 [25] DEBUG [(null)] - Open Connection "41291301" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:40,668 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:40,669 [25] DEBUG [(null)] - Close Connection "41291301" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:40,676 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:40,678 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/16 0:00:00], @param2=[bgrq,2017/1/16 23:59:59], @param3=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:40,679 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:40,680 [25] DEBUG [(null)] - Open Connection "40619356" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:40,693 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:40,694 [25] DEBUG [(null)] - Close Connection "40619356" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:40,695 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:40,696 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/16 0:00:00], @param2=[bgrq,2017/1/16 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:40,698 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:40,700 [25] DEBUG [(null)] - Open Connection "37174010" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:40,711 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:40,713 [25] DEBUG [(null)] - Close Connection "37174010" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:40,715 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:40,716 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:40,717 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:40,718 [25] DEBUG [(null)] - Open Connection "10956975" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:40,736 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:40,737 [25] DEBUG [(null)] - Close Connection "10956975" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:40,738 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '08e9ed0b-db42-480d-ab10-47a788e65318','382952aa-ecb3-4708-95a0-c01754009101','2017/1/16 0:00:00','2017/1/16 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:40,738 [25] DEBUG [(null)] - Open Connection "9631765" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:40,751 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:40,752 [25] DEBUG [(null)] - Close Connection "9631765" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:40,753 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:40,754 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:40,755 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:40,756 [25] DEBUG [(null)] - Open Connection "4702445" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:40,801 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:40,802 [25] DEBUG [(null)] - Close Connection "4702445" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:40,803 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:40,805 [25] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:40,805 [25] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:40,806 [25] DEBUG [(null)] - Open Connection "23994719" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:40,845 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:40,846 [25] DEBUG [(null)] - Close Connection "23994719" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:41,920 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:41,921 [7] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:41,922 [7] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:41,923 [7] DEBUG [(null)] - Open Connection "40128830" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:41,945 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:41,948 [7] DEBUG [(null)] - Close Connection "40128830" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:41,950 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:41,972 [7] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:41,989 [7] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:42,005 [7] DEBUG [(null)] - Open Connection "49182985" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:42,038 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:42,040 [7] DEBUG [(null)] - Close Connection "49182985" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:42,425 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_cyuser],db.[id_masteruser],db.[id],db.[username],db.[password],db.[name],db.[companyname],db.[flag_sex],db.[id_father],db.[job],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[rq_start],db.[rq_stop],db.[flag_state],db.[flag_master],db.[bz],db.[id_province],db.[id_city],db.[id_county],db.[zipcode],db.[address],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[version],db.id_shop,db.flag_delete  from  [tb_user]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:42,428 [11] DEBUG [(null)] - Statement Id: [Tb_User.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:42,431 [11] DEBUG [(null)] - Statement Id: [Tb_User.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:42,434 [11] DEBUG [(null)] - Open Connection "17301058" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:42,466 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:42,468 [11] DEBUG [(null)] - Close Connection "17301058" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:43,697 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:43,700 [25] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:43,702 [25] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:43,703 [25] DEBUG [(null)] - Open Connection "23129654" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:43,714 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:43,717 [25] DEBUG [(null)] - Close Connection "23129654" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:43,719 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:43,721 [25] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],2], @param2=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:43,723 [25] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:43,725 [25] DEBUG [(null)] - Open Connection "12694626" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:43,757 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:43,758 [25] DEBUG [(null)] - Close Connection "12694626" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:43,766 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:43,767 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/16 0:00:00], @param2=[bgrq,2017/1/16 23:59:59], @param3=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:43,768 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:43,769 [25] DEBUG [(null)] - Open Connection "57867389" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:43,781 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:43,782 [25] DEBUG [(null)] - Close Connection "57867389" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:43,783 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:43,784 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/16 0:00:00], @param2=[bgrq,2017/1/16 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:43,785 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:43,785 [25] DEBUG [(null)] - Open Connection "36278135" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:43,797 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:43,798 [25] DEBUG [(null)] - Close Connection "36278135" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:43,799 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:43,800 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:43,801 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:43,801 [25] DEBUG [(null)] - Open Connection "51107882" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:43,818 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:43,819 [25] DEBUG [(null)] - Close Connection "51107882" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:43,820 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '08e9ed0b-db42-480d-ab10-47a788e65318','382952aa-ecb3-4708-95a0-c01754009101','2017/1/16 0:00:00','2017/1/16 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:43,821 [25] DEBUG [(null)] - Open Connection "64727447" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:43,833 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:43,834 [25] DEBUG [(null)] - Close Connection "64727447" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:43,835 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:43,836 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:43,837 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:43,838 [25] DEBUG [(null)] - Open Connection "18386726" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:43,892 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:43,894 [25] DEBUG [(null)] - Close Connection "18386726" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:43,896 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:43,899 [25] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:43,901 [25] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:43,904 [25] DEBUG [(null)] - Open Connection "51558121" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:43,959 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:43,960 [25] DEBUG [(null)] - Close Connection "51558121" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:44,837 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:44,839 [7] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:44,851 [7] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:44,858 [7] DEBUG [(null)] - Open Connection "42527600" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:44,900 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:44,907 [7] DEBUG [(null)] - Close Connection "42527600" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:44,909 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:44,912 [7] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:44,924 [7] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:44,936 [7] DEBUG [(null)] - Open Connection "61233536" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:44,970 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:44,976 [7] DEBUG [(null)] - Close Connection "61233536" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:45,347 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_cyuser],db.[id_masteruser],db.[id],db.[username],db.[password],db.[name],db.[companyname],db.[flag_sex],db.[id_father],db.[job],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[rq_start],db.[rq_stop],db.[flag_state],db.[flag_master],db.[bz],db.[id_province],db.[id_city],db.[id_county],db.[zipcode],db.[address],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[version],db.id_shop,db.flag_delete  from  [tb_user]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:45,349 [25] DEBUG [(null)] - Statement Id: [Tb_User.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:45,351 [25] DEBUG [(null)] - Statement Id: [Tb_User.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:45,353 [25] DEBUG [(null)] - Open Connection "55160738" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:45,380 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:45,383 [25] DEBUG [(null)] - Close Connection "55160738" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:49,092 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_cyuser],db.[id_masteruser],db.[id],db.[username],db.[password],db.[name],db.[companyname],db.[flag_sex],db.[id_father],db.[job],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[rq_start],db.[rq_stop],db.[flag_state],db.[flag_master],db.[bz],db.[id_province],db.[id_city],db.[id_county],db.[zipcode],db.[address],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[version],db.id_shop,db.flag_delete  from  [tb_user]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:49,093 [25] DEBUG [(null)] - Statement Id: [Tb_User.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:49,094 [25] DEBUG [(null)] - Statement Id: [Tb_User.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:49,095 [25] DEBUG [(null)] - Open Connection "27619672" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:49,124 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:49,126 [25] DEBUG [(null)] - Close Connection "27619672" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:49,593 [12] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:49,595 [12] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:49,597 [12] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:49,599 [12] DEBUG [(null)] - Open Connection "57455363" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:49,639 [12] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:49,640 [12] DEBUG [(null)] - Close Connection "57455363" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:49,642 [12] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:49,644 [12] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:14:49,645 [12] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:49,646 [12] DEBUG [(null)] - Open Connection "25235408" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:49,664 [12] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:14:49,665 [12] DEBUG [(null)] - Close Connection "25235408" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:21:15,317 [26] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:21:15,318 [26] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:21:15,319 [26] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:21:15,322 [26] DEBUG [(null)] - Open Connection "61748984" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:21:15,334 [26] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:21:15,335 [26] DEBUG [(null)] - Close Connection "61748984" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:21:15,337 [26] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:21:15,339 [26] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],2], @param2=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:21:15,341 [26] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:21:15,342 [26] DEBUG [(null)] - Open Connection "19752878" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:21:15,375 [26] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:21:15,376 [26] DEBUG [(null)] - Close Connection "19752878" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:21:15,385 [26] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:21:15,388 [26] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/16 0:00:00], @param2=[bgrq,2017/1/16 23:59:59], @param3=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:21:15,389 [26] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:21:15,390 [26] DEBUG [(null)] - Open Connection "5580071" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:21:15,405 [26] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:21:15,407 [26] DEBUG [(null)] - Close Connection "5580071" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:21:15,408 [26] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:21:15,409 [26] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/16 0:00:00], @param2=[bgrq,2017/1/16 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:21:15,410 [26] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:21:15,411 [26] DEBUG [(null)] - Open Connection "4247968" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:21:15,424 [26] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:21:15,425 [26] DEBUG [(null)] - Close Connection "4247968" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:21:15,427 [26] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:21:15,428 [26] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:21:15,429 [26] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:21:15,430 [26] DEBUG [(null)] - Open Connection "60375341" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:21:15,451 [26] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:21:15,452 [26] DEBUG [(null)] - Close Connection "60375341" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:21:15,453 [26] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '08e9ed0b-db42-480d-ab10-47a788e65318','382952aa-ecb3-4708-95a0-c01754009101','2017/1/16 0:00:00','2017/1/16 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:21:15,455 [26] DEBUG [(null)] - Open Connection "4243566" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:21:15,466 [26] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:21:15,468 [26] DEBUG [(null)] - Close Connection "4243566" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:21:15,469 [26] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:21:15,470 [26] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:21:15,471 [26] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:21:15,473 [26] DEBUG [(null)] - Open Connection "59895601" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:21:15,529 [26] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:21:15,530 [26] DEBUG [(null)] - Close Connection "59895601" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:21:15,532 [26] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:21:15,533 [26] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:21:15,534 [26] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:21:15,535 [26] DEBUG [(null)] - Open Connection "19060808" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:21:15,572 [26] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:21:15,574 [26] DEBUG [(null)] - Close Connection "19060808" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:21:16,789 [26] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_cyuser],db.[id_masteruser],db.[id],db.[username],db.[password],db.[name],db.[companyname],db.[flag_sex],db.[id_father],db.[job],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[rq_start],db.[rq_stop],db.[flag_state],db.[flag_master],db.[bz],db.[id_province],db.[id_city],db.[id_county],db.[zipcode],db.[address],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[version],db.id_shop,db.flag_delete  from  [tb_user]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:21:16,794 [26] DEBUG [(null)] - Statement Id: [Tb_User.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:21:16,795 [26] DEBUG [(null)] - Statement Id: [Tb_User.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:21:16,796 [26] DEBUG [(null)] - Open Connection "25224641" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:21:16,840 [26] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:21:16,844 [26] DEBUG [(null)] - Close Connection "25224641" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:21:17,290 [26] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:21:17,292 [26] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:21:17,294 [26] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:21:17,295 [26] DEBUG [(null)] - Open Connection "13905996" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:21:17,310 [26] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:21:17,315 [26] DEBUG [(null)] - Close Connection "13905996" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:21:17,317 [26] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:21:17,320 [26] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:21:17,322 [26] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:21:17,325 [26] DEBUG [(null)] - Open Connection "39358608" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:21:17,340 [26] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:21:17,341 [26] DEBUG [(null)] - Close Connection "39358608" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:22:53,265 [8] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:22:53,267 [8] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:22:53,268 [8] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:22:53,271 [8] DEBUG [(null)] - Open Connection "53353328" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:22:53,291 [8] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:22:53,292 [8] DEBUG [(null)] - Close Connection "53353328" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:22:53,293 [8] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:22:53,296 [8] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],2], @param2=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:22:53,297 [8] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:22:53,298 [8] DEBUG [(null)] - Open Connection "27916103" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:22:53,324 [8] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:22:53,325 [8] DEBUG [(null)] - Close Connection "27916103" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:22:53,333 [8] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:22:53,334 [8] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/16 0:00:00], @param2=[bgrq,2017/1/16 23:59:59], @param3=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:22:53,336 [8] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:22:53,337 [8] DEBUG [(null)] - Open Connection "26262856" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:22:53,350 [8] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:22:53,352 [8] DEBUG [(null)] - Close Connection "26262856" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:22:53,354 [8] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:22:53,356 [8] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/16 0:00:00], @param2=[bgrq,2017/1/16 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:22:53,357 [8] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:22:53,358 [8] DEBUG [(null)] - Open Connection "32201584" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:22:53,378 [8] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:22:53,379 [8] DEBUG [(null)] - Close Connection "32201584" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:22:53,381 [8] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:22:53,382 [8] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:22:53,383 [8] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:22:53,384 [8] DEBUG [(null)] - Open Connection "50607924" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:22:53,396 [8] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:22:53,397 [8] DEBUG [(null)] - Close Connection "50607924" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:22:53,399 [8] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '08e9ed0b-db42-480d-ab10-47a788e65318','382952aa-ecb3-4708-95a0-c01754009101','2017/1/16 0:00:00','2017/1/16 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:22:53,400 [8] DEBUG [(null)] - Open Connection "60553862" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:22:53,416 [8] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:22:53,417 [8] DEBUG [(null)] - Close Connection "60553862" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:22:53,421 [8] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:22:53,424 [8] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:22:53,426 [8] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:22:53,428 [8] DEBUG [(null)] - Open Connection "25900394" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:22:53,490 [8] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:22:53,492 [8] DEBUG [(null)] - Close Connection "25900394" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:22:53,494 [8] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:22:53,496 [8] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:22:53,498 [8] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:22:53,500 [8] DEBUG [(null)] - Open Connection "18790487" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:22:53,530 [8] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:22:53,532 [8] DEBUG [(null)] - Close Connection "18790487" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:22:58,192 [26] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:22:58,200 [26] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:22:58,203 [26] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:22:58,232 [26] DEBUG [(null)] - Open Connection "33886584" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:22:58,251 [26] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:22:58,258 [26] DEBUG [(null)] - Close Connection "33886584" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:22:58,265 [26] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:22:58,272 [26] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:22:58,279 [26] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:22:58,280 [26] DEBUG [(null)] - Open Connection "2650234" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:22:58,303 [26] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:22:58,310 [26] DEBUG [(null)] - Close Connection "2650234" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:22:58,726 [8] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_cyuser],db.[id_masteruser],db.[id],db.[username],db.[password],db.[name],db.[companyname],db.[flag_sex],db.[id_father],db.[job],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[rq_start],db.[rq_stop],db.[flag_state],db.[flag_master],db.[bz],db.[id_province],db.[id_city],db.[id_county],db.[zipcode],db.[address],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[version],db.id_shop,db.flag_delete  from  [tb_user]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:22:58,735 [8] DEBUG [(null)] - Statement Id: [Tb_User.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:22:58,750 [8] DEBUG [(null)] - Statement Id: [Tb_User.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:22:58,764 [8] DEBUG [(null)] - Open Connection "26842319" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:22:58,791 [8] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:22:58,794 [8] DEBUG [(null)] - Close Connection "26842319" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:23:09,461 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [DataTools.RunProcedureOutQuery] based off of PreparedStatement: [p_rep_spxs_mx]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:23:09,463 [17] DEBUG [(null)] - Statement Id: [DataTools.RunProcedureOutQuery] Parameters: [@str=[str,08e9ed0b-db42-480d-ab10-47a788e65318|382952aa-ecb3-4708-95a0-c01754009101|1|25||2017-01-01|2017-01-31||], @outstr=[outstr,]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:23:09,465 [17] DEBUG [(null)] - Statement Id: [DataTools.RunProcedureOutQuery] Types: [@str=[String, System.String], @outstr=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:23:09,467 [17] DEBUG [(null)] - Open Connection "39889489" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:23:09,971 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:23:09,973 [17] DEBUG [(null)] - Close Connection "39889489" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:44,416 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:44,422 [17] DEBUG [(null)] - Close Connection "3998326" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:44,423 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:44,424 [17] DEBUG [(null)] - Close Connection "23442344" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:44,467 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:44,469 [17] DEBUG [(null)] - Close Connection "65667412" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:44,497 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:44,498 [17] DEBUG [(null)] - Close Connection "26689739" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:44,514 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:44,515 [17] DEBUG [(null)] - Close Connection "2193922" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:44,525 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:44,527 [17] DEBUG [(null)] - Close Connection "18971158" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:44,528 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:44,529 [17] DEBUG [(null)] - Close Connection "42717273" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:44,530 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:44,531 [17] DEBUG [(null)] - Close Connection "31353214" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:44,532 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:44,533 [17] DEBUG [(null)] - Close Connection "7083295" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:44,534 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:44,535 [17] DEBUG [(null)] - Close Connection "47318491" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:44,536 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:44,537 [17] DEBUG [(null)] - Close Connection "31697821" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:44,554 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:44,555 [17] DEBUG [(null)] - Close Connection "65888440" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:44,559 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:44,560 [17] DEBUG [(null)] - Close Connection "29827517" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:44,562 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:44,563 [17] DEBUG [(null)] - Close Connection "29925134" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:44,581 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:44,582 [17] DEBUG [(null)] - Close Connection "60023250" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:44,583 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:44,584 [17] DEBUG [(null)] - Close Connection "19621111" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:44,585 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:44,586 [17] DEBUG [(null)] - Close Connection "23055009" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:44,590 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:44,591 [17] DEBUG [(null)] - Close Connection "24235928" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:44,603 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:44,604 [17] DEBUG [(null)] - Close Connection "47089395" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:44,617 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:44,618 [17] DEBUG [(null)] - Close Connection "59360107" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:44,620 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:44,621 [17] DEBUG [(null)] - Close Connection "38320561" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:44,623 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:44,624 [17] DEBUG [(null)] - Close Connection "65109445" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:44,625 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:44,626 [17] DEBUG [(null)] - Close Connection "55369036" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:44,628 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:44,630 [17] DEBUG [(null)] - Close Connection "34332446" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:44,641 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:44,642 [17] DEBUG [(null)] - Close Connection "41865884" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:46,507 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Parm.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[parmcode],db.[parmname],db.[parmvalue],db.[nlast],db.[regex],db.[version],db.[parmdescribe],db.[sort_id],db.[flag_editstyle] from  [ts_parm]
      as db
       where  

          (
          db.[id_masteruser]='0'
           or  db.[id_masteruser]= @param0   
          )
         order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:46,512 [17] DEBUG [(null)] - Statement Id: [Ts_Parm.QueryList] Parameters: [@param0=[self_id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:46,514 [17] DEBUG [(null)] - Statement Id: [Ts_Parm.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:46,541 [17] DEBUG [(null)] - Open Connection "50464836" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:46,589 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:46,590 [17] DEBUG [(null)] - Close Connection "50464836" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:46,620 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User.GetItem] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select  db.[id_cyuser],db.[id_masteruser],db.[id],db.[username],db.[password],db.[name],isnull(master.companyname,db.[companyname])companyname,db.[flag_sex],db.[id_father],db.[job],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[rq_start],db.[rq_stop],db.[flag_state],db.[flag_master],db.[bz],db.[id_province],db.[id_city],db.[id_county],db.[zipcode],db.[address],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[version],db.flag_delete
      ,db.id_shop
      from  [tb_user]
      as db
      LEFT JOIN Tb_user master ON db.id_father=master.id
       where  db.[id]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:46,623 [17] DEBUG [(null)] - Statement Id: [Tb_User.GetItem] Parameters: [@param0=[id,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:46,626 [17] DEBUG [(null)] - Statement Id: [Tb_User.GetItem] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:46,628 [17] DEBUG [(null)] - Open Connection "49182266" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:46,658 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:46,659 [17] DEBUG [(null)] - Close Connection "49182266" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:46,661 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:46,662 [17] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:46,663 [17] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:46,664 [17] DEBUG [(null)] - Open Connection "33535689" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:46,679 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:46,680 [17] DEBUG [(null)] - Close Connection "33535689" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:46,685 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  
					db.[flag_type] in  (  @param0 ,   @param1 ) and db.[flag_stop]= @param2  and 
					exists(
					select 1 from Tb_function as fun
					where
					fun.flag_stop = 0
					 and 
						exists(select 1 from Tb_role_function as rf where rf.id_function = fun.id and rf.id_role in  (  @param3 ,   @param4 ) )
					 
					and (db.path+'/' like fun.path+'/%' or fun.path+'/' like db.path+'/%')
					)
				 order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:46,687 [17] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_typeList[0],controller], @param1=[flag_typeList[1],action], @param2=[flag_stop,0], @param3=[id_roleList[0],2], @param4=[id_roleList[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:46,688 [17] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[Int32, System.Int32], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:46,690 [17] DEBUG [(null)] - Open Connection "57421529" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:46,757 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:46,759 [17] DEBUG [(null)] - Close Connection "57421529" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:46,761 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param0 ,   @param1 ) )
         order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:46,762 [17] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[rolelist[0],2], @param1=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:46,763 [17] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:46,764 [17] DEBUG [(null)] - Open Connection "50020729" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:46,786 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:46,787 [17] DEBUG [(null)] - Close Connection "50020729" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:47,132 [19] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:47,133 [19] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:47,134 [19] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:47,135 [19] DEBUG [(null)] - Open Connection "27179311" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:47,152 [19] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:47,154 [19] DEBUG [(null)] - Close Connection "27179311" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:47,157 [19] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:47,158 [19] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:47,159 [19] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:47,160 [19] DEBUG [(null)] - Open Connection "15211822" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.MappedStatements.ReaderAutoMapper: 2017-01-16 16:24:47,176 [19] ERROR [(null)] - The column [id_shop] could not be auto mapped to a property on [CySoft.Model.Tb.Tb_Shop]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:47,181 [19] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:47,182 [19] DEBUG [(null)] - Close Connection "15211822" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:47,557 [8] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_cyuser],db.[id_masteruser],db.[id],db.[username],db.[password],db.[name],db.[companyname],db.[flag_sex],db.[id_father],db.[job],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[rq_start],db.[rq_stop],db.[flag_state],db.[flag_master],db.[bz],db.[id_province],db.[id_city],db.[id_county],db.[zipcode],db.[address],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[version],db.id_shop,db.flag_delete  from  [tb_user]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:47,572 [8] DEBUG [(null)] - Statement Id: [Tb_User.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:47,576 [8] DEBUG [(null)] - Statement Id: [Tb_User.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:47,578 [8] DEBUG [(null)] - Open Connection "57613479" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:47,601 [8] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:47,602 [8] DEBUG [(null)] - Close Connection "57613479" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:48,110 [19] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:48,112 [19] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:48,113 [19] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:48,114 [19] DEBUG [(null)] - Open Connection "397971" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:48,137 [19] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:48,139 [19] DEBUG [(null)] - Close Connection "397971" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:48,142 [19] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:48,143 [19] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],2], @param2=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:48,144 [19] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:48,145 [19] DEBUG [(null)] - Open Connection "32235676" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:48,175 [19] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:48,176 [19] DEBUG [(null)] - Close Connection "32235676" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:48,193 [19] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:48,194 [19] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/16 0:00:00], @param2=[bgrq,2017/1/16 23:59:59], @param3=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:48,195 [19] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:48,196 [19] DEBUG [(null)] - Open Connection "38241926" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:48,228 [19] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:48,229 [19] DEBUG [(null)] - Close Connection "38241926" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:48,232 [19] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:48,234 [19] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/16 0:00:00], @param2=[bgrq,2017/1/16 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:48,237 [19] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:48,242 [19] DEBUG [(null)] - Open Connection "10588270" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:48,259 [19] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:48,260 [19] DEBUG [(null)] - Close Connection "10588270" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:48,262 [19] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:48,263 [19] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:48,264 [19] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:48,265 [19] DEBUG [(null)] - Open Connection "52343572" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:48,279 [19] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:48,282 [19] DEBUG [(null)] - Close Connection "52343572" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:48,286 [19] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '08e9ed0b-db42-480d-ab10-47a788e65318','382952aa-ecb3-4708-95a0-c01754009101','2017/1/16 0:00:00','2017/1/16 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:48,289 [19] DEBUG [(null)] - Open Connection "11970972" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:48,306 [19] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:48,307 [19] DEBUG [(null)] - Close Connection "11970972" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:48,310 [19] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:48,312 [19] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:48,313 [19] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:48,314 [19] DEBUG [(null)] - Open Connection "30124648" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:48,366 [19] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:48,368 [19] DEBUG [(null)] - Close Connection "30124648" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:48,374 [19] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:48,376 [19] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:48,378 [19] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:48,380 [19] DEBUG [(null)] - Open Connection "12215457" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:48,415 [19] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:48,416 [19] DEBUG [(null)] - Close Connection "12215457" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:49,728 [8] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:49,730 [8] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:49,733 [8] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:49,735 [8] DEBUG [(null)] - Open Connection "62287863" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:49,774 [8] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:49,776 [8] DEBUG [(null)] - Close Connection "62287863" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:49,779 [8] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:49,782 [8] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:49,783 [8] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:49,785 [8] DEBUG [(null)] - Open Connection "22949586" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:49,801 [8] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:49,802 [8] DEBUG [(null)] - Close Connection "22949586" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:50,231 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_cyuser],db.[id_masteruser],db.[id],db.[username],db.[password],db.[name],db.[companyname],db.[flag_sex],db.[id_father],db.[job],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[rq_start],db.[rq_stop],db.[flag_state],db.[flag_master],db.[bz],db.[id_province],db.[id_city],db.[id_county],db.[zipcode],db.[address],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[version],db.id_shop,db.flag_delete  from  [tb_user]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:50,233 [15] DEBUG [(null)] - Statement Id: [Tb_User.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:24:50,235 [15] DEBUG [(null)] - Statement Id: [Tb_User.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:50,237 [15] DEBUG [(null)] - Open Connection "46681097" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:50,278 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:24:50,280 [15] DEBUG [(null)] - Close Connection "46681097" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:18,712 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:18,716 [17] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:18,718 [17] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:18,720 [17] DEBUG [(null)] - Open Connection "35656687" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:18,737 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:18,738 [17] DEBUG [(null)] - Close Connection "35656687" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:18,740 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:18,741 [17] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],2], @param2=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:18,742 [17] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:18,743 [17] DEBUG [(null)] - Open Connection "52801387" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:18,776 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:18,777 [17] DEBUG [(null)] - Close Connection "52801387" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:18,785 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:18,786 [17] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/16 0:00:00], @param2=[bgrq,2017/1/16 23:59:59], @param3=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:18,787 [17] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:18,788 [17] DEBUG [(null)] - Open Connection "29296036" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:18,801 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:18,802 [17] DEBUG [(null)] - Close Connection "29296036" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:18,803 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:18,804 [17] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/16 0:00:00], @param2=[bgrq,2017/1/16 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:18,805 [17] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:18,807 [17] DEBUG [(null)] - Open Connection "58235850" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:18,827 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:18,830 [17] DEBUG [(null)] - Close Connection "58235850" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:18,831 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:18,832 [17] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:18,833 [17] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:18,834 [17] DEBUG [(null)] - Open Connection "23358680" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:18,844 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:18,847 [17] DEBUG [(null)] - Close Connection "23358680" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:18,851 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '08e9ed0b-db42-480d-ab10-47a788e65318','382952aa-ecb3-4708-95a0-c01754009101','2017/1/16 0:00:00','2017/1/16 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:18,854 [17] DEBUG [(null)] - Open Connection "27462094" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:18,875 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:18,876 [17] DEBUG [(null)] - Close Connection "27462094" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:18,877 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:18,878 [17] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:18,879 [17] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:18,880 [17] DEBUG [(null)] - Open Connection "58575861" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:18,923 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:18,925 [17] DEBUG [(null)] - Close Connection "58575861" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:18,927 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:18,930 [17] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:18,933 [17] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:18,936 [17] DEBUG [(null)] - Open Connection "48179487" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:18,968 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:18,969 [17] DEBUG [(null)] - Close Connection "48179487" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:23,550 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:23,556 [17] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:23,583 [17] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:23,608 [17] DEBUG [(null)] - Open Connection "30261151" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:23,670 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:23,675 [17] DEBUG [(null)] - Close Connection "30261151" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:23,680 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:23,694 [17] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:23,699 [17] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:23,703 [17] DEBUG [(null)] - Open Connection "61580434" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:23,734 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:23,737 [17] DEBUG [(null)] - Close Connection "61580434" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:41,514 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:41,515 [17] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:41,516 [17] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:41,517 [17] DEBUG [(null)] - Open Connection "66534581" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:41,529 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:41,530 [17] DEBUG [(null)] - Close Connection "66534581" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:41,531 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:41,532 [17] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],2], @param2=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:41,534 [17] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:41,534 [17] DEBUG [(null)] - Open Connection "25186238" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:41,565 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:41,566 [17] DEBUG [(null)] - Close Connection "25186238" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:41,574 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:41,576 [17] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/16 0:00:00], @param2=[bgrq,2017/1/16 23:59:59], @param3=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:41,576 [17] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:41,577 [17] DEBUG [(null)] - Open Connection "26656052" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:41,589 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:41,591 [17] DEBUG [(null)] - Close Connection "26656052" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:41,592 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:41,593 [17] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/16 0:00:00], @param2=[bgrq,2017/1/16 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:41,594 [17] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:41,594 [17] DEBUG [(null)] - Open Connection "66843666" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:41,615 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:41,616 [17] DEBUG [(null)] - Close Connection "66843666" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:41,617 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:41,618 [17] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:41,619 [17] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:41,620 [17] DEBUG [(null)] - Open Connection "47749464" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:41,634 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:41,635 [17] DEBUG [(null)] - Close Connection "47749464" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:41,636 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '08e9ed0b-db42-480d-ab10-47a788e65318','382952aa-ecb3-4708-95a0-c01754009101','2017/1/16 0:00:00','2017/1/16 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:41,638 [17] DEBUG [(null)] - Open Connection "63158863" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:41,659 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:41,660 [17] DEBUG [(null)] - Close Connection "63158863" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:41,661 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:41,662 [17] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:41,663 [17] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:41,664 [17] DEBUG [(null)] - Open Connection "47194313" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:41,708 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:41,709 [17] DEBUG [(null)] - Close Connection "47194313" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:41,710 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:41,711 [17] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:41,712 [17] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:41,715 [17] DEBUG [(null)] - Open Connection "22632797" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:41,745 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:41,746 [17] DEBUG [(null)] - Close Connection "22632797" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:45,819 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:45,824 [15] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:45,831 [15] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:45,836 [15] DEBUG [(null)] - Open Connection "62166721" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:45,865 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:45,913 [15] DEBUG [(null)] - Close Connection "62166721" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:45,921 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:45,925 [15] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:25:45,926 [15] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:45,928 [15] DEBUG [(null)] - Open Connection "14305033" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:45,952 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:25:45,953 [15] DEBUG [(null)] - Close Connection "14305033" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:26:23,092 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:26:23,094 [17] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:26:23,095 [17] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:26:23,096 [17] DEBUG [(null)] - Open Connection "25505009" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:26:23,117 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:26:23,118 [17] DEBUG [(null)] - Close Connection "25505009" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:26:23,121 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:26:23,123 [17] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],2], @param2=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:26:23,124 [17] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:26:23,125 [17] DEBUG [(null)] - Open Connection "49926382" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:26:23,153 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:26:23,154 [17] DEBUG [(null)] - Close Connection "49926382" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:26:23,161 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:26:23,162 [17] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/16 0:00:00], @param2=[bgrq,2017/1/16 23:59:59], @param3=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:26:23,163 [17] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:26:23,164 [17] DEBUG [(null)] - Open Connection "20747275" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:26:23,180 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:26:23,181 [17] DEBUG [(null)] - Close Connection "20747275" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:26:23,182 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:26:23,184 [17] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/16 0:00:00], @param2=[bgrq,2017/1/16 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:26:23,186 [17] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:26:23,187 [17] DEBUG [(null)] - Open Connection "38156113" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:26:23,212 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:26:23,213 [17] DEBUG [(null)] - Close Connection "38156113" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:26:23,214 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:26:23,215 [17] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:26:23,216 [17] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:26:23,221 [17] DEBUG [(null)] - Open Connection "33932882" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:26:23,236 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:26:23,238 [17] DEBUG [(null)] - Close Connection "33932882" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:26:23,240 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '08e9ed0b-db42-480d-ab10-47a788e65318','382952aa-ecb3-4708-95a0-c01754009101','2017/1/16 0:00:00','2017/1/16 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:26:23,242 [17] DEBUG [(null)] - Open Connection "61181285" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:26:23,262 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:26:23,263 [17] DEBUG [(null)] - Close Connection "61181285" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:26:23,264 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:26:23,265 [17] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:26:23,274 [17] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:26:23,276 [17] DEBUG [(null)] - Open Connection "37048812" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:26:23,342 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:26:23,343 [17] DEBUG [(null)] - Close Connection "37048812" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:26:23,347 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:26:23,361 [17] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:26:23,363 [17] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:26:23,364 [17] DEBUG [(null)] - Open Connection "20208785" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:26:23,389 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:26:23,390 [17] DEBUG [(null)] - Close Connection "20208785" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:26:26,777 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:26:26,794 [15] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:26:26,805 [15] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:26:26,862 [15] DEBUG [(null)] - Open Connection "36725152" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:26:26,880 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:26:26,881 [15] DEBUG [(null)] - Close Connection "36725152" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:26:26,882 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:26:26,883 [15] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:26:26,906 [15] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:26:26,907 [15] DEBUG [(null)] - Open Connection "38324691" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:26:26,924 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:26:26,925 [15] DEBUG [(null)] - Close Connection "38324691" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:42,978 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:42,991 [3] DEBUG [(null)] - Close Connection "32962410" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:42,992 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:42,993 [3] DEBUG [(null)] - Close Connection "23490060" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:43,011 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:43,012 [3] DEBUG [(null)] - Close Connection "24398199" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:43,029 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:43,030 [3] DEBUG [(null)] - Close Connection "25972897" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:43,031 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:43,032 [3] DEBUG [(null)] - Close Connection "38886067" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:43,040 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:43,041 [3] DEBUG [(null)] - Close Connection "2675960" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:43,042 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:43,043 [3] DEBUG [(null)] - Close Connection "45491324" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:43,044 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:43,045 [3] DEBUG [(null)] - Close Connection "35155004" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:43,046 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:43,047 [3] DEBUG [(null)] - Close Connection "60764156" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:43,048 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:43,048 [3] DEBUG [(null)] - Close Connection "26357696" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:43,049 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:43,050 [3] DEBUG [(null)] - Close Connection "45427661" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:43,070 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:43,071 [3] DEBUG [(null)] - Close Connection "45247916" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:43,073 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:43,074 [3] DEBUG [(null)] - Close Connection "38457352" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:43,077 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:43,078 [3] DEBUG [(null)] - Close Connection "49795221" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:43,103 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:43,104 [3] DEBUG [(null)] - Close Connection "48036894" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:43,105 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:43,105 [3] DEBUG [(null)] - Close Connection "11320832" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:43,106 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:43,107 [3] DEBUG [(null)] - Close Connection "58236422" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:43,112 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:43,113 [3] DEBUG [(null)] - Close Connection "57384839" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:43,127 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:43,128 [3] DEBUG [(null)] - Close Connection "14300478" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:43,142 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:43,143 [3] DEBUG [(null)] - Close Connection "31002565" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:43,144 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:43,145 [3] DEBUG [(null)] - Close Connection "57281558" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:43,146 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:43,147 [3] DEBUG [(null)] - Close Connection "45589971" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:43,148 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:43,148 [3] DEBUG [(null)] - Close Connection "36832005" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:43,149 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:43,150 [3] DEBUG [(null)] - Close Connection "30146526" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:43,157 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:43,158 [3] DEBUG [(null)] - Close Connection "44510687" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:27:44,895 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:27:44,899 [3] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:27:44,900 [3] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:44,927 [3] DEBUG [(null)] - Open Connection "50811453" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:44,996 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:44,997 [3] DEBUG [(null)] - Close Connection "50811453" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:27:45,004 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:27:45,010 [3] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],2], @param2=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:27:45,013 [3] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:45,015 [3] DEBUG [(null)] - Open Connection "58804375" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:45,046 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:45,047 [3] DEBUG [(null)] - Close Connection "58804375" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:27:45,077 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:27:45,079 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/16 0:00:00], @param2=[bgrq,2017/1/16 23:59:59], @param3=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:27:45,080 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:45,081 [3] DEBUG [(null)] - Open Connection "15922000" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:45,104 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:45,105 [3] DEBUG [(null)] - Close Connection "15922000" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:27:45,106 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:27:45,107 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/16 0:00:00], @param2=[bgrq,2017/1/16 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:27:45,108 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:45,110 [3] DEBUG [(null)] - Open Connection "2238544" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:45,122 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:45,123 [3] DEBUG [(null)] - Close Connection "2238544" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:27:45,125 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:27:45,126 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:27:45,127 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:45,128 [3] DEBUG [(null)] - Open Connection "38055257" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:45,141 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:45,142 [3] DEBUG [(null)] - Close Connection "38055257" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:27:45,144 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '08e9ed0b-db42-480d-ab10-47a788e65318','382952aa-ecb3-4708-95a0-c01754009101','2017/1/16 0:00:00','2017/1/16 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:45,145 [3] DEBUG [(null)] - Open Connection "42959598" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:45,164 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:45,165 [3] DEBUG [(null)] - Close Connection "42959598" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:27:45,166 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:27:45,167 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:27:45,168 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:45,170 [3] DEBUG [(null)] - Open Connection "59224531" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:45,219 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:45,220 [3] DEBUG [(null)] - Close Connection "59224531" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:27:45,223 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:27:45,224 [3] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:27:45,225 [3] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:45,226 [3] DEBUG [(null)] - Open Connection "3129310" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:45,245 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:45,246 [3] DEBUG [(null)] - Close Connection "3129310" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:27:45,684 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User.GetItem] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select  db.[id_cyuser],db.[id_masteruser],db.[id],db.[username],db.[password],db.[name],isnull(master.companyname,db.[companyname])companyname,db.[flag_sex],db.[id_father],db.[job],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[rq_start],db.[rq_stop],db.[flag_state],db.[flag_master],db.[bz],db.[id_province],db.[id_city],db.[id_county],db.[zipcode],db.[address],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[version],db.flag_delete
      ,db.id_shop
      from  [tb_user]
      as db
      LEFT JOIN Tb_user master ON db.id_father=master.id
       where  db.[id]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:27:45,686 [3] DEBUG [(null)] - Statement Id: [Tb_User.GetItem] Parameters: [@param0=[id,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:27:45,687 [3] DEBUG [(null)] - Statement Id: [Tb_User.GetItem] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:45,688 [3] DEBUG [(null)] - Open Connection "63157068" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:45,709 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:45,710 [3] DEBUG [(null)] - Close Connection "63157068" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:27:45,711 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:27:45,712 [3] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:27:45,712 [3] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:45,713 [3] DEBUG [(null)] - Open Connection "67037204" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:45,730 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:45,731 [3] DEBUG [(null)] - Close Connection "67037204" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:27:45,732 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  
					db.[flag_type] in  (  @param0 ,   @param1 ) and db.[flag_stop]= @param2  and 
					exists(
					select 1 from Tb_function as fun
					where
					fun.flag_stop = 0
					 and 
						exists(select 1 from Tb_role_function as rf where rf.id_function = fun.id and rf.id_role in  (  @param3 ,   @param4 ) )
					 
					and (db.path+'/' like fun.path+'/%' or fun.path+'/' like db.path+'/%')
					)
				 order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:27:45,733 [3] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_typeList[0],controller], @param1=[flag_typeList[1],action], @param2=[flag_stop,0], @param3=[id_roleList[0],2], @param4=[id_roleList[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:27:45,734 [3] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[Int32, System.Int32], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:45,734 [3] DEBUG [(null)] - Open Connection "50588837" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:45,803 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:45,805 [3] DEBUG [(null)] - Close Connection "50588837" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:27:45,810 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param0 ,   @param1 ) )
         order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:27:45,814 [3] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[rolelist[0],2], @param1=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:27:45,816 [3] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:45,818 [3] DEBUG [(null)] - Open Connection "54703861" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:45,850 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:45,851 [3] DEBUG [(null)] - Close Connection "54703861" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:27:49,013 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Parm.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[parmcode],db.[parmname],db.[parmvalue],db.[nlast],db.[regex],db.[version],db.[parmdescribe],db.[sort_id],db.[flag_editstyle] from  [ts_parm]
      as db
       where  

          (
          db.[id_masteruser]='0'
           or  db.[id_masteruser]= @param0   
          )
         order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:27:49,014 [3] DEBUG [(null)] - Statement Id: [Ts_Parm.QueryList] Parameters: [@param0=[self_id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:27:49,015 [3] DEBUG [(null)] - Statement Id: [Ts_Parm.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:49,016 [3] DEBUG [(null)] - Open Connection "5457404" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:49,087 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:49,088 [3] DEBUG [(null)] - Close Connection "5457404" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:27:50,829 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:27:50,838 [7] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:27:50,842 [7] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:50,844 [7] DEBUG [(null)] - Open Connection "59065314" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:50,956 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:50,957 [7] DEBUG [(null)] - Close Connection "59065314" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:27:50,959 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:27:50,960 [7] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:27:50,961 [7] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:50,962 [7] DEBUG [(null)] - Open Connection "31836153" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.MappedStatements.ReaderAutoMapper: 2017-01-16 16:27:51,315 [7] ERROR [(null)] - The column [id_shop] could not be auto mapped to a property on [CySoft.Model.Tb.Tb_Shop]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:51,320 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:27:51,321 [7] DEBUG [(null)] - Close Connection "31836153" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:29:10,078 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:29:10,079 [6] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:29:10,080 [6] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:29:10,081 [6] DEBUG [(null)] - Open Connection "7633937" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:29:10,093 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:29:10,094 [6] DEBUG [(null)] - Close Connection "7633937" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:29:10,096 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:29:10,097 [6] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],2], @param2=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:29:10,098 [6] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:29:10,099 [6] DEBUG [(null)] - Open Connection "20057599" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:29:10,124 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:29:10,125 [6] DEBUG [(null)] - Close Connection "20057599" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:29:10,132 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:29:10,133 [6] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/16 0:00:00], @param2=[bgrq,2017/1/16 23:59:59], @param3=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:29:10,134 [6] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:29:10,138 [6] DEBUG [(null)] - Open Connection "44799463" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:29:10,159 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:29:10,160 [6] DEBUG [(null)] - Close Connection "44799463" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:29:10,161 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:29:10,162 [6] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/16 0:00:00], @param2=[bgrq,2017/1/16 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:29:10,163 [6] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:29:10,164 [6] DEBUG [(null)] - Open Connection "24116013" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:29:10,176 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:29:10,177 [6] DEBUG [(null)] - Close Connection "24116013" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:29:10,178 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:29:10,179 [6] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:29:10,180 [6] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:29:10,180 [6] DEBUG [(null)] - Open Connection "28275758" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:29:10,195 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:29:10,196 [6] DEBUG [(null)] - Close Connection "28275758" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:29:10,197 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '08e9ed0b-db42-480d-ab10-47a788e65318','382952aa-ecb3-4708-95a0-c01754009101','2017/1/16 0:00:00','2017/1/16 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:29:10,198 [6] DEBUG [(null)] - Open Connection "14690623" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:29:10,218 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:29:10,220 [6] DEBUG [(null)] - Close Connection "14690623" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:29:10,222 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:29:10,223 [6] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:29:10,224 [6] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:29:10,225 [6] DEBUG [(null)] - Open Connection "23374885" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:29:10,268 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:29:10,272 [6] DEBUG [(null)] - Close Connection "23374885" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:29:10,274 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:29:10,275 [6] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:29:10,276 [6] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:29:10,277 [6] DEBUG [(null)] - Open Connection "6783033" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:29:10,295 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:29:10,297 [6] DEBUG [(null)] - Close Connection "6783033" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:29:57,422 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:29:57,423 [7] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:29:57,430 [7] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:29:57,435 [7] DEBUG [(null)] - Open Connection "37242987" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:29:57,455 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:29:57,462 [7] DEBUG [(null)] - Close Connection "37242987" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:29:57,465 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:29:57,468 [7] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:29:57,478 [7] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:29:57,479 [7] DEBUG [(null)] - Open Connection "21059020" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:29:57,504 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:29:57,507 [7] DEBUG [(null)] - Close Connection "21059020" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:30:37,895 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:30:37,896 [7] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:30:37,898 [7] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:30:37,901 [7] DEBUG [(null)] - Open Connection "37145647" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:30:37,913 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:30:37,915 [7] DEBUG [(null)] - Close Connection "37145647" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:30:37,917 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:30:37,919 [7] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],2], @param2=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:30:37,920 [7] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:30:37,920 [7] DEBUG [(null)] - Open Connection "17846822" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:30:37,951 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:30:37,952 [7] DEBUG [(null)] - Close Connection "17846822" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:30:37,960 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:30:37,961 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/16 0:00:00], @param2=[bgrq,2017/1/16 23:59:59], @param3=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:30:37,961 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:30:37,962 [7] DEBUG [(null)] - Open Connection "52074238" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:30:37,982 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:30:37,983 [7] DEBUG [(null)] - Close Connection "52074238" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:30:37,984 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:30:37,985 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/16 0:00:00], @param2=[bgrq,2017/1/16 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:30:37,986 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:30:37,987 [7] DEBUG [(null)] - Open Connection "40728262" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:30:37,999 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:30:38,000 [7] DEBUG [(null)] - Close Connection "40728262" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:30:38,001 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:30:38,002 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:30:38,004 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:30:38,005 [7] DEBUG [(null)] - Open Connection "1855374" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:30:38,020 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:30:38,021 [7] DEBUG [(null)] - Close Connection "1855374" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:30:38,022 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '08e9ed0b-db42-480d-ab10-47a788e65318','382952aa-ecb3-4708-95a0-c01754009101','2017/1/16 0:00:00','2017/1/16 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:30:38,023 [7] DEBUG [(null)] - Open Connection "61227367" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:30:38,041 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:30:38,043 [7] DEBUG [(null)] - Close Connection "61227367" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:30:38,044 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:30:38,047 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:30:38,049 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:30:38,049 [7] DEBUG [(null)] - Open Connection "7237217" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:30:38,101 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:30:38,102 [7] DEBUG [(null)] - Close Connection "7237217" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:30:38,103 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:30:38,105 [7] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:30:38,106 [7] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:30:38,106 [7] DEBUG [(null)] - Open Connection "37501579" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:30:38,133 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:30:38,137 [7] DEBUG [(null)] - Close Connection "37501579" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:30:42,194 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:30:42,195 [6] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:30:42,196 [6] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:30:42,203 [6] DEBUG [(null)] - Open Connection "9653232" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:30:42,223 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:30:42,241 [6] DEBUG [(null)] - Close Connection "9653232" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:30:42,246 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:30:42,251 [6] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:30:42,252 [6] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:30:42,254 [6] DEBUG [(null)] - Open Connection "11508278" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:30:42,306 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:30:42,310 [6] DEBUG [(null)] - Close Connection "11508278" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:32:20,274 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:32:20,277 [11] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:32:20,281 [11] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:32:20,283 [11] DEBUG [(null)] - Open Connection "11963510" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:32:20,307 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:32:20,309 [11] DEBUG [(null)] - Close Connection "11963510" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:32:20,310 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:32:20,317 [11] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],2], @param2=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:32:20,318 [11] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:32:20,320 [11] DEBUG [(null)] - Open Connection "49341109" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:32:20,360 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:32:20,363 [11] DEBUG [(null)] - Close Connection "49341109" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:32:20,376 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:32:20,377 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/16 0:00:00], @param2=[bgrq,2017/1/16 23:59:59], @param3=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:32:20,378 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:32:20,381 [11] DEBUG [(null)] - Open Connection "1795256" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:32:20,401 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:32:20,403 [11] DEBUG [(null)] - Close Connection "1795256" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:32:20,405 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:32:20,408 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/16 0:00:00], @param2=[bgrq,2017/1/16 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:32:20,409 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:32:20,410 [11] DEBUG [(null)] - Open Connection "20858725" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:32:20,423 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:32:20,424 [11] DEBUG [(null)] - Close Connection "20858725" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:32:20,425 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:32:20,427 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:32:20,444 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:32:20,450 [11] DEBUG [(null)] - Open Connection "15444574" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:32:20,487 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:32:20,488 [11] DEBUG [(null)] - Close Connection "15444574" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:32:20,489 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '08e9ed0b-db42-480d-ab10-47a788e65318','382952aa-ecb3-4708-95a0-c01754009101','2017/1/16 0:00:00','2017/1/16 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:32:20,492 [11] DEBUG [(null)] - Open Connection "18586631" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:32:20,528 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:32:20,539 [11] DEBUG [(null)] - Close Connection "18586631" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:32:20,554 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:32:20,562 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:32:20,567 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:32:20,587 [11] DEBUG [(null)] - Open Connection "38329734" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:32:20,642 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:32:20,643 [11] DEBUG [(null)] - Close Connection "38329734" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:32:20,644 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:32:20,645 [11] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:32:20,647 [11] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:32:20,648 [11] DEBUG [(null)] - Open Connection "66217661" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:32:20,670 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:32:20,671 [11] DEBUG [(null)] - Close Connection "66217661" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:32:25,489 [10] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:32:25,490 [10] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:32:25,491 [10] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:32:25,493 [10] DEBUG [(null)] - Open Connection "7588182" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:32:25,523 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:32:25,529 [10] DEBUG [(null)] - Close Connection "7588182" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:32:25,541 [10] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:32:25,543 [10] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:32:25,544 [10] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:32:25,545 [10] DEBUG [(null)] - Open Connection "5923895" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:32:25,576 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:32:25,618 [10] DEBUG [(null)] - Close Connection "5923895" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:08,140 [10] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:08,141 [10] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:08,142 [10] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:08,143 [10] DEBUG [(null)] - Open Connection "53439288" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:08,163 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:08,165 [10] DEBUG [(null)] - Close Connection "53439288" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:08,168 [10] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:08,169 [10] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],2], @param2=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:08,170 [10] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:08,171 [10] DEBUG [(null)] - Open Connection "55957744" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:08,196 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:08,198 [10] DEBUG [(null)] - Close Connection "55957744" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:08,206 [10] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:08,207 [10] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/16 0:00:00], @param2=[bgrq,2017/1/16 23:59:59], @param3=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:08,208 [10] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:08,209 [10] DEBUG [(null)] - Open Connection "35070540" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:08,222 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:08,223 [10] DEBUG [(null)] - Close Connection "35070540" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:08,224 [10] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:08,225 [10] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/16 0:00:00], @param2=[bgrq,2017/1/16 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:08,226 [10] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:08,226 [10] DEBUG [(null)] - Open Connection "34670434" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:08,246 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:08,248 [10] DEBUG [(null)] - Close Connection "34670434" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:08,249 [10] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:08,250 [10] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:08,251 [10] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:08,252 [10] DEBUG [(null)] - Open Connection "16665673" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:08,263 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:08,264 [10] DEBUG [(null)] - Close Connection "16665673" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:08,265 [10] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '08e9ed0b-db42-480d-ab10-47a788e65318','382952aa-ecb3-4708-95a0-c01754009101','2017/1/16 0:00:00','2017/1/16 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:08,267 [10] DEBUG [(null)] - Open Connection "11757802" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:08,278 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:08,280 [10] DEBUG [(null)] - Close Connection "11757802" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:08,282 [10] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:08,283 [10] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:08,284 [10] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:08,286 [10] DEBUG [(null)] - Open Connection "59339078" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:08,341 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:08,342 [10] DEBUG [(null)] - Close Connection "59339078" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:08,343 [10] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:08,345 [10] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:08,346 [10] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:08,348 [10] DEBUG [(null)] - Open Connection "53012840" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:08,369 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:08,370 [10] DEBUG [(null)] - Close Connection "53012840" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:12,474 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:12,475 [15] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:12,477 [15] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:12,478 [15] DEBUG [(null)] - Open Connection "6657978" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:12,517 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:12,542 [15] DEBUG [(null)] - Close Connection "6657978" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:12,552 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:12,567 [15] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:12,569 [15] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:12,570 [15] DEBUG [(null)] - Open Connection "30115406" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:12,587 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:12,588 [15] DEBUG [(null)] - Close Connection "30115406" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:44,444 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:44,445 [13] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:44,447 [13] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:44,450 [13] DEBUG [(null)] - Open Connection "43856670" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:44,466 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:44,468 [13] DEBUG [(null)] - Close Connection "43856670" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:44,471 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:44,473 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],2], @param2=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:44,479 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:44,481 [13] DEBUG [(null)] - Open Connection "16802227" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:44,510 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:44,515 [13] DEBUG [(null)] - Close Connection "16802227" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:44,530 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:44,531 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/16 0:00:00], @param2=[bgrq,2017/1/16 23:59:59], @param3=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:44,532 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:44,533 [13] DEBUG [(null)] - Open Connection "18202863" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:44,567 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:44,568 [13] DEBUG [(null)] - Close Connection "18202863" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:44,569 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:44,570 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/16 0:00:00], @param2=[bgrq,2017/1/16 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:44,571 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:44,573 [13] DEBUG [(null)] - Open Connection "30930259" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:44,591 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:44,593 [13] DEBUG [(null)] - Close Connection "30930259" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:44,595 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:44,596 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:44,597 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:44,598 [13] DEBUG [(null)] - Open Connection "18194328" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:44,612 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:44,613 [13] DEBUG [(null)] - Close Connection "18194328" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:44,614 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '08e9ed0b-db42-480d-ab10-47a788e65318','382952aa-ecb3-4708-95a0-c01754009101','2017/1/16 0:00:00','2017/1/16 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:44,615 [13] DEBUG [(null)] - Open Connection "30443759" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:44,636 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:44,637 [13] DEBUG [(null)] - Close Connection "30443759" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:44,638 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:44,639 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:44,640 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:44,643 [13] DEBUG [(null)] - Open Connection "57572672" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:44,688 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:44,689 [13] DEBUG [(null)] - Close Connection "57572672" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:44,690 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:44,692 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:44,694 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:44,695 [13] DEBUG [(null)] - Open Connection "60416878" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:44,726 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:44,727 [13] DEBUG [(null)] - Close Connection "60416878" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:48,223 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:48,227 [15] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:48,230 [15] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:48,233 [15] DEBUG [(null)] - Open Connection "57548194" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:48,252 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:48,255 [15] DEBUG [(null)] - Close Connection "57548194" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:48,257 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:48,258 [15] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:34:48,263 [15] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:48,267 [15] DEBUG [(null)] - Open Connection "49645151" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:48,298 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:34:48,299 [15] DEBUG [(null)] - Close Connection "49645151" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:35:58,434 [16] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:35:58,436 [16] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:35:58,438 [16] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:35:58,440 [16] DEBUG [(null)] - Open Connection "21400063" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:35:58,459 [16] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:35:58,460 [16] DEBUG [(null)] - Close Connection "21400063" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:35:58,461 [16] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:35:58,463 [16] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],2], @param2=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:35:58,464 [16] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:35:58,468 [16] DEBUG [(null)] - Open Connection "209370" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:35:58,495 [16] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:35:58,496 [16] DEBUG [(null)] - Close Connection "209370" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:35:58,506 [16] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:35:58,507 [16] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/16 0:00:00], @param2=[bgrq,2017/1/16 23:59:59], @param3=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:35:58,508 [16] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:35:58,509 [16] DEBUG [(null)] - Open Connection "14446549" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:35:58,530 [16] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:35:58,534 [16] DEBUG [(null)] - Close Connection "14446549" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:35:58,536 [16] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:35:58,537 [16] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/16 0:00:00], @param2=[bgrq,2017/1/16 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:35:58,539 [16] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:35:58,540 [16] DEBUG [(null)] - Open Connection "57287814" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:35:58,555 [16] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:35:58,556 [16] DEBUG [(null)] - Close Connection "57287814" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:35:58,557 [16] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:35:58,558 [16] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:35:58,559 [16] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:35:58,560 [16] DEBUG [(null)] - Open Connection "60545062" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:35:58,577 [16] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:35:58,578 [16] DEBUG [(null)] - Close Connection "60545062" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:35:58,579 [16] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '08e9ed0b-db42-480d-ab10-47a788e65318','382952aa-ecb3-4708-95a0-c01754009101','2017/1/16 0:00:00','2017/1/16 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:35:58,580 [16] DEBUG [(null)] - Open Connection "16859754" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:35:58,603 [16] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:35:58,604 [16] DEBUG [(null)] - Close Connection "16859754" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:35:58,605 [16] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:35:58,607 [16] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:35:58,608 [16] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:35:58,609 [16] DEBUG [(null)] - Open Connection "22472353" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:35:58,655 [16] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:35:58,656 [16] DEBUG [(null)] - Close Connection "22472353" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:35:58,658 [16] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:35:58,659 [16] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:35:58,660 [16] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:35:58,661 [16] DEBUG [(null)] - Open Connection "7088492" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:35:58,684 [16] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:35:58,685 [16] DEBUG [(null)] - Close Connection "7088492" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:36:01,669 [8] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:36:01,675 [8] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:36:01,691 [8] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:36:01,707 [8] DEBUG [(null)] - Open Connection "1415739" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:36:01,734 [8] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:36:01,759 [8] DEBUG [(null)] - Close Connection "1415739" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:36:01,769 [8] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:36:01,788 [8] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:36:01,794 [8] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:36:01,805 [8] DEBUG [(null)] - Open Connection "52382366" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:36:01,845 [8] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:36:01,857 [8] DEBUG [(null)] - Close Connection "52382366" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:16,259 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:16,261 [11] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:16,262 [11] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:16,264 [11] DEBUG [(null)] - Open Connection "50428212" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:16,277 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:16,278 [11] DEBUG [(null)] - Close Connection "50428212" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:16,279 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:16,280 [11] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],2], @param2=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:16,281 [11] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:16,282 [11] DEBUG [(null)] - Open Connection "55063296" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:16,315 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:16,316 [11] DEBUG [(null)] - Close Connection "55063296" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:16,329 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:16,330 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/16 0:00:00], @param2=[bgrq,2017/1/16 23:59:59], @param3=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:16,331 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:16,332 [11] DEBUG [(null)] - Open Connection "13746957" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:16,358 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:16,360 [11] DEBUG [(null)] - Close Connection "13746957" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:16,362 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:16,363 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/16 0:00:00], @param2=[bgrq,2017/1/16 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:16,365 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:16,366 [11] DEBUG [(null)] - Open Connection "2512254" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:16,386 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:16,388 [11] DEBUG [(null)] - Close Connection "2512254" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:16,390 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:16,391 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:16,392 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:16,393 [11] DEBUG [(null)] - Open Connection "55991608" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:16,404 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:16,407 [11] DEBUG [(null)] - Close Connection "55991608" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:16,408 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '08e9ed0b-db42-480d-ab10-47a788e65318','382952aa-ecb3-4708-95a0-c01754009101','2017/1/16 0:00:00','2017/1/16 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:16,409 [11] DEBUG [(null)] - Open Connection "59234271" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:16,421 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:16,422 [11] DEBUG [(null)] - Close Connection "59234271" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:16,424 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:16,425 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:16,426 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:16,427 [11] DEBUG [(null)] - Open Connection "16798167" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:16,482 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:16,483 [11] DEBUG [(null)] - Close Connection "16798167" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:16,485 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:16,486 [11] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:16,487 [11] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:16,487 [11] DEBUG [(null)] - Open Connection "17803844" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:16,514 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:16,516 [11] DEBUG [(null)] - Close Connection "17803844" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:19,226 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:19,227 [13] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:19,229 [13] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:19,231 [13] DEBUG [(null)] - Open Connection "66744616" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:19,244 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:19,245 [13] DEBUG [(null)] - Close Connection "66744616" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:19,247 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:19,248 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],2], @param2=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:19,249 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:19,249 [13] DEBUG [(null)] - Open Connection "46346755" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:19,273 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:19,275 [13] DEBUG [(null)] - Close Connection "46346755" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:19,283 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:19,284 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/16 0:00:00], @param2=[bgrq,2017/1/16 23:59:59], @param3=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:19,285 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:19,286 [13] DEBUG [(null)] - Open Connection "24519374" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:19,313 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:19,314 [13] DEBUG [(null)] - Close Connection "24519374" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:19,316 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:19,317 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/16 0:00:00], @param2=[bgrq,2017/1/16 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:19,318 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:19,318 [13] DEBUG [(null)] - Open Connection "55427074" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:19,335 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:19,336 [13] DEBUG [(null)] - Close Connection "55427074" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:19,337 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:19,338 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:19,339 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:19,341 [13] DEBUG [(null)] - Open Connection "5226640" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:19,352 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:19,353 [13] DEBUG [(null)] - Close Connection "5226640" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:19,354 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '08e9ed0b-db42-480d-ab10-47a788e65318','382952aa-ecb3-4708-95a0-c01754009101','2017/1/16 0:00:00','2017/1/16 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:19,355 [13] DEBUG [(null)] - Open Connection "29483040" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:19,368 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:19,369 [13] DEBUG [(null)] - Close Connection "29483040" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:19,370 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:19,371 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:19,372 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:19,373 [13] DEBUG [(null)] - Open Connection "2811733" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:19,422 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:19,423 [13] DEBUG [(null)] - Close Connection "2811733" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:19,425 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:19,425 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:19,426 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:19,427 [13] DEBUG [(null)] - Open Connection "26051078" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:19,445 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:19,446 [13] DEBUG [(null)] - Close Connection "26051078" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:22,753 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:22,756 [13] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:22,764 [13] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:22,766 [13] DEBUG [(null)] - Open Connection "64981499" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:22,785 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:22,787 [13] DEBUG [(null)] - Close Connection "64981499" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:22,789 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:22,811 [13] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:22,838 [13] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:22,863 [13] DEBUG [(null)] - Open Connection "12957979" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:22,885 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:22,886 [13] DEBUG [(null)] - Close Connection "12957979" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:43,310 [16] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:43,311 [16] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:43,312 [16] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:43,313 [16] DEBUG [(null)] - Open Connection "18165577" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:43,330 [16] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:43,333 [16] DEBUG [(null)] - Close Connection "18165577" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:43,336 [16] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:43,337 [16] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],2], @param2=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:43,338 [16] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:43,339 [16] DEBUG [(null)] - Open Connection "45465304" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:43,368 [16] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:43,369 [16] DEBUG [(null)] - Close Connection "45465304" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:43,377 [16] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:43,378 [16] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/16 0:00:00], @param2=[bgrq,2017/1/16 23:59:59], @param3=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:43,379 [16] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:43,380 [16] DEBUG [(null)] - Open Connection "50098241" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:43,394 [16] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:43,395 [16] DEBUG [(null)] - Close Connection "50098241" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:43,396 [16] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:43,397 [16] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/16 0:00:00], @param2=[bgrq,2017/1/16 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:43,399 [16] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:43,400 [16] DEBUG [(null)] - Open Connection "34226614" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:43,412 [16] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:43,413 [16] DEBUG [(null)] - Close Connection "34226614" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:43,415 [16] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:43,417 [16] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:43,418 [16] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:43,419 [16] DEBUG [(null)] - Open Connection "12826168" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:43,437 [16] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:43,438 [16] DEBUG [(null)] - Close Connection "12826168" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:43,438 [16] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '08e9ed0b-db42-480d-ab10-47a788e65318','382952aa-ecb3-4708-95a0-c01754009101','2017/1/16 0:00:00','2017/1/16 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:43,439 [16] DEBUG [(null)] - Open Connection "12590364" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:43,452 [16] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:43,453 [16] DEBUG [(null)] - Close Connection "12590364" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:43,454 [16] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:43,455 [16] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:43,456 [16] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:43,457 [16] DEBUG [(null)] - Open Connection "63428770" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:43,500 [16] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:43,502 [16] DEBUG [(null)] - Close Connection "63428770" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:43,504 [16] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:43,506 [16] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:43,507 [16] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:43,508 [16] DEBUG [(null)] - Open Connection "14509015" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:43,529 [16] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:43,530 [16] DEBUG [(null)] - Close Connection "14509015" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:46,778 [8] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:46,779 [8] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:46,781 [8] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:46,789 [8] DEBUG [(null)] - Open Connection "17033759" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:46,806 [8] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:46,807 [8] DEBUG [(null)] - Close Connection "17033759" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:46,814 [8] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:46,823 [8] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:46,828 [8] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:46,852 [8] DEBUG [(null)] - Open Connection "26269310" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:46,878 [8] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:46,886 [8] DEBUG [(null)] - Close Connection "26269310" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:50,411 [13] DEBUG [(null)] - Open Connection "22964101" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:50,472 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [DataTools.RunProcedureOutQuery] based off of PreparedStatement: [p_rep_ps_sqcrkmx]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:50,479 [13] DEBUG [(null)] - Statement Id: [DataTools.RunProcedureOutQuery] Parameters: [@str=[str,08e9ed0b-db42-480d-ab10-47a788e65318|08e9ed0b-db42-480d-ab10-47a788e65318|382952aa-ecb3-4708-95a0-c01754009101|26|50|||2017-01-09|2017-01-16||], @outstr=[outstr,]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:37:50,486 [13] DEBUG [(null)] - Statement Id: [DataTools.RunProcedureOutQuery] Types: [@str=[String, System.String], @outstr=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:50,535 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:37:50,536 [13] DEBUG [(null)] - Close Connection "22964101" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:38:20,629 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:38:20,631 [13] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:38:20,633 [13] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:38:20,634 [13] DEBUG [(null)] - Open Connection "62529428" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:38:20,646 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:38:20,647 [13] DEBUG [(null)] - Close Connection "62529428" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:38:20,649 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:38:20,650 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],2], @param2=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:38:20,651 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:38:20,652 [13] DEBUG [(null)] - Open Connection "7407621" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:38:20,682 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:38:20,683 [13] DEBUG [(null)] - Close Connection "7407621" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:38:20,691 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:38:20,692 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/16 0:00:00], @param2=[bgrq,2017/1/16 23:59:59], @param3=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:38:20,694 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:38:20,695 [13] DEBUG [(null)] - Open Connection "19581260" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:38:20,709 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:38:20,709 [13] DEBUG [(null)] - Close Connection "19581260" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:38:20,711 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:38:20,712 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/16 0:00:00], @param2=[bgrq,2017/1/16 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:38:20,713 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:38:20,715 [13] DEBUG [(null)] - Open Connection "42390008" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:38:20,748 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:38:20,749 [13] DEBUG [(null)] - Close Connection "42390008" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:38:20,750 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:38:20,751 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:38:20,752 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:38:20,753 [13] DEBUG [(null)] - Open Connection "311379" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:38:20,765 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:38:20,768 [13] DEBUG [(null)] - Close Connection "311379" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:38:20,769 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '08e9ed0b-db42-480d-ab10-47a788e65318','382952aa-ecb3-4708-95a0-c01754009101','2017/1/16 0:00:00','2017/1/16 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:38:20,770 [13] DEBUG [(null)] - Open Connection "17748638" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:38:20,786 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:38:20,787 [13] DEBUG [(null)] - Close Connection "17748638" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:38:20,789 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:38:20,790 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:38:20,791 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:38:20,792 [13] DEBUG [(null)] - Open Connection "5039442" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:38:20,857 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:38:20,858 [13] DEBUG [(null)] - Close Connection "5039442" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:38:20,862 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:38:20,863 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:38:20,864 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:38:20,866 [13] DEBUG [(null)] - Open Connection "18812768" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:38:20,894 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:38:20,895 [13] DEBUG [(null)] - Close Connection "18812768" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:38:24,108 [8] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:38:24,118 [8] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:38:24,120 [8] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:38:24,125 [8] DEBUG [(null)] - Open Connection "53881984" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:38:24,149 [8] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:38:24,157 [8] DEBUG [(null)] - Close Connection "53881984" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:38:24,164 [8] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:38:24,170 [8] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:38:24,192 [8] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:38:24,200 [8] DEBUG [(null)] - Open Connection "47476365" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:38:24,219 [8] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:38:24,221 [8] DEBUG [(null)] - Close Connection "47476365" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:39:31,330 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:39:31,331 [13] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:39:31,334 [13] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:39:31,335 [13] DEBUG [(null)] - Open Connection "40390561" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:39:31,348 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:39:31,350 [13] DEBUG [(null)] - Close Connection "40390561" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:39:31,353 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:39:31,354 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],2], @param2=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:39:31,355 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:39:31,356 [13] DEBUG [(null)] - Open Connection "20560628" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:39:31,385 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:39:31,386 [13] DEBUG [(null)] - Close Connection "20560628" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:39:31,394 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:39:31,395 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/16 0:00:00], @param2=[bgrq,2017/1/16 23:59:59], @param3=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:39:31,396 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:39:31,397 [13] DEBUG [(null)] - Open Connection "31105143" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:39:31,413 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:39:31,414 [13] DEBUG [(null)] - Close Connection "31105143" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:39:31,415 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:39:31,417 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/16 0:00:00], @param2=[bgrq,2017/1/16 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:39:31,418 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:39:31,420 [13] DEBUG [(null)] - Open Connection "28162723" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:39:31,430 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:39:31,431 [13] DEBUG [(null)] - Close Connection "28162723" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:39:31,433 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:39:31,435 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:39:31,437 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:39:31,438 [13] DEBUG [(null)] - Open Connection "61771369" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:39:31,462 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:39:31,463 [13] DEBUG [(null)] - Close Connection "61771369" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:39:31,464 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '08e9ed0b-db42-480d-ab10-47a788e65318','382952aa-ecb3-4708-95a0-c01754009101','2017/1/16 0:00:00','2017/1/16 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:39:31,466 [13] DEBUG [(null)] - Open Connection "31307121" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:39:31,477 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:39:31,478 [13] DEBUG [(null)] - Close Connection "31307121" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:39:31,479 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:39:31,480 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:39:31,481 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:39:31,483 [13] DEBUG [(null)] - Open Connection "39675486" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:39:31,526 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:39:31,528 [13] DEBUG [(null)] - Close Connection "39675486" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:39:31,531 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:39:31,535 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:39:31,537 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:39:31,540 [13] DEBUG [(null)] - Open Connection "46910215" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:39:31,590 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:39:31,592 [13] DEBUG [(null)] - Close Connection "46910215" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:39:34,572 [8] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:39:34,577 [8] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:39:34,594 [8] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:39:34,620 [8] DEBUG [(null)] - Open Connection "19961865" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:39:34,702 [8] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:39:34,712 [8] DEBUG [(null)] - Close Connection "19961865" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:39:34,725 [8] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:39:34,742 [8] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:39:34,755 [8] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:39:34,758 [8] DEBUG [(null)] - Open Connection "391505" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:39:34,779 [8] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:39:34,781 [8] DEBUG [(null)] - Close Connection "391505" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:39:38,373 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [DataTools.RunProcedureOutQuery] based off of PreparedStatement: [p_rep_ps_sqcrkmx]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:39:38,380 [13] DEBUG [(null)] - Statement Id: [DataTools.RunProcedureOutQuery] Parameters: [@str=[str,08e9ed0b-db42-480d-ab10-47a788e65318|08e9ed0b-db42-480d-ab10-47a788e65318|382952aa-ecb3-4708-95a0-c01754009101|26|50|||2017-01-09|2017-01-16||], @outstr=[outstr,]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:39:38,382 [13] DEBUG [(null)] - Statement Id: [DataTools.RunProcedureOutQuery] Types: [@str=[String, System.String], @outstr=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:39:38,385 [13] DEBUG [(null)] - Open Connection "22290347" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:39:38,401 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:39:38,404 [13] DEBUG [(null)] - Close Connection "22290347" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:30,822 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:30,833 [13] DEBUG [(null)] - Close Connection "48860072" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:30,834 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:30,835 [13] DEBUG [(null)] - Close Connection "33560690" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:30,851 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:30,852 [13] DEBUG [(null)] - Close Connection "57588721" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:30,867 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:30,868 [13] DEBUG [(null)] - Close Connection "41348801" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:30,870 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:30,871 [13] DEBUG [(null)] - Close Connection "8071465" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:30,878 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:30,879 [13] DEBUG [(null)] - Close Connection "40510476" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:30,880 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:30,881 [13] DEBUG [(null)] - Close Connection "27395808" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:30,882 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:30,883 [13] DEBUG [(null)] - Close Connection "18057216" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:30,884 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:30,885 [13] DEBUG [(null)] - Close Connection "22628356" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:30,886 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:30,886 [13] DEBUG [(null)] - Close Connection "14747902" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:30,887 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:30,888 [13] DEBUG [(null)] - Close Connection "35324087" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:30,906 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:30,907 [13] DEBUG [(null)] - Close Connection "65691171" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:30,909 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:30,910 [13] DEBUG [(null)] - Close Connection "50243262" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:30,911 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:30,912 [13] DEBUG [(null)] - Close Connection "45293701" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:30,933 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:30,934 [13] DEBUG [(null)] - Close Connection "46783276" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:30,935 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:30,937 [13] DEBUG [(null)] - Close Connection "49401076" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:30,939 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:30,940 [13] DEBUG [(null)] - Close Connection "64397913" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:30,946 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:30,947 [13] DEBUG [(null)] - Close Connection "64640116" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:30,966 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:30,967 [13] DEBUG [(null)] - Close Connection "11684370" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:31,009 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:31,010 [13] DEBUG [(null)] - Close Connection "54368493" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:31,011 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:31,013 [13] DEBUG [(null)] - Close Connection "11996373" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:31,014 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:31,016 [13] DEBUG [(null)] - Close Connection "53077803" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:31,017 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:31,018 [13] DEBUG [(null)] - Close Connection "5535939" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:31,019 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:31,019 [13] DEBUG [(null)] - Close Connection "62165070" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:31,026 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:31,027 [13] DEBUG [(null)] - Close Connection "8317464" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:46:32,791 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User.GetItem] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select  db.[id_cyuser],db.[id_masteruser],db.[id],db.[username],db.[password],db.[name],isnull(master.companyname,db.[companyname])companyname,db.[flag_sex],db.[id_father],db.[job],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[rq_start],db.[rq_stop],db.[flag_state],db.[flag_master],db.[bz],db.[id_province],db.[id_city],db.[id_county],db.[zipcode],db.[address],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[version],db.flag_delete
      ,db.id_shop
      from  [tb_user]
      as db
      LEFT JOIN Tb_user master ON db.id_father=master.id
       where  db.[id]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:46:32,794 [13] DEBUG [(null)] - Statement Id: [Tb_User.GetItem] Parameters: [@param0=[id,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:46:32,795 [13] DEBUG [(null)] - Statement Id: [Tb_User.GetItem] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:32,830 [13] DEBUG [(null)] - Open Connection "16713360" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:32,901 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:32,902 [13] DEBUG [(null)] - Close Connection "16713360" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:46:32,905 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:46:32,906 [13] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:46:32,907 [13] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:32,910 [13] DEBUG [(null)] - Open Connection "10635867" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:32,961 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:32,963 [13] DEBUG [(null)] - Close Connection "10635867" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:46:32,972 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  
					db.[flag_type] in  (  @param0 ,   @param1 ) and db.[flag_stop]= @param2  and 
					exists(
					select 1 from Tb_function as fun
					where
					fun.flag_stop = 0
					 and 
						exists(select 1 from Tb_role_function as rf where rf.id_function = fun.id and rf.id_role in  (  @param3 ,   @param4 ) )
					 
					and (db.path+'/' like fun.path+'/%' or fun.path+'/' like db.path+'/%')
					)
				 order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:46:32,975 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_typeList[0],controller], @param1=[flag_typeList[1],action], @param2=[flag_stop,0], @param3=[id_roleList[0],2], @param4=[id_roleList[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:46:32,977 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[Int32, System.Int32], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:32,978 [13] DEBUG [(null)] - Open Connection "43138388" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:33,108 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:33,110 [13] DEBUG [(null)] - Close Connection "43138388" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:46:33,113 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param0 ,   @param1 ) )
         order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:46:33,115 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[rolelist[0],2], @param1=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:46:33,117 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:33,119 [13] DEBUG [(null)] - Open Connection "33315850" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:33,162 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:33,165 [13] DEBUG [(null)] - Close Connection "33315850" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:46:37,445 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Spfl.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[path],db.[id_father],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[sort_id] from  [tb_spfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:46:37,447 [18] DEBUG [(null)] - Statement Id: [Tb_Spfl.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:46:37,460 [18] DEBUG [(null)] - Statement Id: [Tb_Spfl.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:37,462 [18] DEBUG [(null)] - Open Connection "31924742" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:37,522 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:37,523 [18] DEBUG [(null)] - Close Connection "31924742" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:46:44,029 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Flag.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id],db.[listcode],db.[listname],db.[listdata],db.[listdisplay],db.[listsort],db.[id_father] from  [ts_flag]
      as db
       where  db.[listcode]= @param0  order by  
          db.listsort
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:46:44,030 [13] DEBUG [(null)] - Statement Id: [Ts_Flag.QueryList] Parameters: [@param0=[listcode,spstate]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:46:44,031 [13] DEBUG [(null)] - Statement Id: [Ts_Flag.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:44,032 [13] DEBUG [(null)] - Open Connection "64166956" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:44,051 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:44,052 [13] DEBUG [(null)] - Close Connection "64166956" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:46:44,065 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Flag.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id],db.[listcode],db.[listname],db.[listdata],db.[listdisplay],db.[listsort],db.[id_father] from  [ts_flag]
      as db
       where  db.[listcode]= @param0  order by  
          db.listsort
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:46:44,069 [13] DEBUG [(null)] - Statement Id: [Ts_Flag.QueryList] Parameters: [@param0=[listcode,spczfs]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:46:44,070 [13] DEBUG [(null)] - Statement Id: [Ts_Flag.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:44,072 [13] DEBUG [(null)] - Open Connection "62514247" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:44,084 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:44,085 [13] DEBUG [(null)] - Close Connection "62514247" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:46:44,088 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Spfl.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[path],db.[id_father],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[sort_id] from  [tb_spfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id
             asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:46:44,089 [13] DEBUG [(null)] - Statement Id: [Tb_Spfl.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:46:44,090 [13] DEBUG [(null)] - Statement Id: [Tb_Spfl.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:44,091 [13] DEBUG [(null)] - Open Connection "33060346" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:44,109 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:44,110 [13] DEBUG [(null)] - Close Connection "33060346" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:46:44,115 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:46:44,116 [13] DEBUG [(null)] - Statement Id: [Tb_Shop.GetCount] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:46:44,117 [13] DEBUG [(null)] - Statement Id: [Tb_Shop.GetCount] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:44,118 [13] DEBUG [(null)] - Open Connection "22356407" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:44,132 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:44,133 [13] DEBUG [(null)] - Close Connection "22356407" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:46:44,134 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryPage] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select t.* from (select row_number() over( order by  db.[id] asc ) as rownumber,db.* from  [tb_shop]
      as db  where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  ) as t]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:46:44,135 [13] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryPage] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:46:44,136 [13] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryPage] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:44,137 [13] DEBUG [(null)] - Open Connection "66355701" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.MappedStatements.ReaderAutoMapper: 2017-01-16 16:46:44,152 [13] ERROR [(null)] - The column [rownumber] could not be auto mapped to a property on [CySoft.Model.Tb.Tb_Shop]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:44,157 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:44,158 [13] DEBUG [(null)] - Close Connection "66355701" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:46:44,163 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Parm.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[parmcode],db.[parmname],db.[parmvalue],db.[nlast],db.[regex],db.[version],db.[parmdescribe],db.[sort_id],db.[flag_editstyle] from  [ts_parm]
      as db
       where  

          (
          db.[id_masteruser]='0'
           or  db.[id_masteruser]= @param0   
          )
         order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:46:44,164 [13] DEBUG [(null)] - Statement Id: [Ts_Parm.QueryList] Parameters: [@param0=[self_id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:46:44,165 [13] DEBUG [(null)] - Statement Id: [Ts_Parm.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:44,166 [13] DEBUG [(null)] - Open Connection "62607538" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:44,189 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:44,190 [13] DEBUG [(null)] - Close Connection "62607538" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:46:44,198 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:46:44,199 [13] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:46:44,199 [13] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:44,200 [13] DEBUG [(null)] - Open Connection "32809756" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:44,217 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:44,218 [13] DEBUG [(null)] - Close Connection "32809756" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:46:44,220 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:46:44,221 [13] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:46:44,222 [13] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:44,222 [13] DEBUG [(null)] - Open Connection "30023598" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.MappedStatements.ReaderAutoMapper: 2017-01-16 16:46:44,235 [13] ERROR [(null)] - The column [id_shop] could not be auto mapped to a property on [CySoft.Model.Tb.Tb_Shop]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:44,237 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:44,237 [13] DEBUG [(null)] - Close Connection "30023598" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:46:44,262 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shopsp.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [tb_shopsp]
      as db
      left join tb_spfl fl on fl.id=db.id_spfl
      left join tb_shop shop on shop.id=db.id_shop
      left join tz_sp_kc kc on kc.id_kcsp=db.id_kcsp and kc.id_shop=db.[id_shop]
      
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  and 
          db.[id_shop] in  (  @param3 ,   @param4 ,   @param5 ,   @param6 )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:46:44,263 [13] DEBUG [(null)] - Statement Id: [Tb_Shopsp.GetCount] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0], @param3=[id_shop_array[0],2dab2f66-31d9-4de5-9267-3746844187d6], @param4=[id_shop_array[1],382952aa-ecb3-4708-95a0-c01754009101], @param5=[id_shop_array[2],477b039b-9a68-411c-9986-3767e1adb7c9], @param6=[id_shop_array[3],fb826203-9d00-44cf-8a12-198f535c686a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:46:44,264 [13] DEBUG [(null)] - Statement Id: [Tb_Shopsp.GetCount] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Int32, System.Int32], @param3=[String, System.String], @param4=[String, System.String], @param5=[String, System.String], @param6=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:44,266 [13] DEBUG [(null)] - Open Connection "56749275" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:44,489 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-16 16:46:44,492 [13] DEBUG [(null)] - Close Connection "56749275" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:46:44,496 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shopsp.QueryPage] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select t.* from (select row_number() over( order by  
          db.rq_create
             desc ) as rownumber,db.*
      ,fl.mc as spfl_mc
      ,shop.mc as shop_mc
      ,isnull(kc.sl_qm,0) sl_qm
      ,isnull(kc.je_qm,0) je_qm
      ,isnull(kc.dj_cb,0) dj_cb
      from
       [tb_shopsp]
      as db
      left join tb_spfl fl on fl.id=db.id_spfl
      left join tb_shop shop on shop.id=db.id_shop
      left join tz_sp_kc kc on kc.id_kcsp=db.id_kcsp and kc.id_shop=db.[id_shop]

       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  and 
          db.[id_shop] in  (  @param3 ,   @param4 ,   @param5 ,   @param6 ) 

      ) as t
       where  
          t.rownumber between ( @param7  + 1)
           and 
            ( @param7  +  @param8 )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-16 16:46:44,501 [13] DEBUG [(null)] - Statement Id: [Tb_Shopsp.QueryPage] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0], @param3=[id_shop_array[0],2dab2f66-31d9-4de5-9267-3746844187d6], @param4=[id_shop_array[1],382952aa-ecb3-4708-95a0-c01754009101], @param5=[id_shop_array[2],477b039b-9a68-411c-9986-3767e1adb7c9], @param6=[id_shop_array[3],fb826203-9d00-44cf-8a12-198f535c686a], @param7=[start,0], @param8=[limit,10]]
