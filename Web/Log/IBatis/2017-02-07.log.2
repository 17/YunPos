Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:10:49,655 [12] DEBUG [(null)] - Statement Id: [Tb_Role.QueryList] Parameters: [@param0=[_id_masteruser,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:10:49,663 [12] DEBUG [(null)] - Statement Id: [Tb_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:10:49,664 [12] DEBUG [(null)] - Open Connection "65773351" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:10:49,683 [12] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:10:49,686 [12] DEBUG [(null)] - Close Connection "65773351" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:10:49,688 [12] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:10:49,690 [12] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:10:49,693 [12] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:10:49,696 [12] DEBUG [(null)] - Open Connection "63435560" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:10:49,723 [12] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:10:49,725 [12] DEBUG [(null)] - Close Connection "63435560" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:28,221 [21] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:28,223 [21] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:28,225 [21] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:28,227 [21] DEBUG [(null)] - Open Connection "23707842" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:28,252 [21] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:28,253 [21] DEBUG [(null)] - Close Connection "23707842" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:28,255 [21] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:28,263 [21] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:28,265 [21] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:28,266 [21] DEBUG [(null)] - Open Connection "29623159" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:28,310 [21] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:28,312 [21] DEBUG [(null)] - Close Connection "29623159" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:28,328 [21] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:28,330 [21] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90], @param1=[lgrq,2017/2/7 0:00:00], @param2=[bgrq,2017/2/7 23:59:59], @param3=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:28,331 [21] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:28,332 [21] DEBUG [(null)] - Open Connection "19215506" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:28,348 [21] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:28,350 [21] DEBUG [(null)] - Close Connection "19215506" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:28,351 [21] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:28,352 [21] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90], @param1=[lgrq,2017/2/7 0:00:00], @param2=[bgrq,2017/2/7 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:28,353 [21] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:28,354 [21] DEBUG [(null)] - Open Connection "32458475" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:28,375 [21] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:28,376 [21] DEBUG [(null)] - Close Connection "32458475" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:28,377 [21] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:28,379 [21] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926], @param1=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:28,380 [21] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:28,381 [21] DEBUG [(null)] - Open Connection "3123188" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:28,394 [21] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:28,395 [21] DEBUG [(null)] - Close Connection "3123188" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:28,397 [21] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  'dbbfed08-b13e-413d-82d3-714439657926','a3d5ca75-5726-437f-bad2-aeee4bbd1d90','2017/2/7 0:00:00','2017/2/7 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:28,398 [21] DEBUG [(null)] - Open Connection "9528309" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:28,426 [21] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:28,427 [21] DEBUG [(null)] - Close Connection "9528309" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:28,428 [21] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:28,429 [21] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926], @param1=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:28,431 [21] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:28,434 [21] DEBUG [(null)] - Open Connection "42713167" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:28,476 [21] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:28,480 [21] DEBUG [(null)] - Close Connection "42713167" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:28,482 [21] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:28,485 [21] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:28,486 [21] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:28,487 [21] DEBUG [(null)] - Open Connection "43375548" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:28,516 [21] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:28,518 [21] DEBUG [(null)] - Close Connection "43375548" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:29,646 [12] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User.QueryItem] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select
      isnull(email.id,0)valid_email,isnull(photo.id,0)valid_phone,isnull(master.companyname,db.[companyname])companyname

      ,db.[id_cyuser],db.[id_masteruser],db.[id],db.[username],db.[password],db.[name]
      ,db.[flag_sex],db.[id_father],db.[job],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[rq_start],db.[rq_stop],db.[flag_state],db.[flag_master],db.[bz],db.[id_province],db.[id_city],db.[id_county],db.[zipcode],db.[address],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[version],db.id_shop,db.flag_delete,db.[flag_industry],db.[companyno]
      ,p.name as name_province
      ,c.name as name_city
      ,county.name as name_county
      ,shop.mc as name_shop
      from  [tb_user]
      as db
      LEFT JOIN Tb_user master ON db.id_father=master.id
      left join Tb_Districts p on db.id_province =p.id
      left join Tb_Districts c on db.id_city =c.id
      left join  Tb_Districts county on db.id_county =county.id
      LEFT JOIN Tb_account photo ON photo.id_user=db.id AND photo.username=db.phone
      LEFT JOIN Tb_account email ON email.id_user=db.id AND email.username=db.email
      left join Tb_Shop shop on db.id_shop =shop.id
       where  db.[id]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:29,648 [12] DEBUG [(null)] - Statement Id: [Tb_User.QueryItem] Parameters: [@param0=[id,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:29,650 [12] DEBUG [(null)] - Statement Id: [Tb_User.QueryItem] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:29,653 [12] DEBUG [(null)] - Open Connection "44189868" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:29,684 [12] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:29,687 [12] DEBUG [(null)] - Close Connection "44189868" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:29,689 [12] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[flag_type],db.[id_masteruser],db.[flag_update],db.[name],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[role_describe] from  [Tb_role]
		  as db
			 where   
            (db.flag_type = 2 or db.id_masteruser =  @param0 )
           order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:29,690 [12] DEBUG [(null)] - Statement Id: [Tb_Role.QueryList] Parameters: [@param0=[_id_masteruser,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:29,691 [12] DEBUG [(null)] - Statement Id: [Tb_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:29,693 [12] DEBUG [(null)] - Open Connection "60361628" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:29,710 [12] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:29,711 [12] DEBUG [(null)] - Close Connection "60361628" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:29,713 [12] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:29,716 [12] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:29,717 [12] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:29,719 [12] DEBUG [(null)] - Open Connection "45049676" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:29,743 [12] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:29,744 [12] DEBUG [(null)] - Close Connection "45049676" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:46,247 [12] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:46,249 [12] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:46,252 [12] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:46,255 [12] DEBUG [(null)] - Open Connection "3037557" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:46,275 [12] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:46,278 [12] DEBUG [(null)] - Close Connection "3037557" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:46,280 [12] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:46,282 [12] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:46,283 [12] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:46,284 [12] DEBUG [(null)] - Open Connection "26772797" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:46,319 [12] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:46,320 [12] DEBUG [(null)] - Close Connection "26772797" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:46,331 [12] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:46,332 [12] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90], @param1=[lgrq,2017/2/7 0:00:00], @param2=[bgrq,2017/2/7 23:59:59], @param3=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:46,334 [12] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:46,335 [12] DEBUG [(null)] - Open Connection "9672105" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:46,350 [12] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:46,351 [12] DEBUG [(null)] - Close Connection "9672105" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:46,352 [12] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:46,353 [12] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90], @param1=[lgrq,2017/2/7 0:00:00], @param2=[bgrq,2017/2/7 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:46,355 [12] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:46,356 [12] DEBUG [(null)] - Open Connection "42859532" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:46,376 [12] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:46,377 [12] DEBUG [(null)] - Close Connection "42859532" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:46,379 [12] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:46,380 [12] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926], @param1=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:46,382 [12] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:46,383 [12] DEBUG [(null)] - Open Connection "56962723" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:46,394 [12] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:46,396 [12] DEBUG [(null)] - Close Connection "56962723" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:46,398 [12] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  'dbbfed08-b13e-413d-82d3-714439657926','a3d5ca75-5726-437f-bad2-aeee4bbd1d90','2017/2/7 0:00:00','2017/2/7 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:46,400 [12] DEBUG [(null)] - Open Connection "66234343" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:46,428 [12] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:46,429 [12] DEBUG [(null)] - Close Connection "66234343" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:46,432 [12] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:46,434 [12] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926], @param1=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:46,436 [12] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:46,437 [12] DEBUG [(null)] - Open Connection "20759282" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:46,466 [12] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:46,467 [12] DEBUG [(null)] - Close Connection "20759282" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:46,468 [12] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:46,470 [12] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:46,471 [12] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:46,472 [12] DEBUG [(null)] - Open Connection "26500147" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:46,500 [12] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:46,504 [12] DEBUG [(null)] - Close Connection "26500147" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:47,726 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User.QueryItem] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select
      isnull(email.id,0)valid_email,isnull(photo.id,0)valid_phone,isnull(master.companyname,db.[companyname])companyname

      ,db.[id_cyuser],db.[id_masteruser],db.[id],db.[username],db.[password],db.[name]
      ,db.[flag_sex],db.[id_father],db.[job],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[rq_start],db.[rq_stop],db.[flag_state],db.[flag_master],db.[bz],db.[id_province],db.[id_city],db.[id_county],db.[zipcode],db.[address],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[version],db.id_shop,db.flag_delete,db.[flag_industry],db.[companyno]
      ,p.name as name_province
      ,c.name as name_city
      ,county.name as name_county
      ,shop.mc as name_shop
      from  [tb_user]
      as db
      LEFT JOIN Tb_user master ON db.id_father=master.id
      left join Tb_Districts p on db.id_province =p.id
      left join Tb_Districts c on db.id_city =c.id
      left join  Tb_Districts county on db.id_county =county.id
      LEFT JOIN Tb_account photo ON photo.id_user=db.id AND photo.username=db.phone
      LEFT JOIN Tb_account email ON email.id_user=db.id AND email.username=db.email
      left join Tb_Shop shop on db.id_shop =shop.id
       where  db.[id]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:47,728 [13] DEBUG [(null)] - Statement Id: [Tb_User.QueryItem] Parameters: [@param0=[id,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:47,731 [13] DEBUG [(null)] - Statement Id: [Tb_User.QueryItem] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:47,734 [13] DEBUG [(null)] - Open Connection "6440255" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:47,755 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:47,757 [13] DEBUG [(null)] - Close Connection "6440255" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:47,759 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[flag_type],db.[id_masteruser],db.[flag_update],db.[name],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[role_describe] from  [Tb_role]
		  as db
			 where   
            (db.flag_type = 2 or db.id_masteruser =  @param0 )
           order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:47,761 [13] DEBUG [(null)] - Statement Id: [Tb_Role.QueryList] Parameters: [@param0=[_id_masteruser,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:47,764 [13] DEBUG [(null)] - Statement Id: [Tb_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:47,767 [13] DEBUG [(null)] - Open Connection "31550247" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:47,804 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:47,805 [13] DEBUG [(null)] - Close Connection "31550247" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:47,807 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:47,809 [13] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:11:47,810 [13] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:47,812 [13] DEBUG [(null)] - Open Connection "53533670" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:47,829 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:11:47,831 [13] DEBUG [(null)] - Close Connection "53533670" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:12:33,750 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:12:33,756 [13] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:12:33,758 [13] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:12:33,759 [13] DEBUG [(null)] - Open Connection "27946268" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:12:33,784 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:12:33,785 [13] DEBUG [(null)] - Close Connection "27946268" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:12:33,787 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:12:33,788 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:12:33,789 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:12:33,790 [13] DEBUG [(null)] - Open Connection "49433459" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:12:33,828 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:12:33,830 [13] DEBUG [(null)] - Close Connection "49433459" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:12:33,841 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:12:33,844 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90], @param1=[lgrq,2017/2/7 0:00:00], @param2=[bgrq,2017/2/7 23:59:59], @param3=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:12:33,845 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:12:33,846 [13] DEBUG [(null)] - Open Connection "66243752" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:12:33,859 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:12:33,860 [13] DEBUG [(null)] - Close Connection "66243752" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:12:33,861 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:12:33,862 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90], @param1=[lgrq,2017/2/7 0:00:00], @param2=[bgrq,2017/2/7 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:12:33,863 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:12:33,864 [13] DEBUG [(null)] - Open Connection "17797501" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:12:33,884 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:12:33,886 [13] DEBUG [(null)] - Close Connection "17797501" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:12:33,887 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:12:33,888 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926], @param1=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:12:33,889 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:12:33,891 [13] DEBUG [(null)] - Open Connection "7824619" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:12:33,904 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:12:33,905 [13] DEBUG [(null)] - Close Connection "7824619" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:12:33,906 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  'dbbfed08-b13e-413d-82d3-714439657926','a3d5ca75-5726-437f-bad2-aeee4bbd1d90','2017/2/7 0:00:00','2017/2/7 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:12:33,907 [13] DEBUG [(null)] - Open Connection "43350115" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:12:33,935 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:12:33,936 [13] DEBUG [(null)] - Close Connection "43350115" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:12:33,937 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:12:33,938 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926], @param1=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:12:33,939 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:12:33,940 [13] DEBUG [(null)] - Open Connection "55037453" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:12:33,966 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:12:33,970 [13] DEBUG [(null)] - Close Connection "55037453" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:12:33,972 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:12:33,974 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:12:33,977 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:12:33,978 [13] DEBUG [(null)] - Open Connection "50127116" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:12:34,002 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:12:34,004 [13] DEBUG [(null)] - Close Connection "50127116" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:12:35,204 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User.QueryItem] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select
      isnull(email.id,0)valid_email,isnull(photo.id,0)valid_phone,isnull(master.companyname,db.[companyname])companyname

      ,db.[id_cyuser],db.[id_masteruser],db.[id],db.[username],db.[password],db.[name]
      ,db.[flag_sex],db.[id_father],db.[job],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[rq_start],db.[rq_stop],db.[flag_state],db.[flag_master],db.[bz],db.[id_province],db.[id_city],db.[id_county],db.[zipcode],db.[address],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[version],db.id_shop,db.flag_delete,db.[flag_industry],db.[companyno]
      ,p.name as name_province
      ,c.name as name_city
      ,county.name as name_county
      ,shop.mc as name_shop
      from  [tb_user]
      as db
      LEFT JOIN Tb_user master ON db.id_father=master.id
      left join Tb_Districts p on db.id_province =p.id
      left join Tb_Districts c on db.id_city =c.id
      left join  Tb_Districts county on db.id_county =county.id
      LEFT JOIN Tb_account photo ON photo.id_user=db.id AND photo.username=db.phone
      LEFT JOIN Tb_account email ON email.id_user=db.id AND email.username=db.email
      left join Tb_Shop shop on db.id_shop =shop.id
       where  db.[id]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:12:35,206 [17] DEBUG [(null)] - Statement Id: [Tb_User.QueryItem] Parameters: [@param0=[id,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:12:35,208 [17] DEBUG [(null)] - Statement Id: [Tb_User.QueryItem] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:12:35,223 [17] DEBUG [(null)] - Open Connection "23081974" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:12:35,246 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:12:35,248 [17] DEBUG [(null)] - Close Connection "23081974" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:12:35,250 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[flag_type],db.[id_masteruser],db.[flag_update],db.[name],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[role_describe] from  [Tb_role]
		  as db
			 where   
            (db.flag_type = 2 or db.id_masteruser =  @param0 )
           order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:12:35,252 [17] DEBUG [(null)] - Statement Id: [Tb_Role.QueryList] Parameters: [@param0=[_id_masteruser,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:12:35,253 [17] DEBUG [(null)] - Statement Id: [Tb_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:12:35,255 [17] DEBUG [(null)] - Open Connection "7262536" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:12:35,277 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:12:35,281 [17] DEBUG [(null)] - Close Connection "7262536" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:12:35,286 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:12:35,287 [17] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:12:35,289 [17] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:12:35,290 [17] DEBUG [(null)] - Open Connection "60403097" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:12:35,316 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:12:35,323 [17] DEBUG [(null)] - Close Connection "60403097" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:20,608 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:20,610 [17] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:20,613 [17] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:20,615 [17] DEBUG [(null)] - Open Connection "42228092" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:20,637 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:20,638 [17] DEBUG [(null)] - Close Connection "42228092" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:20,640 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:20,645 [17] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:20,646 [17] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:20,652 [17] DEBUG [(null)] - Open Connection "62751865" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:20,688 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:20,691 [17] DEBUG [(null)] - Close Connection "62751865" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:20,706 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:20,708 [17] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90], @param1=[lgrq,2017/2/7 0:00:00], @param2=[bgrq,2017/2/7 23:59:59], @param3=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:20,710 [17] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:20,712 [17] DEBUG [(null)] - Open Connection "17483442" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:20,735 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:20,736 [17] DEBUG [(null)] - Close Connection "17483442" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:20,738 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:20,743 [17] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90], @param1=[lgrq,2017/2/7 0:00:00], @param2=[bgrq,2017/2/7 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:20,749 [17] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:20,755 [17] DEBUG [(null)] - Open Connection "1222854" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:20,778 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:20,779 [17] DEBUG [(null)] - Close Connection "1222854" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:20,782 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:20,784 [17] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926], @param1=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:20,785 [17] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:20,787 [17] DEBUG [(null)] - Open Connection "22159520" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:20,805 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:20,806 [17] DEBUG [(null)] - Close Connection "22159520" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:20,811 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  'dbbfed08-b13e-413d-82d3-714439657926','a3d5ca75-5726-437f-bad2-aeee4bbd1d90','2017/2/7 0:00:00','2017/2/7 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:20,813 [17] DEBUG [(null)] - Open Connection "7032239" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:20,842 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:20,844 [17] DEBUG [(null)] - Close Connection "7032239" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:20,845 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:20,847 [17] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926], @param1=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:20,849 [17] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:20,851 [17] DEBUG [(null)] - Open Connection "43591470" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:20,877 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:20,879 [17] DEBUG [(null)] - Close Connection "43591470" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:20,881 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:20,882 [17] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:20,883 [17] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:20,884 [17] DEBUG [(null)] - Open Connection "28060765" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:20,912 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:20,913 [17] DEBUG [(null)] - Close Connection "28060765" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:22,001 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User.QueryItem] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select
      isnull(email.id,0)valid_email,isnull(photo.id,0)valid_phone,isnull(master.companyname,db.[companyname])companyname

      ,db.[id_cyuser],db.[id_masteruser],db.[id],db.[username],db.[password],db.[name]
      ,db.[flag_sex],db.[id_father],db.[job],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[rq_start],db.[rq_stop],db.[flag_state],db.[flag_master],db.[bz],db.[id_province],db.[id_city],db.[id_county],db.[zipcode],db.[address],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[version],db.id_shop,db.flag_delete,db.[flag_industry],db.[companyno]
      ,p.name as name_province
      ,c.name as name_city
      ,county.name as name_county
      ,shop.mc as name_shop
      from  [tb_user]
      as db
      LEFT JOIN Tb_user master ON db.id_father=master.id
      left join Tb_Districts p on db.id_province =p.id
      left join Tb_Districts c on db.id_city =c.id
      left join  Tb_Districts county on db.id_county =county.id
      LEFT JOIN Tb_account photo ON photo.id_user=db.id AND photo.username=db.phone
      LEFT JOIN Tb_account email ON email.id_user=db.id AND email.username=db.email
      left join Tb_Shop shop on db.id_shop =shop.id
       where  db.[id]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:22,003 [13] DEBUG [(null)] - Statement Id: [Tb_User.QueryItem] Parameters: [@param0=[id,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:22,004 [13] DEBUG [(null)] - Statement Id: [Tb_User.QueryItem] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:22,005 [13] DEBUG [(null)] - Open Connection "43149862" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:22,035 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:22,037 [13] DEBUG [(null)] - Close Connection "43149862" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:22,040 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[flag_type],db.[id_masteruser],db.[flag_update],db.[name],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[role_describe] from  [Tb_role]
		  as db
			 where   
            (db.flag_type = 2 or db.id_masteruser =  @param0 )
           order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:22,042 [13] DEBUG [(null)] - Statement Id: [Tb_Role.QueryList] Parameters: [@param0=[_id_masteruser,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:22,049 [13] DEBUG [(null)] - Statement Id: [Tb_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:22,054 [13] DEBUG [(null)] - Open Connection "43623033" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:22,071 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:22,072 [13] DEBUG [(null)] - Close Connection "43623033" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:22,074 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:22,076 [13] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:22,077 [13] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:22,078 [13] DEBUG [(null)] - Open Connection "3484945" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:22,101 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:22,102 [13] DEBUG [(null)] - Close Connection "3484945" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:42,609 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:42,610 [13] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:42,611 [13] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:42,613 [13] DEBUG [(null)] - Open Connection "43822915" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:42,629 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:42,630 [13] DEBUG [(null)] - Close Connection "43822915" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:42,633 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:42,635 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:42,636 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:42,638 [13] DEBUG [(null)] - Open Connection "14878187" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:42,680 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:42,685 [13] DEBUG [(null)] - Close Connection "14878187" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:42,695 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:42,697 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90], @param1=[lgrq,2017/2/7 0:00:00], @param2=[bgrq,2017/2/7 23:59:59], @param3=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:42,703 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:42,705 [13] DEBUG [(null)] - Open Connection "42750342" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:42,745 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:42,747 [13] DEBUG [(null)] - Close Connection "42750342" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:42,754 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:42,756 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90], @param1=[lgrq,2017/2/7 0:00:00], @param2=[bgrq,2017/2/7 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:42,757 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:42,758 [13] DEBUG [(null)] - Open Connection "20850428" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:42,776 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:42,777 [13] DEBUG [(null)] - Close Connection "20850428" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:42,780 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:42,782 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926], @param1=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:42,786 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:42,787 [13] DEBUG [(null)] - Open Connection "47623725" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:42,811 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:42,813 [13] DEBUG [(null)] - Close Connection "47623725" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:42,818 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  'dbbfed08-b13e-413d-82d3-714439657926','a3d5ca75-5726-437f-bad2-aeee4bbd1d90','2017/2/7 0:00:00','2017/2/7 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:42,819 [13] DEBUG [(null)] - Open Connection "30197812" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:42,848 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:42,850 [13] DEBUG [(null)] - Close Connection "30197812" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:42,852 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:42,853 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926], @param1=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:42,854 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:42,856 [13] DEBUG [(null)] - Open Connection "43553696" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:42,875 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:42,876 [13] DEBUG [(null)] - Close Connection "43553696" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:42,877 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:42,878 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:42,879 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:42,882 [13] DEBUG [(null)] - Open Connection "66641595" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:42,922 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:42,925 [13] DEBUG [(null)] - Close Connection "66641595" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:43,971 [23] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User.QueryItem] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select
      isnull(email.id,0)valid_email,isnull(photo.id,0)valid_phone,isnull(master.companyname,db.[companyname])companyname

      ,db.[id_cyuser],db.[id_masteruser],db.[id],db.[username],db.[password],db.[name]
      ,db.[flag_sex],db.[id_father],db.[job],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[rq_start],db.[rq_stop],db.[flag_state],db.[flag_master],db.[bz],db.[id_province],db.[id_city],db.[id_county],db.[zipcode],db.[address],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[version],db.id_shop,db.flag_delete,db.[flag_industry],db.[companyno]
      ,p.name as name_province
      ,c.name as name_city
      ,county.name as name_county
      ,shop.mc as name_shop
      from  [tb_user]
      as db
      LEFT JOIN Tb_user master ON db.id_father=master.id
      left join Tb_Districts p on db.id_province =p.id
      left join Tb_Districts c on db.id_city =c.id
      left join  Tb_Districts county on db.id_county =county.id
      LEFT JOIN Tb_account photo ON photo.id_user=db.id AND photo.username=db.phone
      LEFT JOIN Tb_account email ON email.id_user=db.id AND email.username=db.email
      left join Tb_Shop shop on db.id_shop =shop.id
       where  db.[id]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:43,972 [23] DEBUG [(null)] - Statement Id: [Tb_User.QueryItem] Parameters: [@param0=[id,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:43,974 [23] DEBUG [(null)] - Statement Id: [Tb_User.QueryItem] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:43,976 [23] DEBUG [(null)] - Open Connection "6601670" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:44,000 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:44,002 [23] DEBUG [(null)] - Close Connection "6601670" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:44,004 [23] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[flag_type],db.[id_masteruser],db.[flag_update],db.[name],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[role_describe] from  [Tb_role]
		  as db
			 where   
            (db.flag_type = 2 or db.id_masteruser =  @param0 )
           order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:44,005 [23] DEBUG [(null)] - Statement Id: [Tb_Role.QueryList] Parameters: [@param0=[_id_masteruser,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:44,007 [23] DEBUG [(null)] - Statement Id: [Tb_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:44,009 [23] DEBUG [(null)] - Open Connection "36382270" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:44,027 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:44,030 [23] DEBUG [(null)] - Close Connection "36382270" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:44,035 [23] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:44,038 [23] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:13:44,040 [23] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:44,041 [23] DEBUG [(null)] - Open Connection "39419271" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:44,057 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:13:44,058 [23] DEBUG [(null)] - Close Connection "39419271" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:33,218 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:33,222 [23] DEBUG [(null)] - Close Connection "6792439" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:33,223 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:33,224 [23] DEBUG [(null)] - Close Connection "54886849" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:33,243 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:33,245 [23] DEBUG [(null)] - Close Connection "61949235" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:33,261 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:33,262 [23] DEBUG [(null)] - Close Connection "28589657" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:33,265 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:33,267 [23] DEBUG [(null)] - Close Connection "21733374" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:33,275 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:33,276 [23] DEBUG [(null)] - Close Connection "51260673" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:33,277 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:33,279 [23] DEBUG [(null)] - Close Connection "6229422" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:33,281 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:33,282 [23] DEBUG [(null)] - Close Connection "274188" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:33,284 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:33,285 [23] DEBUG [(null)] - Close Connection "26596267" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:33,287 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:33,288 [23] DEBUG [(null)] - Close Connection "29701148" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:33,289 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:33,291 [23] DEBUG [(null)] - Close Connection "62439151" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:33,317 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:33,319 [23] DEBUG [(null)] - Close Connection "34741988" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:33,325 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:33,326 [23] DEBUG [(null)] - Close Connection "9345111" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:33,328 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:33,329 [23] DEBUG [(null)] - Close Connection "34060619" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:33,352 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:33,356 [23] DEBUG [(null)] - Close Connection "65573387" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:33,358 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:33,359 [23] DEBUG [(null)] - Close Connection "52385418" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:33,360 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:33,361 [23] DEBUG [(null)] - Close Connection "48220794" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:33,386 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:33,388 [23] DEBUG [(null)] - Close Connection "48593386" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:33,401 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:33,402 [23] DEBUG [(null)] - Close Connection "20089980" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:33,416 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:33,418 [23] DEBUG [(null)] - Close Connection "25532776" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:33,419 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:33,421 [23] DEBUG [(null)] - Close Connection "60760187" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:33,423 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:33,424 [23] DEBUG [(null)] - Close Connection "59302695" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:33,425 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:33,427 [23] DEBUG [(null)] - Close Connection "48107999" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:33,428 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:33,429 [23] DEBUG [(null)] - Close Connection "25326672" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:33,438 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:33,439 [23] DEBUG [(null)] - Close Connection "65813460" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:35,800 [23] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:35,805 [23] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:35,807 [23] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:35,833 [23] DEBUG [(null)] - Open Connection "10429360" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:35,892 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:35,893 [23] DEBUG [(null)] - Close Connection "10429360" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:35,900 [23] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:35,902 [23] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:35,904 [23] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:35,905 [23] DEBUG [(null)] - Open Connection "9025985" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:35,939 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:35,940 [23] DEBUG [(null)] - Close Connection "9025985" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:35,966 [23] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:35,968 [23] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90], @param1=[lgrq,2017/2/7 0:00:00], @param2=[bgrq,2017/2/7 23:59:59], @param3=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:35,969 [23] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:35,972 [23] DEBUG [(null)] - Open Connection "32783875" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:36,001 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:36,002 [23] DEBUG [(null)] - Close Connection "32783875" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:36,005 [23] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:36,006 [23] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90], @param1=[lgrq,2017/2/7 0:00:00], @param2=[bgrq,2017/2/7 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:36,007 [23] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:36,010 [23] DEBUG [(null)] - Open Connection "25919359" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:36,024 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:36,026 [23] DEBUG [(null)] - Close Connection "25919359" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:36,029 [23] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:36,031 [23] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926], @param1=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:36,032 [23] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:36,034 [23] DEBUG [(null)] - Open Connection "31149900" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:36,050 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:36,052 [23] DEBUG [(null)] - Close Connection "31149900" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:36,054 [23] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  'dbbfed08-b13e-413d-82d3-714439657926','a3d5ca75-5726-437f-bad2-aeee4bbd1d90','2017/2/7 0:00:00','2017/2/7 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:36,055 [23] DEBUG [(null)] - Open Connection "1641467" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:36,090 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:36,091 [23] DEBUG [(null)] - Close Connection "1641467" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:36,094 [23] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:36,096 [23] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926], @param1=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:36,098 [23] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:36,100 [23] DEBUG [(null)] - Open Connection "25004571" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:36,123 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:36,124 [23] DEBUG [(null)] - Close Connection "25004571" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:36,127 [23] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:36,128 [23] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:36,130 [23] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:36,131 [23] DEBUG [(null)] - Open Connection "51440367" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:36,156 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:36,157 [23] DEBUG [(null)] - Close Connection "51440367" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:36,166 [23] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User.GetItem] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select  db.[id_cyuser],db.[id_masteruser],db.[id],db.[username],db.[password],db.[name],isnull(master.companyname,db.[companyname])companyname,db.[flag_sex],db.[id_father],db.[job],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[rq_start],db.[rq_stop],db.[flag_state],db.[flag_master],db.[bz],db.[id_province],db.[id_city],db.[id_county],db.[zipcode],db.[address],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[version],db.flag_delete,db.[flag_industry],db.[companyno]
      ,db.id_shop
      from  [tb_user]
      as db
      LEFT JOIN Tb_user master ON db.id_father=master.id
       where  db.[id]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:36,168 [23] DEBUG [(null)] - Statement Id: [Tb_User.GetItem] Parameters: [@param0=[id,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:36,170 [23] DEBUG [(null)] - Statement Id: [Tb_User.GetItem] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:36,172 [23] DEBUG [(null)] - Open Connection "13291082" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:36,217 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:36,222 [23] DEBUG [(null)] - Close Connection "13291082" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:36,227 [23] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:36,229 [23] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:36,234 [23] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:36,235 [23] DEBUG [(null)] - Open Connection "14166545" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:36,247 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:36,249 [23] DEBUG [(null)] - Close Connection "14166545" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:36,251 [23] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  
					db.[flag_type] in  (  @param0 ,   @param1 ) and db.[flag_stop]= @param2  and 
					exists(
					select 1 from Tb_function as fun
					where
					fun.flag_stop = 0
					 and 
						exists(select 1 from Tb_role_function as rf where rf.id_function = fun.id and rf.id_role in  (  @param3 ,   @param4 ,   @param5 ,   @param6 ) )
					 
					and (db.path+'/' like fun.path+'/%' or fun.path+'/' like db.path+'/%')
					)
				 order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:36,252 [23] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_typeList[0],controller], @param1=[flag_typeList[1],action], @param2=[flag_stop,0], @param3=[id_roleList[0],], @param4=[id_roleList[1],1], @param5=[id_roleList[2],2], @param6=[id_roleList[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:36,255 [23] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[Int32, System.Int32], @param3=[String, System.String], @param4=[String, System.String], @param5=[String, System.String], @param6=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:36,256 [23] DEBUG [(null)] - Open Connection "28602001" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:36,365 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:36,367 [23] DEBUG [(null)] - Close Connection "28602001" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:36,369 [23] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param0 ,   @param1 ,   @param2 ,   @param3 ) )
         order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:36,371 [23] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[rolelist[0],], @param1=[rolelist[1],1], @param2=[rolelist[2],2], @param3=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:36,372 [23] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:36,374 [23] DEBUG [(null)] - Open Connection "22930686" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:36,418 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:36,421 [23] DEBUG [(null)] - Close Connection "22930686" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:37,927 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User.QueryItem] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select
      isnull(email.id,0)valid_email,isnull(photo.id,0)valid_phone,isnull(master.companyname,db.[companyname])companyname

      ,db.[id_cyuser],db.[id_masteruser],db.[id],db.[username],db.[password],db.[name]
      ,db.[flag_sex],db.[id_father],db.[job],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[rq_start],db.[rq_stop],db.[flag_state],db.[flag_master],db.[bz],db.[id_province],db.[id_city],db.[id_county],db.[zipcode],db.[address],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[version],db.id_shop,db.flag_delete,db.[flag_industry],db.[companyno]
      ,p.name as name_province
      ,c.name as name_city
      ,county.name as name_county
      ,shop.mc as name_shop
      from  [tb_user]
      as db
      LEFT JOIN Tb_user master ON db.id_father=master.id
      left join Tb_Districts p on db.id_province =p.id
      left join Tb_Districts c on db.id_city =c.id
      left join  Tb_Districts county on db.id_county =county.id
      LEFT JOIN Tb_account photo ON photo.id_user=db.id AND photo.username=db.phone
      LEFT JOIN Tb_account email ON email.id_user=db.id AND email.username=db.email
      left join Tb_Shop shop on db.id_shop =shop.id
       where  db.[id]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:37,939 [13] DEBUG [(null)] - Statement Id: [Tb_User.QueryItem] Parameters: [@param0=[id,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:37,941 [13] DEBUG [(null)] - Statement Id: [Tb_User.QueryItem] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:37,942 [13] DEBUG [(null)] - Open Connection "47010593" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:37,968 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:37,970 [13] DEBUG [(null)] - Close Connection "47010593" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:37,973 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[flag_type],db.[id_masteruser],db.[flag_update],db.[name],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[role_describe] from  [Tb_role]
		  as db
			 where   
            (db.flag_type = 2 or db.id_masteruser =  @param0 )
           order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:37,976 [13] DEBUG [(null)] - Statement Id: [Tb_Role.QueryList] Parameters: [@param0=[_id_masteruser,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:37,978 [13] DEBUG [(null)] - Statement Id: [Tb_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:37,999 [13] DEBUG [(null)] - Open Connection "62358144" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:38,024 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:38,026 [13] DEBUG [(null)] - Close Connection "62358144" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:38,028 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:38,030 [13] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:38,032 [13] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:38,033 [13] DEBUG [(null)] - Open Connection "64753291" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:38,052 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:38,055 [13] DEBUG [(null)] - Close Connection "64753291" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:59,208 [23] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:59,210 [23] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:59,213 [23] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:59,215 [23] DEBUG [(null)] - Open Connection "48790096" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:59,228 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:59,230 [23] DEBUG [(null)] - Close Connection "48790096" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:59,232 [23] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:59,240 [23] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:59,244 [23] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:59,246 [23] DEBUG [(null)] - Open Connection "35018871" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:59,278 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:59,279 [23] DEBUG [(null)] - Close Connection "35018871" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:59,288 [23] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:59,290 [23] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90], @param1=[lgrq,2017/2/7 0:00:00], @param2=[bgrq,2017/2/7 23:59:59], @param3=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:59,293 [23] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:59,295 [23] DEBUG [(null)] - Open Connection "41387327" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:59,318 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:59,319 [23] DEBUG [(null)] - Close Connection "41387327" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:59,320 [23] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:59,323 [23] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90], @param1=[lgrq,2017/2/7 0:00:00], @param2=[bgrq,2017/2/7 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:59,325 [23] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:59,329 [23] DEBUG [(null)] - Open Connection "55147833" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:59,345 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:59,350 [23] DEBUG [(null)] - Close Connection "55147833" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:59,352 [23] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:59,360 [23] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926], @param1=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:59,364 [23] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:59,366 [23] DEBUG [(null)] - Open Connection "47739637" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:59,383 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:59,385 [23] DEBUG [(null)] - Close Connection "47739637" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:59,390 [23] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  'dbbfed08-b13e-413d-82d3-714439657926','a3d5ca75-5726-437f-bad2-aeee4bbd1d90','2017/2/7 0:00:00','2017/2/7 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:59,393 [23] DEBUG [(null)] - Open Connection "233218" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:59,442 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:59,444 [23] DEBUG [(null)] - Close Connection "233218" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:59,445 [23] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:59,446 [23] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926], @param1=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:59,447 [23] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:59,450 [23] DEBUG [(null)] - Open Connection "22622193" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:59,481 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:59,486 [23] DEBUG [(null)] - Close Connection "22622193" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:59,489 [23] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:59,492 [23] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:14:59,494 [23] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:59,495 [23] DEBUG [(null)] - Open Connection "46869073" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:59,518 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:14:59,520 [23] DEBUG [(null)] - Close Connection "46869073" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:15:00,645 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User.QueryItem] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select
      isnull(email.id,0)valid_email,isnull(photo.id,0)valid_phone,isnull(master.companyname,db.[companyname])companyname

      ,db.[id_cyuser],db.[id_masteruser],db.[id],db.[username],db.[password],db.[name]
      ,db.[flag_sex],db.[id_father],db.[job],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[rq_start],db.[rq_stop],db.[flag_state],db.[flag_master],db.[bz],db.[id_province],db.[id_city],db.[id_county],db.[zipcode],db.[address],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[version],db.id_shop,db.flag_delete,db.[flag_industry],db.[companyno]
      ,p.name as name_province
      ,c.name as name_city
      ,county.name as name_county
      ,shop.mc as name_shop
      from  [tb_user]
      as db
      LEFT JOIN Tb_user master ON db.id_father=master.id
      left join Tb_Districts p on db.id_province =p.id
      left join Tb_Districts c on db.id_city =c.id
      left join  Tb_Districts county on db.id_county =county.id
      LEFT JOIN Tb_account photo ON photo.id_user=db.id AND photo.username=db.phone
      LEFT JOIN Tb_account email ON email.id_user=db.id AND email.username=db.email
      left join Tb_Shop shop on db.id_shop =shop.id
       where  db.[id]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:15:00,647 [25] DEBUG [(null)] - Statement Id: [Tb_User.QueryItem] Parameters: [@param0=[id,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:15:00,648 [25] DEBUG [(null)] - Statement Id: [Tb_User.QueryItem] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:15:00,649 [25] DEBUG [(null)] - Open Connection "53030972" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:15:00,671 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:15:00,673 [25] DEBUG [(null)] - Close Connection "53030972" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:15:00,674 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[flag_type],db.[id_masteruser],db.[flag_update],db.[name],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[role_describe] from  [Tb_role]
		  as db
			 where   
            (db.flag_type = 2 or db.id_masteruser =  @param0 )
           order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:15:00,676 [25] DEBUG [(null)] - Statement Id: [Tb_Role.QueryList] Parameters: [@param0=[_id_masteruser,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:15:00,679 [25] DEBUG [(null)] - Statement Id: [Tb_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:15:00,685 [25] DEBUG [(null)] - Open Connection "65325276" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:15:00,705 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:15:00,708 [25] DEBUG [(null)] - Close Connection "65325276" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:15:00,709 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:15:00,711 [25] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:15:00,713 [25] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:15:00,714 [25] DEBUG [(null)] - Open Connection "14049852" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:15:00,729 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:15:00,730 [25] DEBUG [(null)] - Close Connection "14049852" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:15:52,001 [23] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:15:52,003 [23] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:15:52,007 [23] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:15:52,011 [23] DEBUG [(null)] - Open Connection "57520759" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:15:52,025 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:15:52,027 [23] DEBUG [(null)] - Close Connection "57520759" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:15:52,028 [23] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:15:52,030 [23] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:15:52,031 [23] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:15:52,032 [23] DEBUG [(null)] - Open Connection "9477995" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:15:52,081 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:15:52,082 [23] DEBUG [(null)] - Close Connection "9477995" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:15:52,092 [23] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:15:52,093 [23] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90], @param1=[lgrq,2017/2/7 0:00:00], @param2=[bgrq,2017/2/7 23:59:59], @param3=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:15:52,095 [23] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:15:52,097 [23] DEBUG [(null)] - Open Connection "46950369" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:15:52,115 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:15:52,117 [23] DEBUG [(null)] - Close Connection "46950369" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:15:52,118 [23] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:15:52,119 [23] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90], @param1=[lgrq,2017/2/7 0:00:00], @param2=[bgrq,2017/2/7 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:15:52,124 [23] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:15:52,127 [23] DEBUG [(null)] - Open Connection "57891944" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:15:52,151 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:15:52,152 [23] DEBUG [(null)] - Close Connection "57891944" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:15:52,153 [23] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:15:52,159 [23] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926], @param1=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:15:52,162 [23] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:15:52,163 [23] DEBUG [(null)] - Open Connection "45482896" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:15:52,180 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:15:52,182 [23] DEBUG [(null)] - Close Connection "45482896" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:15:52,185 [23] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  'dbbfed08-b13e-413d-82d3-714439657926','a3d5ca75-5726-437f-bad2-aeee4bbd1d90','2017/2/7 0:00:00','2017/2/7 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:15:52,186 [23] DEBUG [(null)] - Open Connection "49764842" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:15:52,213 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:15:52,215 [23] DEBUG [(null)] - Close Connection "49764842" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:15:52,216 [23] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:15:52,218 [23] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926], @param1=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:15:52,221 [23] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:15:52,225 [23] DEBUG [(null)] - Open Connection "62460422" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:15:52,256 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:15:52,258 [23] DEBUG [(null)] - Close Connection "62460422" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:15:52,259 [23] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:15:52,260 [23] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:15:52,261 [23] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:15:52,263 [23] DEBUG [(null)] - Open Connection "18863219" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:15:52,296 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:15:52,297 [23] DEBUG [(null)] - Close Connection "18863219" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:15:53,412 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User.QueryItem] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select
      isnull(email.id,0)valid_email,isnull(photo.id,0)valid_phone,isnull(master.companyname,db.[companyname])companyname

      ,db.[id_cyuser],db.[id_masteruser],db.[id],db.[username],db.[password],db.[name]
      ,db.[flag_sex],db.[id_father],db.[job],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[rq_start],db.[rq_stop],db.[flag_state],db.[flag_master],db.[bz],db.[id_province],db.[id_city],db.[id_county],db.[zipcode],db.[address],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[version],db.id_shop,db.flag_delete,db.[flag_industry],db.[companyno]
      ,p.name as name_province
      ,c.name as name_city
      ,county.name as name_county
      ,shop.mc as name_shop
      from  [tb_user]
      as db
      LEFT JOIN Tb_user master ON db.id_father=master.id
      left join Tb_Districts p on db.id_province =p.id
      left join Tb_Districts c on db.id_city =c.id
      left join  Tb_Districts county on db.id_county =county.id
      LEFT JOIN Tb_account photo ON photo.id_user=db.id AND photo.username=db.phone
      LEFT JOIN Tb_account email ON email.id_user=db.id AND email.username=db.email
      left join Tb_Shop shop on db.id_shop =shop.id
       where  db.[id]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:15:53,415 [9] DEBUG [(null)] - Statement Id: [Tb_User.QueryItem] Parameters: [@param0=[id,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:15:53,418 [9] DEBUG [(null)] - Statement Id: [Tb_User.QueryItem] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:15:53,420 [9] DEBUG [(null)] - Open Connection "61619058" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:15:53,438 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:15:53,439 [9] DEBUG [(null)] - Close Connection "61619058" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:15:53,441 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[flag_type],db.[id_masteruser],db.[flag_update],db.[name],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[role_describe] from  [Tb_role]
		  as db
			 where   
            (db.flag_type = 2 or db.id_masteruser =  @param0 )
           order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:15:53,442 [9] DEBUG [(null)] - Statement Id: [Tb_Role.QueryList] Parameters: [@param0=[_id_masteruser,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:15:53,444 [9] DEBUG [(null)] - Statement Id: [Tb_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:15:53,445 [9] DEBUG [(null)] - Open Connection "43353444" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:15:53,459 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:15:53,460 [9] DEBUG [(null)] - Close Connection "43353444" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:15:53,462 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:15:53,463 [9] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:15:53,465 [9] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:15:53,467 [9] DEBUG [(null)] - Open Connection "32660765" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:15:53,491 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:15:53,492 [9] DEBUG [(null)] - Close Connection "32660765" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:18,817 [24] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:18,821 [24] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:18,825 [24] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:18,827 [24] DEBUG [(null)] - Open Connection "60567493" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:18,844 [24] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:18,846 [24] DEBUG [(null)] - Close Connection "60567493" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:18,848 [24] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:18,854 [24] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:18,856 [24] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:18,858 [24] DEBUG [(null)] - Open Connection "10410227" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:18,896 [24] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:18,897 [24] DEBUG [(null)] - Close Connection "10410227" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:18,911 [24] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:18,912 [24] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90], @param1=[lgrq,2017/2/7 0:00:00], @param2=[bgrq,2017/2/7 23:59:59], @param3=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:18,913 [24] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:18,916 [24] DEBUG [(null)] - Open Connection "44800008" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:18,933 [24] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:18,935 [24] DEBUG [(null)] - Close Connection "44800008" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:18,937 [24] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:18,938 [24] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90], @param1=[lgrq,2017/2/7 0:00:00], @param2=[bgrq,2017/2/7 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:18,939 [24] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:18,940 [24] DEBUG [(null)] - Open Connection "28506924" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:18,962 [24] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:18,963 [24] DEBUG [(null)] - Close Connection "28506924" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:18,966 [24] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:18,968 [24] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926], @param1=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:18,970 [24] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:18,971 [24] DEBUG [(null)] - Open Connection "60627111" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:18,987 [24] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:18,988 [24] DEBUG [(null)] - Close Connection "60627111" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:18,990 [24] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  'dbbfed08-b13e-413d-82d3-714439657926','a3d5ca75-5726-437f-bad2-aeee4bbd1d90','2017/2/7 0:00:00','2017/2/7 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:18,991 [24] DEBUG [(null)] - Open Connection "16431664" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:19,024 [24] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:19,025 [24] DEBUG [(null)] - Close Connection "16431664" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:19,027 [24] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:19,028 [24] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926], @param1=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:19,029 [24] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:19,030 [24] DEBUG [(null)] - Open Connection "48985362" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:19,052 [24] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:19,054 [24] DEBUG [(null)] - Close Connection "48985362" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:19,055 [24] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:19,057 [24] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:19,058 [24] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:19,061 [24] DEBUG [(null)] - Open Connection "48574564" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:19,087 [24] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:19,090 [24] DEBUG [(null)] - Close Connection "48574564" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:20,179 [27] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User.QueryItem] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select
      isnull(email.id,0)valid_email,isnull(photo.id,0)valid_phone,isnull(master.companyname,db.[companyname])companyname

      ,db.[id_cyuser],db.[id_masteruser],db.[id],db.[username],db.[password],db.[name]
      ,db.[flag_sex],db.[id_father],db.[job],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[rq_start],db.[rq_stop],db.[flag_state],db.[flag_master],db.[bz],db.[id_province],db.[id_city],db.[id_county],db.[zipcode],db.[address],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[version],db.id_shop,db.flag_delete,db.[flag_industry],db.[companyno]
      ,p.name as name_province
      ,c.name as name_city
      ,county.name as name_county
      ,shop.mc as name_shop
      from  [tb_user]
      as db
      LEFT JOIN Tb_user master ON db.id_father=master.id
      left join Tb_Districts p on db.id_province =p.id
      left join Tb_Districts c on db.id_city =c.id
      left join  Tb_Districts county on db.id_county =county.id
      LEFT JOIN Tb_account photo ON photo.id_user=db.id AND photo.username=db.phone
      LEFT JOIN Tb_account email ON email.id_user=db.id AND email.username=db.email
      left join Tb_Shop shop on db.id_shop =shop.id
       where  db.[id]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:20,181 [27] DEBUG [(null)] - Statement Id: [Tb_User.QueryItem] Parameters: [@param0=[id,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:20,191 [27] DEBUG [(null)] - Statement Id: [Tb_User.QueryItem] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:20,193 [27] DEBUG [(null)] - Open Connection "51236968" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:20,214 [27] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:20,218 [27] DEBUG [(null)] - Close Connection "51236968" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:20,225 [27] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[flag_type],db.[id_masteruser],db.[flag_update],db.[name],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[role_describe] from  [Tb_role]
		  as db
			 where   
            (db.flag_type = 2 or db.id_masteruser =  @param0 )
           order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:20,227 [27] DEBUG [(null)] - Statement Id: [Tb_Role.QueryList] Parameters: [@param0=[_id_masteruser,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:20,230 [27] DEBUG [(null)] - Statement Id: [Tb_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:20,238 [27] DEBUG [(null)] - Open Connection "18415108" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:20,252 [27] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:20,254 [27] DEBUG [(null)] - Close Connection "18415108" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:20,255 [27] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:20,257 [27] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:20,258 [27] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:20,260 [27] DEBUG [(null)] - Open Connection "532450" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:20,278 [27] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:20,280 [27] DEBUG [(null)] - Close Connection "532450" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:28,300 [14] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:28,302 [14] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:28,305 [14] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:28,307 [14] DEBUG [(null)] - Open Connection "62422124" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:28,335 [14] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:28,337 [14] DEBUG [(null)] - Close Connection "62422124" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:28,339 [14] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:28,340 [14] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:28,341 [14] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:28,342 [14] DEBUG [(null)] - Open Connection "49653181" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:28,374 [14] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:28,376 [14] DEBUG [(null)] - Close Connection "49653181" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:28,385 [14] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:28,387 [14] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90], @param1=[lgrq,2017/2/7 0:00:00], @param2=[bgrq,2017/2/7 23:59:59], @param3=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:28,390 [14] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:28,391 [14] DEBUG [(null)] - Open Connection "8945217" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:28,405 [14] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:28,406 [14] DEBUG [(null)] - Close Connection "8945217" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:28,407 [14] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:28,409 [14] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90], @param1=[lgrq,2017/2/7 0:00:00], @param2=[bgrq,2017/2/7 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:28,410 [14] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:28,411 [14] DEBUG [(null)] - Open Connection "8787340" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:28,434 [14] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:28,436 [14] DEBUG [(null)] - Close Connection "8787340" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:28,438 [14] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:28,439 [14] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926], @param1=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:28,443 [14] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:28,444 [14] DEBUG [(null)] - Open Connection "66265708" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:28,466 [14] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:28,467 [14] DEBUG [(null)] - Close Connection "66265708" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:28,472 [14] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  'dbbfed08-b13e-413d-82d3-714439657926','a3d5ca75-5726-437f-bad2-aeee4bbd1d90','2017/2/7 0:00:00','2017/2/7 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:28,477 [14] DEBUG [(null)] - Open Connection "15676361" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:28,513 [14] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:28,517 [14] DEBUG [(null)] - Close Connection "15676361" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:28,523 [14] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:28,525 [14] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926], @param1=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:28,527 [14] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:28,530 [14] DEBUG [(null)] - Open Connection "16733946" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:28,558 [14] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:28,559 [14] DEBUG [(null)] - Close Connection "16733946" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:28,561 [14] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:28,562 [14] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:28,563 [14] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:28,565 [14] DEBUG [(null)] - Open Connection "14137803" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:28,587 [14] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:28,588 [14] DEBUG [(null)] - Close Connection "14137803" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:29,583 [24] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User.QueryItem] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select
      isnull(email.id,0)valid_email,isnull(photo.id,0)valid_phone,isnull(master.companyname,db.[companyname])companyname

      ,db.[id_cyuser],db.[id_masteruser],db.[id],db.[username],db.[password],db.[name]
      ,db.[flag_sex],db.[id_father],db.[job],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[rq_start],db.[rq_stop],db.[flag_state],db.[flag_master],db.[bz],db.[id_province],db.[id_city],db.[id_county],db.[zipcode],db.[address],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[version],db.id_shop,db.flag_delete,db.[flag_industry],db.[companyno]
      ,p.name as name_province
      ,c.name as name_city
      ,county.name as name_county
      ,shop.mc as name_shop
      from  [tb_user]
      as db
      LEFT JOIN Tb_user master ON db.id_father=master.id
      left join Tb_Districts p on db.id_province =p.id
      left join Tb_Districts c on db.id_city =c.id
      left join  Tb_Districts county on db.id_county =county.id
      LEFT JOIN Tb_account photo ON photo.id_user=db.id AND photo.username=db.phone
      LEFT JOIN Tb_account email ON email.id_user=db.id AND email.username=db.email
      left join Tb_Shop shop on db.id_shop =shop.id
       where  db.[id]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:29,584 [24] DEBUG [(null)] - Statement Id: [Tb_User.QueryItem] Parameters: [@param0=[id,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:29,587 [24] DEBUG [(null)] - Statement Id: [Tb_User.QueryItem] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:29,590 [24] DEBUG [(null)] - Open Connection "58249755" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:29,608 [24] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:29,610 [24] DEBUG [(null)] - Close Connection "58249755" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:29,612 [24] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[flag_type],db.[id_masteruser],db.[flag_update],db.[name],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[role_describe] from  [Tb_role]
		  as db
			 where   
            (db.flag_type = 2 or db.id_masteruser =  @param0 )
           order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:29,615 [24] DEBUG [(null)] - Statement Id: [Tb_Role.QueryList] Parameters: [@param0=[_id_masteruser,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:29,618 [24] DEBUG [(null)] - Statement Id: [Tb_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:29,621 [24] DEBUG [(null)] - Open Connection "44754126" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:29,639 [24] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:29,641 [24] DEBUG [(null)] - Close Connection "44754126" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:29,644 [24] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:29,650 [24] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:17:29,654 [24] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:29,655 [24] DEBUG [(null)] - Open Connection "23872885" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:29,669 [24] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:17:29,670 [24] DEBUG [(null)] - Close Connection "23872885" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:20:23,650 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:20:23,653 [9] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:20:23,662 [9] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:20:23,664 [9] DEBUG [(null)] - Open Connection "48665023" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:20:23,688 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:20:23,694 [9] DEBUG [(null)] - Close Connection "48665023" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:20:23,696 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:20:23,698 [9] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:20:23,699 [9] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:20:23,701 [9] DEBUG [(null)] - Open Connection "49108908" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:20:23,739 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:20:23,742 [9] DEBUG [(null)] - Close Connection "49108908" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:20:23,755 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:20:23,768 [9] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90], @param1=[lgrq,2017/2/7 0:00:00], @param2=[bgrq,2017/2/7 23:59:59], @param3=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:20:23,770 [9] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:20:23,772 [9] DEBUG [(null)] - Open Connection "199314" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:20:23,806 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:20:23,811 [9] DEBUG [(null)] - Close Connection "199314" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:20:23,813 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:20:23,815 [9] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90], @param1=[lgrq,2017/2/7 0:00:00], @param2=[bgrq,2017/2/7 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:20:23,817 [9] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:20:23,819 [9] DEBUG [(null)] - Open Connection "8171891" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:20:23,834 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:20:23,836 [9] DEBUG [(null)] - Close Connection "8171891" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:20:23,837 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:20:23,839 [9] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926], @param1=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:20:23,844 [9] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:20:23,847 [9] DEBUG [(null)] - Open Connection "66612087" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:20:23,864 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:20:23,866 [9] DEBUG [(null)] - Close Connection "66612087" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:20:23,867 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  'dbbfed08-b13e-413d-82d3-714439657926','a3d5ca75-5726-437f-bad2-aeee4bbd1d90','2017/2/7 0:00:00','2017/2/7 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:20:23,868 [9] DEBUG [(null)] - Open Connection "46741040" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:20:23,911 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:20:23,913 [9] DEBUG [(null)] - Close Connection "46741040" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:20:23,915 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:20:23,919 [9] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926], @param1=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:20:23,921 [9] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:20:23,924 [9] DEBUG [(null)] - Open Connection "37334487" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:20:23,944 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:20:23,946 [9] DEBUG [(null)] - Close Connection "37334487" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:20:23,947 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:20:23,948 [9] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:20:23,949 [9] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:20:23,950 [9] DEBUG [(null)] - Open Connection "54318989" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:20:23,974 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:20:23,975 [9] DEBUG [(null)] - Close Connection "54318989" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:20:25,179 [26] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User.QueryItem] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select
      isnull(email.id,0)valid_email,isnull(photo.id,0)valid_phone,isnull(master.companyname,db.[companyname])companyname

      ,db.[id_cyuser],db.[id_masteruser],db.[id],db.[username],db.[password],db.[name]
      ,db.[flag_sex],db.[id_father],db.[job],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[rq_start],db.[rq_stop],db.[flag_state],db.[flag_master],db.[bz],db.[id_province],db.[id_city],db.[id_county],db.[zipcode],db.[address],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[version],db.id_shop,db.flag_delete,db.[flag_industry],db.[companyno]
      ,p.name as name_province
      ,c.name as name_city
      ,county.name as name_county
      ,shop.mc as name_shop
      from  [tb_user]
      as db
      LEFT JOIN Tb_user master ON db.id_father=master.id
      left join Tb_Districts p on db.id_province =p.id
      left join Tb_Districts c on db.id_city =c.id
      left join  Tb_Districts county on db.id_county =county.id
      LEFT JOIN Tb_account photo ON photo.id_user=db.id AND photo.username=db.phone
      LEFT JOIN Tb_account email ON email.id_user=db.id AND email.username=db.email
      left join Tb_Shop shop on db.id_shop =shop.id
       where  db.[id]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:20:25,186 [26] DEBUG [(null)] - Statement Id: [Tb_User.QueryItem] Parameters: [@param0=[id,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:20:25,187 [26] DEBUG [(null)] - Statement Id: [Tb_User.QueryItem] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:20:25,189 [26] DEBUG [(null)] - Open Connection "197553" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:20:25,211 [26] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:20:25,212 [26] DEBUG [(null)] - Close Connection "197553" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:20:25,214 [26] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[flag_type],db.[id_masteruser],db.[flag_update],db.[name],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[role_describe] from  [Tb_role]
		  as db
			 where   
            (db.flag_type = 2 or db.id_masteruser =  @param0 )
           order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:20:25,216 [26] DEBUG [(null)] - Statement Id: [Tb_Role.QueryList] Parameters: [@param0=[_id_masteruser,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:20:25,218 [26] DEBUG [(null)] - Statement Id: [Tb_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:20:25,220 [26] DEBUG [(null)] - Open Connection "21533334" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:20:25,244 [26] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:20:25,245 [26] DEBUG [(null)] - Close Connection "21533334" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:20:25,247 [26] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:20:25,249 [26] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:20:25,251 [26] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:20:25,253 [26] DEBUG [(null)] - Open Connection "65432130" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:20:25,271 [26] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:20:25,273 [26] DEBUG [(null)] - Close Connection "65432130" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:24:16,723 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:24:16,724 [9] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:24:16,726 [9] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:24:16,727 [9] DEBUG [(null)] - Open Connection "63179900" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:24:16,742 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:24:16,743 [9] DEBUG [(null)] - Close Connection "63179900" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:24:16,745 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:24:16,748 [9] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:24:16,767 [9] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:24:16,769 [9] DEBUG [(null)] - Open Connection "40239072" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:24:16,803 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:24:16,805 [9] DEBUG [(null)] - Close Connection "40239072" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:24:16,816 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:24:16,817 [9] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90], @param1=[lgrq,2017/2/7 0:00:00], @param2=[bgrq,2017/2/7 23:59:59], @param3=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:24:16,819 [9] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:24:16,821 [9] DEBUG [(null)] - Open Connection "39189236" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:24:16,844 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:24:16,846 [9] DEBUG [(null)] - Close Connection "39189236" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:24:16,849 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:24:16,850 [9] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90], @param1=[lgrq,2017/2/7 0:00:00], @param2=[bgrq,2017/2/7 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:24:16,852 [9] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:24:16,854 [9] DEBUG [(null)] - Open Connection "63254825" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:24:16,871 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:24:16,874 [9] DEBUG [(null)] - Close Connection "63254825" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:24:16,877 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:24:16,879 [9] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926], @param1=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:24:16,884 [9] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:24:16,886 [9] DEBUG [(null)] - Open Connection "43310999" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:24:16,899 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:24:16,900 [9] DEBUG [(null)] - Close Connection "43310999" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:24:16,904 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  'dbbfed08-b13e-413d-82d3-714439657926','a3d5ca75-5726-437f-bad2-aeee4bbd1d90','2017/2/7 0:00:00','2017/2/7 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:24:16,905 [9] DEBUG [(null)] - Open Connection "30920512" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:24:16,951 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:24:16,952 [9] DEBUG [(null)] - Close Connection "30920512" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:24:16,953 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:24:16,955 [9] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926], @param1=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:24:16,956 [9] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:24:16,957 [9] DEBUG [(null)] - Open Connection "59781452" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:24:16,977 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:24:16,978 [9] DEBUG [(null)] - Close Connection "59781452" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:24:16,981 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:24:16,983 [9] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:24:16,985 [9] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:24:16,987 [9] DEBUG [(null)] - Open Connection "35120461" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:24:17,010 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:24:17,018 [9] DEBUG [(null)] - Close Connection "35120461" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:24:18,184 [28] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User.QueryItem] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select
      isnull(email.id,0)valid_email,isnull(photo.id,0)valid_phone,isnull(master.companyname,db.[companyname])companyname

      ,db.[id_cyuser],db.[id_masteruser],db.[id],db.[username],db.[password],db.[name]
      ,db.[flag_sex],db.[id_father],db.[job],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[rq_start],db.[rq_stop],db.[flag_state],db.[flag_master],db.[bz],db.[id_province],db.[id_city],db.[id_county],db.[zipcode],db.[address],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[version],db.id_shop,db.flag_delete,db.[flag_industry],db.[companyno]
      ,p.name as name_province
      ,c.name as name_city
      ,county.name as name_county
      ,shop.mc as name_shop
      from  [tb_user]
      as db
      LEFT JOIN Tb_user master ON db.id_father=master.id
      left join Tb_Districts p on db.id_province =p.id
      left join Tb_Districts c on db.id_city =c.id
      left join  Tb_Districts county on db.id_county =county.id
      LEFT JOIN Tb_account photo ON photo.id_user=db.id AND photo.username=db.phone
      LEFT JOIN Tb_account email ON email.id_user=db.id AND email.username=db.email
      left join Tb_Shop shop on db.id_shop =shop.id
       where  db.[id]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:24:18,185 [28] DEBUG [(null)] - Statement Id: [Tb_User.QueryItem] Parameters: [@param0=[id,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:24:18,186 [28] DEBUG [(null)] - Statement Id: [Tb_User.QueryItem] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:24:18,188 [28] DEBUG [(null)] - Open Connection "36237215" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:24:18,204 [28] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:24:18,205 [28] DEBUG [(null)] - Close Connection "36237215" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:24:18,206 [28] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[flag_type],db.[id_masteruser],db.[flag_update],db.[name],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[role_describe] from  [Tb_role]
		  as db
			 where   
            (db.flag_type = 2 or db.id_masteruser =  @param0 )
           order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:24:18,208 [28] DEBUG [(null)] - Statement Id: [Tb_Role.QueryList] Parameters: [@param0=[_id_masteruser,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:24:18,209 [28] DEBUG [(null)] - Statement Id: [Tb_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:24:18,211 [28] DEBUG [(null)] - Open Connection "11895754" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:24:18,232 [28] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:24:18,236 [28] DEBUG [(null)] - Close Connection "11895754" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:24:18,238 [28] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:24:18,239 [28] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:24:18,240 [28] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:24:18,242 [28] DEBUG [(null)] - Open Connection "49625948" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:24:18,263 [28] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:24:18,265 [28] DEBUG [(null)] - Close Connection "49625948" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:26:38,259 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:26:38,261 [25] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:26:38,262 [25] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:26:38,264 [25] DEBUG [(null)] - Open Connection "11438628" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:26:38,285 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:26:38,286 [25] DEBUG [(null)] - Close Connection "11438628" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:26:38,288 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:26:38,291 [25] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:26:38,292 [25] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:26:38,294 [25] DEBUG [(null)] - Open Connection "60205322" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:26:38,332 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:26:38,334 [25] DEBUG [(null)] - Close Connection "60205322" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:26:38,345 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:26:38,347 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90], @param1=[lgrq,2017/2/7 0:00:00], @param2=[bgrq,2017/2/7 23:59:59], @param3=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:26:38,349 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:26:38,351 [25] DEBUG [(null)] - Open Connection "13325653" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:26:38,366 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:26:38,367 [25] DEBUG [(null)] - Close Connection "13325653" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:26:38,368 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:26:38,370 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90], @param1=[lgrq,2017/2/7 0:00:00], @param2=[bgrq,2017/2/7 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:26:38,372 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:26:38,373 [25] DEBUG [(null)] - Open Connection "57016293" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:26:38,398 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:26:38,400 [25] DEBUG [(null)] - Close Connection "57016293" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:26:38,401 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:26:38,403 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926], @param1=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:26:38,405 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:26:38,406 [25] DEBUG [(null)] - Open Connection "14021891" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:26:38,424 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:26:38,426 [25] DEBUG [(null)] - Close Connection "14021891" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:26:38,428 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  'dbbfed08-b13e-413d-82d3-714439657926','a3d5ca75-5726-437f-bad2-aeee4bbd1d90','2017/2/7 0:00:00','2017/2/7 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:26:38,431 [25] DEBUG [(null)] - Open Connection "63012514" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:26:38,479 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:26:38,482 [25] DEBUG [(null)] - Close Connection "63012514" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:26:38,486 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:26:38,497 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926], @param1=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:26:38,499 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:26:38,501 [25] DEBUG [(null)] - Open Connection "39645337" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:26:38,539 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:26:38,541 [25] DEBUG [(null)] - Close Connection "39645337" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:26:38,546 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:26:38,548 [25] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:26:38,549 [25] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:26:38,550 [25] DEBUG [(null)] - Open Connection "2010858" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:26:38,576 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:26:38,578 [25] DEBUG [(null)] - Close Connection "2010858" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:26:39,771 [22] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User.QueryItem] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select
      isnull(email.id,0)valid_email,isnull(photo.id,0)valid_phone,isnull(master.companyname,db.[companyname])companyname

      ,db.[id_cyuser],db.[id_masteruser],db.[id],db.[username],db.[password],db.[name]
      ,db.[flag_sex],db.[id_father],db.[job],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[rq_start],db.[rq_stop],db.[flag_state],db.[flag_master],db.[bz],db.[id_province],db.[id_city],db.[id_county],db.[zipcode],db.[address],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[version],db.id_shop,db.flag_delete,db.[flag_industry],db.[companyno]
      ,p.name as name_province
      ,c.name as name_city
      ,county.name as name_county
      ,shop.mc as name_shop
      from  [tb_user]
      as db
      LEFT JOIN Tb_user master ON db.id_father=master.id
      left join Tb_Districts p on db.id_province =p.id
      left join Tb_Districts c on db.id_city =c.id
      left join  Tb_Districts county on db.id_county =county.id
      LEFT JOIN Tb_account photo ON photo.id_user=db.id AND photo.username=db.phone
      LEFT JOIN Tb_account email ON email.id_user=db.id AND email.username=db.email
      left join Tb_Shop shop on db.id_shop =shop.id
       where  db.[id]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:26:39,772 [22] DEBUG [(null)] - Statement Id: [Tb_User.QueryItem] Parameters: [@param0=[id,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:26:39,783 [22] DEBUG [(null)] - Statement Id: [Tb_User.QueryItem] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:26:39,785 [22] DEBUG [(null)] - Open Connection "37907890" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:26:39,805 [22] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:26:39,806 [22] DEBUG [(null)] - Close Connection "37907890" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:26:39,811 [22] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[flag_type],db.[id_masteruser],db.[flag_update],db.[name],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[role_describe] from  [Tb_role]
		  as db
			 where   
            (db.flag_type = 2 or db.id_masteruser =  @param0 )
           order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:26:39,813 [22] DEBUG [(null)] - Statement Id: [Tb_Role.QueryList] Parameters: [@param0=[_id_masteruser,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:26:39,815 [22] DEBUG [(null)] - Statement Id: [Tb_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:26:39,817 [22] DEBUG [(null)] - Open Connection "35772903" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:26:39,844 [22] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:26:39,849 [22] DEBUG [(null)] - Close Connection "35772903" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:26:39,852 [22] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:26:39,853 [22] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:26:39,858 [22] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:26:39,861 [22] DEBUG [(null)] - Open Connection "38545647" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:26:39,880 [22] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:26:39,881 [22] DEBUG [(null)] - Close Connection "38545647" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:31:11,454 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:31:11,456 [17] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:31:11,459 [17] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:31:11,462 [17] DEBUG [(null)] - Open Connection "23254293" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:31:11,480 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:31:11,482 [17] DEBUG [(null)] - Close Connection "23254293" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:31:11,484 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:31:11,486 [17] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:31:11,489 [17] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:31:11,493 [17] DEBUG [(null)] - Open Connection "19841842" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:31:11,527 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:31:11,528 [17] DEBUG [(null)] - Close Connection "19841842" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:31:11,538 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:31:11,539 [17] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90], @param1=[lgrq,2017/2/7 0:00:00], @param2=[bgrq,2017/2/7 23:59:59], @param3=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:31:11,541 [17] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:31:11,543 [17] DEBUG [(null)] - Open Connection "39168367" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:31:11,561 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:31:11,568 [17] DEBUG [(null)] - Close Connection "39168367" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:31:11,570 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:31:11,572 [17] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90], @param1=[lgrq,2017/2/7 0:00:00], @param2=[bgrq,2017/2/7 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:31:11,573 [17] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:31:11,577 [17] DEBUG [(null)] - Open Connection "40718549" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:31:11,606 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:31:11,607 [17] DEBUG [(null)] - Close Connection "40718549" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:31:11,611 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:31:11,613 [17] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926], @param1=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:31:11,615 [17] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:31:11,616 [17] DEBUG [(null)] - Open Connection "19664118" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:31:11,631 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:31:11,632 [17] DEBUG [(null)] - Close Connection "19664118" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:31:11,633 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  'dbbfed08-b13e-413d-82d3-714439657926','a3d5ca75-5726-437f-bad2-aeee4bbd1d90','2017/2/7 0:00:00','2017/2/7 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:31:11,635 [17] DEBUG [(null)] - Open Connection "26194473" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:31:11,666 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:31:11,667 [17] DEBUG [(null)] - Close Connection "26194473" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:31:11,669 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:31:11,670 [17] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926], @param1=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:31:11,671 [17] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:31:11,675 [17] DEBUG [(null)] - Open Connection "33148368" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:31:11,707 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:31:11,709 [17] DEBUG [(null)] - Close Connection "33148368" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:31:11,712 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:31:11,713 [17] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:31:11,714 [17] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:31:11,716 [17] DEBUG [(null)] - Open Connection "3911829" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:31:11,743 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:31:11,744 [17] DEBUG [(null)] - Close Connection "3911829" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:31:12,673 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User.QueryItem] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select
      isnull(email.id,0)valid_email,isnull(photo.id,0)valid_phone,isnull(master.companyname,db.[companyname])companyname

      ,db.[id_cyuser],db.[id_masteruser],db.[id],db.[username],db.[password],db.[name]
      ,db.[flag_sex],db.[id_father],db.[job],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[rq_start],db.[rq_stop],db.[flag_state],db.[flag_master],db.[bz],db.[id_province],db.[id_city],db.[id_county],db.[zipcode],db.[address],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[version],db.id_shop,db.flag_delete,db.[flag_industry],db.[companyno]
      ,p.name as name_province
      ,c.name as name_city
      ,county.name as name_county
      ,shop.mc as name_shop
      from  [tb_user]
      as db
      LEFT JOIN Tb_user master ON db.id_father=master.id
      left join Tb_Districts p on db.id_province =p.id
      left join Tb_Districts c on db.id_city =c.id
      left join  Tb_Districts county on db.id_county =county.id
      LEFT JOIN Tb_account photo ON photo.id_user=db.id AND photo.username=db.phone
      LEFT JOIN Tb_account email ON email.id_user=db.id AND email.username=db.email
      left join Tb_Shop shop on db.id_shop =shop.id
       where  db.[id]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:31:12,675 [6] DEBUG [(null)] - Statement Id: [Tb_User.QueryItem] Parameters: [@param0=[id,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:31:12,678 [6] DEBUG [(null)] - Statement Id: [Tb_User.QueryItem] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:31:12,679 [6] DEBUG [(null)] - Open Connection "32511436" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:31:12,713 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:31:12,719 [6] DEBUG [(null)] - Close Connection "32511436" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:31:12,721 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[flag_type],db.[id_masteruser],db.[flag_update],db.[name],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[role_describe] from  [Tb_role]
		  as db
			 where   
            (db.flag_type = 2 or db.id_masteruser =  @param0 )
           order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:31:12,723 [6] DEBUG [(null)] - Statement Id: [Tb_Role.QueryList] Parameters: [@param0=[_id_masteruser,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:31:12,725 [6] DEBUG [(null)] - Statement Id: [Tb_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:31:12,726 [6] DEBUG [(null)] - Open Connection "3307555" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:31:12,753 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:31:12,755 [6] DEBUG [(null)] - Close Connection "3307555" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:31:12,757 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:31:12,760 [6] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:31:12,761 [6] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:31:12,770 [6] DEBUG [(null)] - Open Connection "28810251" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:31:12,799 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:31:12,808 [6] DEBUG [(null)] - Close Connection "28810251" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:32:12,607 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:32:12,609 [11] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:32:12,612 [11] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:32:12,615 [11] DEBUG [(null)] - Open Connection "63652843" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:32:12,630 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:32:12,631 [11] DEBUG [(null)] - Close Connection "63652843" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:32:12,633 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:32:12,634 [11] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:32:12,635 [11] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:32:12,637 [11] DEBUG [(null)] - Open Connection "31981580" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:32:12,671 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:32:12,673 [11] DEBUG [(null)] - Close Connection "31981580" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:32:12,686 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:32:12,687 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90], @param1=[lgrq,2017/2/7 0:00:00], @param2=[bgrq,2017/2/7 23:59:59], @param3=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:32:12,689 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:32:12,690 [11] DEBUG [(null)] - Open Connection "23593578" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:32:12,705 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:32:12,706 [11] DEBUG [(null)] - Close Connection "23593578" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:32:12,707 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:32:12,709 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90], @param1=[lgrq,2017/2/7 0:00:00], @param2=[bgrq,2017/2/7 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:32:12,710 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:32:12,712 [11] DEBUG [(null)] - Open Connection "15234665" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:32:12,745 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:32:12,753 [11] DEBUG [(null)] - Close Connection "15234665" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:32:12,756 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:32:12,758 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926], @param1=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:32:12,765 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:32:12,769 [11] DEBUG [(null)] - Open Connection "8301100" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:32:12,802 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:32:12,803 [11] DEBUG [(null)] - Close Connection "8301100" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:32:12,805 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  'dbbfed08-b13e-413d-82d3-714439657926','a3d5ca75-5726-437f-bad2-aeee4bbd1d90','2017/2/7 0:00:00','2017/2/7 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:32:12,809 [11] DEBUG [(null)] - Open Connection "4100761" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:32:12,839 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:32:12,841 [11] DEBUG [(null)] - Close Connection "4100761" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:32:12,842 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:32:12,845 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926], @param1=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:32:12,849 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:32:12,851 [11] DEBUG [(null)] - Open Connection "66719570" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:32:12,868 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:32:12,869 [11] DEBUG [(null)] - Close Connection "66719570" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:32:12,872 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:32:12,873 [11] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:32:12,875 [11] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:32:12,876 [11] DEBUG [(null)] - Open Connection "48033467" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:32:12,900 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:32:12,902 [11] DEBUG [(null)] - Close Connection "48033467" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:32:13,909 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User.QueryItem] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select
      isnull(email.id,0)valid_email,isnull(photo.id,0)valid_phone,isnull(master.companyname,db.[companyname])companyname

      ,db.[id_cyuser],db.[id_masteruser],db.[id],db.[username],db.[password],db.[name]
      ,db.[flag_sex],db.[id_father],db.[job],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[rq_start],db.[rq_stop],db.[flag_state],db.[flag_master],db.[bz],db.[id_province],db.[id_city],db.[id_county],db.[zipcode],db.[address],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[version],db.id_shop,db.flag_delete,db.[flag_industry],db.[companyno]
      ,p.name as name_province
      ,c.name as name_city
      ,county.name as name_county
      ,shop.mc as name_shop
      from  [tb_user]
      as db
      LEFT JOIN Tb_user master ON db.id_father=master.id
      left join Tb_Districts p on db.id_province =p.id
      left join Tb_Districts c on db.id_city =c.id
      left join  Tb_Districts county on db.id_county =county.id
      LEFT JOIN Tb_account photo ON photo.id_user=db.id AND photo.username=db.phone
      LEFT JOIN Tb_account email ON email.id_user=db.id AND email.username=db.email
      left join Tb_Shop shop on db.id_shop =shop.id
       where  db.[id]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:32:13,913 [9] DEBUG [(null)] - Statement Id: [Tb_User.QueryItem] Parameters: [@param0=[id,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:32:13,915 [9] DEBUG [(null)] - Statement Id: [Tb_User.QueryItem] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:32:13,916 [9] DEBUG [(null)] - Open Connection "8812433" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:32:13,950 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:32:13,958 [9] DEBUG [(null)] - Close Connection "8812433" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:32:13,962 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[flag_type],db.[id_masteruser],db.[flag_update],db.[name],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[role_describe] from  [Tb_role]
		  as db
			 where   
            (db.flag_type = 2 or db.id_masteruser =  @param0 )
           order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:32:13,965 [9] DEBUG [(null)] - Statement Id: [Tb_Role.QueryList] Parameters: [@param0=[_id_masteruser,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:32:13,966 [9] DEBUG [(null)] - Statement Id: [Tb_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:32:13,971 [9] DEBUG [(null)] - Open Connection "25765470" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:32:13,988 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:32:13,990 [9] DEBUG [(null)] - Close Connection "25765470" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:32:13,991 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:32:13,993 [9] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:32:13,995 [9] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:32:13,996 [9] DEBUG [(null)] - Open Connection "49751317" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:32:14,017 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:32:14,018 [9] DEBUG [(null)] - Close Connection "49751317" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:30,690 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:30,702 [10] DEBUG [(null)] - Close Connection "62847242" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:30,704 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:30,705 [10] DEBUG [(null)] - Close Connection "9553613" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:30,731 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:30,732 [10] DEBUG [(null)] - Close Connection "43276832" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:30,756 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:30,757 [10] DEBUG [(null)] - Close Connection "21991687" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:30,759 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:30,760 [10] DEBUG [(null)] - Close Connection "50101828" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:30,774 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:30,775 [10] DEBUG [(null)] - Close Connection "57996730" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:30,777 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:30,780 [10] DEBUG [(null)] - Close Connection "59716053" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:30,782 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:30,784 [10] DEBUG [(null)] - Close Connection "2867864" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:30,787 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:30,788 [10] DEBUG [(null)] - Close Connection "61945033" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:30,790 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:30,791 [10] DEBUG [(null)] - Close Connection "36063087" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:30,795 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:30,797 [10] DEBUG [(null)] - Close Connection "12226212" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:30,824 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:30,826 [10] DEBUG [(null)] - Close Connection "59076815" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:30,829 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:30,830 [10] DEBUG [(null)] - Close Connection "35995713" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:30,833 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:30,834 [10] DEBUG [(null)] - Close Connection "9194374" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:30,857 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:30,858 [10] DEBUG [(null)] - Close Connection "2998781" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:30,859 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:30,860 [10] DEBUG [(null)] - Close Connection "727444" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:30,861 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:30,862 [10] DEBUG [(null)] - Close Connection "32734999" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:30,867 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:30,868 [10] DEBUG [(null)] - Close Connection "42870272" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:30,883 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:30,884 [10] DEBUG [(null)] - Close Connection "41984549" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:30,900 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:30,902 [10] DEBUG [(null)] - Close Connection "44436558" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:30,904 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:30,905 [10] DEBUG [(null)] - Close Connection "53488077" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:30,907 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:30,908 [10] DEBUG [(null)] - Close Connection "66758736" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:30,909 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:30,910 [10] DEBUG [(null)] - Close Connection "51353134" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:30,912 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:30,915 [10] DEBUG [(null)] - Close Connection "53335915" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:30,932 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:30,935 [10] DEBUG [(null)] - Close Connection "5160954" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:55:32,911 [10] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:55:32,915 [10] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:55:32,916 [10] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:32,959 [10] DEBUG [(null)] - Open Connection "43498900" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:33,015 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:33,019 [10] DEBUG [(null)] - Close Connection "43498900" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:55:33,030 [10] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:55:33,032 [10] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:55:33,033 [10] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:33,034 [10] DEBUG [(null)] - Open Connection "52261630" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:34,202 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:34,204 [10] DEBUG [(null)] - Close Connection "52261630" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:55:34,222 [10] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:55:34,224 [10] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90], @param1=[lgrq,2017/2/7 0:00:00], @param2=[bgrq,2017/2/7 23:59:59], @param3=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:55:34,225 [10] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:34,227 [10] DEBUG [(null)] - Open Connection "66231434" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:34,249 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:34,250 [10] DEBUG [(null)] - Close Connection "66231434" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:55:34,252 [10] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:55:34,254 [10] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90], @param1=[lgrq,2017/2/7 0:00:00], @param2=[bgrq,2017/2/7 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:55:34,255 [10] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:34,256 [10] DEBUG [(null)] - Open Connection "27624548" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:34,278 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:34,279 [10] DEBUG [(null)] - Close Connection "27624548" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:55:34,281 [10] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:55:34,282 [10] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926], @param1=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:55:34,284 [10] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:34,285 [10] DEBUG [(null)] - Open Connection "35145129" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:34,300 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:34,301 [10] DEBUG [(null)] - Close Connection "35145129" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:55:34,303 [10] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  'dbbfed08-b13e-413d-82d3-714439657926','a3d5ca75-5726-437f-bad2-aeee4bbd1d90','2017/2/7 0:00:00','2017/2/7 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:34,304 [10] DEBUG [(null)] - Open Connection "38026937" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:34,340 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:34,341 [10] DEBUG [(null)] - Close Connection "38026937" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:55:34,343 [10] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:55:34,344 [10] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926], @param1=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:55:34,345 [10] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:34,346 [10] DEBUG [(null)] - Open Connection "33490607" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:34,365 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:34,366 [10] DEBUG [(null)] - Close Connection "33490607" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:55:34,368 [10] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:55:34,369 [10] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:55:34,370 [10] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:34,372 [10] DEBUG [(null)] - Open Connection "38526947" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:34,393 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:34,394 [10] DEBUG [(null)] - Close Connection "38526947" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:55:34,406 [10] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User.GetItem] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select  db.[id_cyuser],db.[id_masteruser],db.[id],db.[username],db.[password],db.[name],isnull(master.companyname,db.[companyname])companyname,db.[flag_sex],db.[id_father],db.[job],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[rq_start],db.[rq_stop],db.[flag_state],db.[flag_master],db.[bz],db.[id_province],db.[id_city],db.[id_county],db.[zipcode],db.[address],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[version],db.flag_delete,db.[flag_industry],db.[companyno]
      ,db.id_shop
      from  [tb_user]
      as db
      LEFT JOIN Tb_user master ON db.id_father=master.id
       where  db.[id]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:55:34,407 [10] DEBUG [(null)] - Statement Id: [Tb_User.GetItem] Parameters: [@param0=[id,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:55:34,408 [10] DEBUG [(null)] - Statement Id: [Tb_User.GetItem] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:34,409 [10] DEBUG [(null)] - Open Connection "36567802" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:34,434 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:34,435 [10] DEBUG [(null)] - Close Connection "36567802" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:55:34,437 [10] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:55:34,438 [10] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:55:34,439 [10] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:34,440 [10] DEBUG [(null)] - Open Connection "34938382" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:34,457 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:34,458 [10] DEBUG [(null)] - Close Connection "34938382" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:55:34,460 [10] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  
					db.[flag_type] in  (  @param0 ,   @param1 ) and db.[flag_stop]= @param2  and 
					exists(
					select 1 from Tb_function as fun
					where
					fun.flag_stop = 0
					 and 
						exists(select 1 from Tb_role_function as rf where rf.id_function = fun.id and rf.id_role in  (  @param3 ,   @param4 ,   @param5 ,   @param6 ) )
					 
					and (db.path+'/' like fun.path+'/%' or fun.path+'/' like db.path+'/%')
					)
				 order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:55:34,461 [10] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_typeList[0],controller], @param1=[flag_typeList[1],action], @param2=[flag_stop,0], @param3=[id_roleList[0],], @param4=[id_roleList[1],1], @param5=[id_roleList[2],2], @param6=[id_roleList[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:55:34,462 [10] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[Int32, System.Int32], @param3=[String, System.String], @param4=[String, System.String], @param5=[String, System.String], @param6=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:34,465 [10] DEBUG [(null)] - Open Connection "48519645" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:34,539 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:34,541 [10] DEBUG [(null)] - Close Connection "48519645" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:55:34,546 [10] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param0 ,   @param1 ,   @param2 ,   @param3 ) )
         order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:55:34,549 [10] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[rolelist[0],], @param1=[rolelist[1],1], @param2=[rolelist[2],2], @param3=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:55:34,552 [10] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:34,557 [10] DEBUG [(null)] - Open Connection "35900380" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:34,589 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:34,591 [10] DEBUG [(null)] - Close Connection "35900380" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:55:36,660 [48] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User.QueryItem] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select
      isnull(email.id,0)valid_email,isnull(photo.id,0)valid_phone,isnull(master.companyname,db.[companyname])companyname

      ,db.[id_cyuser],db.[id_masteruser],db.[id],db.[username],db.[password],db.[name]
      ,db.[flag_sex],db.[id_father],db.[job],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[rq_start],db.[rq_stop],db.[flag_state],db.[flag_master],db.[bz],db.[id_province],db.[id_city],db.[id_county],db.[zipcode],db.[address],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[version],db.id_shop,db.flag_delete,db.[flag_industry],db.[companyno]
      ,p.name as name_province
      ,c.name as name_city
      ,county.name as name_county
      ,shop.mc as name_shop
      from  [tb_user]
      as db
      LEFT JOIN Tb_user master ON db.id_father=master.id
      left join Tb_Districts p on db.id_province =p.id
      left join Tb_Districts c on db.id_city =c.id
      left join  Tb_Districts county on db.id_county =county.id
      LEFT JOIN Tb_account photo ON photo.id_user=db.id AND photo.username=db.phone
      LEFT JOIN Tb_account email ON email.id_user=db.id AND email.username=db.email
      left join Tb_Shop shop on db.id_shop =shop.id
       where  db.[id]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:55:36,662 [48] DEBUG [(null)] - Statement Id: [Tb_User.QueryItem] Parameters: [@param0=[id,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:55:36,663 [48] DEBUG [(null)] - Statement Id: [Tb_User.QueryItem] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:36,664 [48] DEBUG [(null)] - Open Connection "46057968" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:36,695 [48] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:36,696 [48] DEBUG [(null)] - Close Connection "46057968" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:55:36,699 [48] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[flag_type],db.[id_masteruser],db.[flag_update],db.[name],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[role_describe] from  [Tb_role]
		  as db
			 where   
            (db.flag_type = 2 or db.id_masteruser =  @param0 )
           order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:55:36,700 [48] DEBUG [(null)] - Statement Id: [Tb_Role.QueryList] Parameters: [@param0=[_id_masteruser,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:55:36,701 [48] DEBUG [(null)] - Statement Id: [Tb_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:36,703 [48] DEBUG [(null)] - Open Connection "13723231" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:36,744 [48] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:36,745 [48] DEBUG [(null)] - Close Connection "13723231" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:55:36,746 [48] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:55:36,748 [48] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:55:36,749 [48] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:36,751 [48] DEBUG [(null)] - Open Connection "19122039" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:36,763 [48] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:55:36,765 [48] DEBUG [(null)] - Close Connection "19122039" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:37,558 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:37,570 [49] DEBUG [(null)] - Close Connection "45733" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:37,572 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:37,573 [49] DEBUG [(null)] - Close Connection "9192446" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:37,591 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:37,593 [49] DEBUG [(null)] - Close Connection "30988079" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:37,648 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:37,653 [49] DEBUG [(null)] - Close Connection "28300695" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:37,655 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:37,656 [49] DEBUG [(null)] - Close Connection "51295213" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:37,664 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:37,666 [49] DEBUG [(null)] - Close Connection "23078721" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:37,667 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:37,669 [49] DEBUG [(null)] - Close Connection "8311414" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:37,670 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:37,672 [49] DEBUG [(null)] - Close Connection "59981666" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:37,673 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:37,674 [49] DEBUG [(null)] - Close Connection "43828301" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:37,676 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:37,677 [49] DEBUG [(null)] - Close Connection "18227335" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:37,679 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:37,681 [49] DEBUG [(null)] - Close Connection "39815851" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:37,706 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:37,708 [49] DEBUG [(null)] - Close Connection "40455188" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:37,712 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:37,713 [49] DEBUG [(null)] - Close Connection "10010266" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:37,715 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:37,717 [49] DEBUG [(null)] - Close Connection "65906460" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:37,743 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:37,745 [49] DEBUG [(null)] - Close Connection "14922015" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:37,747 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:37,748 [49] DEBUG [(null)] - Close Connection "46535096" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:37,750 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:37,751 [49] DEBUG [(null)] - Close Connection "25422275" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:37,756 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:37,757 [49] DEBUG [(null)] - Close Connection "46469002" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:37,780 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:37,783 [49] DEBUG [(null)] - Close Connection "5804321" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:37,800 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:37,801 [49] DEBUG [(null)] - Close Connection "5597235" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:37,802 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:37,803 [49] DEBUG [(null)] - Close Connection "51302577" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:37,805 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:37,806 [49] DEBUG [(null)] - Close Connection "18167678" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:37,808 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:37,809 [49] DEBUG [(null)] - Close Connection "27824647" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:37,810 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:37,811 [49] DEBUG [(null)] - Close Connection "63770864" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:37,818 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:37,819 [49] DEBUG [(null)] - Close Connection "26733677" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:58:39,926 [49] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:58:39,930 [49] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:58:39,932 [49] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:39,952 [49] DEBUG [(null)] - Open Connection "41544415" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:40,010 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:40,031 [49] DEBUG [(null)] - Close Connection "41544415" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:58:40,037 [49] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:58:40,038 [49] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:58:40,040 [49] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:40,041 [49] DEBUG [(null)] - Open Connection "32564103" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:40,073 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:40,075 [49] DEBUG [(null)] - Close Connection "32564103" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:58:40,093 [49] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:58:40,095 [49] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90], @param1=[lgrq,2017/2/7 0:00:00], @param2=[bgrq,2017/2/7 23:59:59], @param3=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:58:40,096 [49] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:40,098 [49] DEBUG [(null)] - Open Connection "20182594" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:40,117 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:40,119 [49] DEBUG [(null)] - Close Connection "20182594" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:58:40,121 [49] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:58:40,122 [49] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90], @param1=[lgrq,2017/2/7 0:00:00], @param2=[bgrq,2017/2/7 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:58:40,123 [49] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:40,125 [49] DEBUG [(null)] - Open Connection "30169670" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:40,146 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:40,147 [49] DEBUG [(null)] - Close Connection "30169670" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:58:40,150 [49] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:58:40,153 [49] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926], @param1=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:58:40,155 [49] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:40,157 [49] DEBUG [(null)] - Open Connection "24305953" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:40,184 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:40,187 [49] DEBUG [(null)] - Close Connection "24305953" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:58:40,193 [49] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  'dbbfed08-b13e-413d-82d3-714439657926','a3d5ca75-5726-437f-bad2-aeee4bbd1d90','2017/2/7 0:00:00','2017/2/7 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:40,195 [49] DEBUG [(null)] - Open Connection "53658542" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:40,224 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:40,225 [49] DEBUG [(null)] - Close Connection "53658542" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:58:40,227 [49] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:58:40,228 [49] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926], @param1=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:58:40,229 [49] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:40,231 [49] DEBUG [(null)] - Open Connection "47948877" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:40,257 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:40,258 [49] DEBUG [(null)] - Close Connection "47948877" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:58:40,260 [49] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:58:40,262 [49] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:58:40,263 [49] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:40,265 [49] DEBUG [(null)] - Open Connection "18147438" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:40,286 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:40,288 [49] DEBUG [(null)] - Close Connection "18147438" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:58:40,299 [49] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User.GetItem] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select  db.[id_cyuser],db.[id_masteruser],db.[id],db.[username],db.[password],db.[name],isnull(master.companyname,db.[companyname])companyname,db.[flag_sex],db.[id_father],db.[job],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[rq_start],db.[rq_stop],db.[flag_state],db.[flag_master],db.[bz],db.[id_province],db.[id_city],db.[id_county],db.[zipcode],db.[address],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[version],db.flag_delete,db.[flag_industry],db.[companyno]
      ,db.id_shop
      from  [tb_user]
      as db
      LEFT JOIN Tb_user master ON db.id_father=master.id
       where  db.[id]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:58:40,300 [49] DEBUG [(null)] - Statement Id: [Tb_User.GetItem] Parameters: [@param0=[id,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:58:40,302 [49] DEBUG [(null)] - Statement Id: [Tb_User.GetItem] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:40,303 [49] DEBUG [(null)] - Open Connection "10315435" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:40,327 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:40,328 [49] DEBUG [(null)] - Close Connection "10315435" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:58:40,330 [49] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:58:40,331 [49] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:58:40,333 [49] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:40,334 [49] DEBUG [(null)] - Open Connection "60136555" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:40,352 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:40,353 [49] DEBUG [(null)] - Close Connection "60136555" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:58:40,355 [49] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  
					db.[flag_type] in  (  @param0 ,   @param1 ) and db.[flag_stop]= @param2  and 
					exists(
					select 1 from Tb_function as fun
					where
					fun.flag_stop = 0
					 and 
						exists(select 1 from Tb_role_function as rf where rf.id_function = fun.id and rf.id_role in  (  @param3 ,   @param4 ,   @param5 ,   @param6 ) )
					 
					and (db.path+'/' like fun.path+'/%' or fun.path+'/' like db.path+'/%')
					)
				 order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:58:40,356 [49] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_typeList[0],controller], @param1=[flag_typeList[1],action], @param2=[flag_stop,0], @param3=[id_roleList[0],], @param4=[id_roleList[1],1], @param5=[id_roleList[2],2], @param6=[id_roleList[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:58:40,358 [49] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[Int32, System.Int32], @param3=[String, System.String], @param4=[String, System.String], @param5=[String, System.String], @param6=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:40,359 [49] DEBUG [(null)] - Open Connection "13318298" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:40,428 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:40,436 [49] DEBUG [(null)] - Close Connection "13318298" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:58:40,439 [49] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param0 ,   @param1 ,   @param2 ,   @param3 ) )
         order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:58:40,441 [49] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[rolelist[0],], @param1=[rolelist[1],1], @param2=[rolelist[2],2], @param3=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:58:40,442 [49] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:40,445 [49] DEBUG [(null)] - Open Connection "59732305" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:40,477 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:40,479 [49] DEBUG [(null)] - Close Connection "59732305" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:58:41,351 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User.QueryItem] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select
      isnull(email.id,0)valid_email,isnull(photo.id,0)valid_phone,isnull(master.companyname,db.[companyname])companyname

      ,db.[id_cyuser],db.[id_masteruser],db.[id],db.[username],db.[password],db.[name]
      ,db.[flag_sex],db.[id_father],db.[job],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[rq_start],db.[rq_stop],db.[flag_state],db.[flag_master],db.[bz],db.[id_province],db.[id_city],db.[id_county],db.[zipcode],db.[address],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[version],db.id_shop,db.flag_delete,db.[flag_industry],db.[companyno]
      ,p.name as name_province
      ,c.name as name_city
      ,county.name as name_county
      ,shop.mc as name_shop
      from  [tb_user]
      as db
      LEFT JOIN Tb_user master ON db.id_father=master.id
      left join Tb_Districts p on db.id_province =p.id
      left join Tb_Districts c on db.id_city =c.id
      left join  Tb_Districts county on db.id_county =county.id
      LEFT JOIN Tb_account photo ON photo.id_user=db.id AND photo.username=db.phone
      LEFT JOIN Tb_account email ON email.id_user=db.id AND email.username=db.email
      left join Tb_Shop shop on db.id_shop =shop.id
       where  db.[id]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:58:41,352 [47] DEBUG [(null)] - Statement Id: [Tb_User.QueryItem] Parameters: [@param0=[id,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:58:41,353 [47] DEBUG [(null)] - Statement Id: [Tb_User.QueryItem] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:41,354 [47] DEBUG [(null)] - Open Connection "60705729" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:41,377 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:41,378 [47] DEBUG [(null)] - Close Connection "60705729" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:58:41,381 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[flag_type],db.[id_masteruser],db.[flag_update],db.[name],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[role_describe] from  [Tb_role]
		  as db
			 where   
            (db.flag_type = 2 or db.id_masteruser =  @param0 )
           order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:58:41,382 [47] DEBUG [(null)] - Statement Id: [Tb_Role.QueryList] Parameters: [@param0=[_id_masteruser,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:58:41,383 [47] DEBUG [(null)] - Statement Id: [Tb_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:41,384 [47] DEBUG [(null)] - Open Connection "39263412" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:41,398 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:41,400 [47] DEBUG [(null)] - Close Connection "39263412" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:58:41,402 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:58:41,404 [47] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:58:41,405 [47] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:41,407 [47] DEBUG [(null)] - Open Connection "61645802" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:41,418 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:58:41,419 [47] DEBUG [(null)] - Close Connection "61645802" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:01,992 [49] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:01,994 [49] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:01,995 [49] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:01,997 [49] DEBUG [(null)] - Open Connection "52387193" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:02,010 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:02,011 [49] DEBUG [(null)] - Close Connection "52387193" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:02,014 [49] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:02,016 [49] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:02,018 [49] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:02,019 [49] DEBUG [(null)] - Open Connection "60843137" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:02,059 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:02,061 [49] DEBUG [(null)] - Close Connection "60843137" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:02,075 [49] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:02,076 [49] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90], @param1=[lgrq,2017/2/7 0:00:00], @param2=[bgrq,2017/2/7 23:59:59], @param3=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:02,078 [49] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:02,080 [49] DEBUG [(null)] - Open Connection "15657446" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:02,117 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:02,122 [49] DEBUG [(null)] - Close Connection "15657446" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:02,124 [49] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:02,127 [49] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90], @param1=[lgrq,2017/2/7 0:00:00], @param2=[bgrq,2017/2/7 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:02,136 [49] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:02,138 [49] DEBUG [(null)] - Open Connection "60138911" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:02,153 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:02,156 [49] DEBUG [(null)] - Close Connection "60138911" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:02,159 [49] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:02,163 [49] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926], @param1=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:02,166 [49] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:02,170 [49] DEBUG [(null)] - Open Connection "8325678" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:02,196 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:02,198 [49] DEBUG [(null)] - Close Connection "8325678" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:02,202 [49] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  'dbbfed08-b13e-413d-82d3-714439657926','a3d5ca75-5726-437f-bad2-aeee4bbd1d90','2017/2/7 0:00:00','2017/2/7 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:02,203 [49] DEBUG [(null)] - Open Connection "62848733" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:02,231 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:02,232 [49] DEBUG [(null)] - Close Connection "62848733" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:02,233 [49] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:02,235 [49] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926], @param1=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:02,236 [49] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:02,237 [49] DEBUG [(null)] - Open Connection "16129020" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:02,254 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:02,255 [49] DEBUG [(null)] - Close Connection "16129020" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:02,257 [49] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:02,258 [49] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:02,259 [49] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:02,260 [49] DEBUG [(null)] - Open Connection "20707620" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:02,295 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:02,297 [49] DEBUG [(null)] - Close Connection "20707620" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:02,981 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User.QueryItem] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select
      isnull(email.id,0)valid_email,isnull(photo.id,0)valid_phone,isnull(master.companyname,db.[companyname])companyname

      ,db.[id_cyuser],db.[id_masteruser],db.[id],db.[username],db.[password],db.[name]
      ,db.[flag_sex],db.[id_father],db.[job],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[rq_start],db.[rq_stop],db.[flag_state],db.[flag_master],db.[bz],db.[id_province],db.[id_city],db.[id_county],db.[zipcode],db.[address],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[version],db.id_shop,db.flag_delete,db.[flag_industry],db.[companyno]
      ,p.name as name_province
      ,c.name as name_city
      ,county.name as name_county
      ,shop.mc as name_shop
      from  [tb_user]
      as db
      LEFT JOIN Tb_user master ON db.id_father=master.id
      left join Tb_Districts p on db.id_province =p.id
      left join Tb_Districts c on db.id_city =c.id
      left join  Tb_Districts county on db.id_county =county.id
      LEFT JOIN Tb_account photo ON photo.id_user=db.id AND photo.username=db.phone
      LEFT JOIN Tb_account email ON email.id_user=db.id AND email.username=db.email
      left join Tb_Shop shop on db.id_shop =shop.id
       where  db.[id]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:02,982 [47] DEBUG [(null)] - Statement Id: [Tb_User.QueryItem] Parameters: [@param0=[id,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:02,984 [47] DEBUG [(null)] - Statement Id: [Tb_User.QueryItem] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:02,985 [47] DEBUG [(null)] - Open Connection "20166427" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:02,999 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:03,000 [47] DEBUG [(null)] - Close Connection "20166427" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:03,002 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[flag_type],db.[id_masteruser],db.[flag_update],db.[name],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[role_describe] from  [Tb_role]
		  as db
			 where   
            (db.flag_type = 2 or db.id_masteruser =  @param0 )
           order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:03,004 [47] DEBUG [(null)] - Statement Id: [Tb_Role.QueryList] Parameters: [@param0=[_id_masteruser,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:03,006 [47] DEBUG [(null)] - Statement Id: [Tb_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:03,007 [47] DEBUG [(null)] - Open Connection "66915262" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:03,026 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:03,027 [47] DEBUG [(null)] - Close Connection "66915262" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:03,029 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:03,030 [47] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:03,031 [47] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:03,032 [47] DEBUG [(null)] - Open Connection "29743780" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:03,045 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:03,046 [47] DEBUG [(null)] - Close Connection "29743780" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:41,587 [49] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:41,588 [49] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:41,590 [49] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:41,594 [49] DEBUG [(null)] - Open Connection "19078331" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:41,618 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:41,619 [49] DEBUG [(null)] - Close Connection "19078331" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:41,621 [49] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:41,623 [49] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:41,626 [49] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:41,628 [49] DEBUG [(null)] - Open Connection "9539348" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:41,664 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:41,666 [49] DEBUG [(null)] - Close Connection "9539348" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:41,675 [49] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:41,677 [49] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90], @param1=[lgrq,2017/2/7 0:00:00], @param2=[bgrq,2017/2/7 23:59:59], @param3=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:41,679 [49] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:41,680 [49] DEBUG [(null)] - Open Connection "38360950" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:41,705 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:41,707 [49] DEBUG [(null)] - Close Connection "38360950" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:41,711 [49] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:41,715 [49] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90], @param1=[lgrq,2017/2/7 0:00:00], @param2=[bgrq,2017/2/7 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:41,718 [49] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:41,719 [49] DEBUG [(null)] - Open Connection "60140601" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:41,737 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:41,738 [49] DEBUG [(null)] - Close Connection "60140601" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:41,740 [49] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:41,744 [49] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926], @param1=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:41,749 [49] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:41,750 [49] DEBUG [(null)] - Open Connection "8665406" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:41,767 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:41,768 [49] DEBUG [(null)] - Close Connection "8665406" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:41,769 [49] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  'dbbfed08-b13e-413d-82d3-714439657926','a3d5ca75-5726-437f-bad2-aeee4bbd1d90','2017/2/7 0:00:00','2017/2/7 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:41,771 [49] DEBUG [(null)] - Open Connection "64025134" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:41,819 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:41,820 [49] DEBUG [(null)] - Close Connection "64025134" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:41,821 [49] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:41,822 [49] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926], @param1=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:41,823 [49] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:41,826 [49] DEBUG [(null)] - Open Connection "51259067" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:41,844 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:41,845 [49] DEBUG [(null)] - Close Connection "51259067" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:41,846 [49] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:41,848 [49] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:41,849 [49] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:41,850 [49] DEBUG [(null)] - Open Connection "35416284" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:41,874 [49] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:41,876 [49] DEBUG [(null)] - Close Connection "35416284" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:42,935 [42] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User.QueryItem] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select
      isnull(email.id,0)valid_email,isnull(photo.id,0)valid_phone,isnull(master.companyname,db.[companyname])companyname

      ,db.[id_cyuser],db.[id_masteruser],db.[id],db.[username],db.[password],db.[name]
      ,db.[flag_sex],db.[id_father],db.[job],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[rq_start],db.[rq_stop],db.[flag_state],db.[flag_master],db.[bz],db.[id_province],db.[id_city],db.[id_county],db.[zipcode],db.[address],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[version],db.id_shop,db.flag_delete,db.[flag_industry],db.[companyno]
      ,p.name as name_province
      ,c.name as name_city
      ,county.name as name_county
      ,shop.mc as name_shop
      from  [tb_user]
      as db
      LEFT JOIN Tb_user master ON db.id_father=master.id
      left join Tb_Districts p on db.id_province =p.id
      left join Tb_Districts c on db.id_city =c.id
      left join  Tb_Districts county on db.id_county =county.id
      LEFT JOIN Tb_account photo ON photo.id_user=db.id AND photo.username=db.phone
      LEFT JOIN Tb_account email ON email.id_user=db.id AND email.username=db.email
      left join Tb_Shop shop on db.id_shop =shop.id
       where  db.[id]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:42,937 [42] DEBUG [(null)] - Statement Id: [Tb_User.QueryItem] Parameters: [@param0=[id,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:42,938 [42] DEBUG [(null)] - Statement Id: [Tb_User.QueryItem] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:42,944 [42] DEBUG [(null)] - Open Connection "11531777" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:42,966 [42] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:42,967 [42] DEBUG [(null)] - Close Connection "11531777" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:42,969 [42] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[flag_type],db.[id_masteruser],db.[flag_update],db.[name],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[role_describe] from  [Tb_role]
		  as db
			 where   
            (db.flag_type = 2 or db.id_masteruser =  @param0 )
           order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:42,970 [42] DEBUG [(null)] - Statement Id: [Tb_Role.QueryList] Parameters: [@param0=[_id_masteruser,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:42,971 [42] DEBUG [(null)] - Statement Id: [Tb_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:42,972 [42] DEBUG [(null)] - Open Connection "48840470" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:42,988 [42] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:42,989 [42] DEBUG [(null)] - Close Connection "48840470" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:42,991 [42] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:42,992 [42] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 16:59:42,993 [42] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:42,994 [42] DEBUG [(null)] - Open Connection "60793385" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:43,014 [42] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 16:59:43,017 [42] DEBUG [(null)] - Close Connection "60793385" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:00:37,377 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:00:37,379 [47] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:00:37,381 [47] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:00:37,384 [47] DEBUG [(null)] - Open Connection "33090993" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:00:37,401 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:00:37,402 [47] DEBUG [(null)] - Close Connection "33090993" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:00:37,404 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:00:37,406 [47] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:00:37,413 [47] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:00:37,417 [47] DEBUG [(null)] - Open Connection "11219759" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:00:37,458 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:00:37,459 [47] DEBUG [(null)] - Close Connection "11219759" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:00:37,473 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:00:37,474 [47] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90], @param1=[lgrq,2017/2/7 0:00:00], @param2=[bgrq,2017/2/7 23:59:59], @param3=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:00:37,476 [47] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:00:37,478 [47] DEBUG [(null)] - Open Connection "17929839" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:00:37,494 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:00:37,495 [47] DEBUG [(null)] - Close Connection "17929839" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:00:37,497 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:00:37,498 [47] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90], @param1=[lgrq,2017/2/7 0:00:00], @param2=[bgrq,2017/2/7 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:00:37,499 [47] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:00:37,501 [47] DEBUG [(null)] - Open Connection "37906866" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:00:37,516 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:00:37,517 [47] DEBUG [(null)] - Close Connection "37906866" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:00:37,518 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:00:37,519 [47] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926], @param1=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:00:37,521 [47] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:00:37,522 [47] DEBUG [(null)] - Open Connection "1158968" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:00:37,547 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:00:37,553 [47] DEBUG [(null)] - Close Connection "1158968" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:00:37,555 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  'dbbfed08-b13e-413d-82d3-714439657926','a3d5ca75-5726-437f-bad2-aeee4bbd1d90','2017/2/7 0:00:00','2017/2/7 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:00:37,556 [47] DEBUG [(null)] - Open Connection "22354241" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:00:37,611 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:00:37,613 [47] DEBUG [(null)] - Close Connection "22354241" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:00:37,616 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:00:37,617 [47] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926], @param1=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:00:37,619 [47] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:00:37,621 [47] DEBUG [(null)] - Open Connection "19401229" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:00:37,644 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:00:37,646 [47] DEBUG [(null)] - Close Connection "19401229" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:00:37,647 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:00:37,649 [47] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:00:37,650 [47] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:00:37,651 [47] DEBUG [(null)] - Open Connection "53449692" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:00:37,681 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:00:37,683 [47] DEBUG [(null)] - Close Connection "53449692" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:00:38,372 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User.QueryItem] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select
      isnull(email.id,0)valid_email,isnull(photo.id,0)valid_phone,isnull(master.companyname,db.[companyname])companyname

      ,db.[id_cyuser],db.[id_masteruser],db.[id],db.[username],db.[password],db.[name]
      ,db.[flag_sex],db.[id_father],db.[job],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[rq_start],db.[rq_stop],db.[flag_state],db.[flag_master],db.[bz],db.[id_province],db.[id_city],db.[id_county],db.[zipcode],db.[address],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[version],db.id_shop,db.flag_delete,db.[flag_industry],db.[companyno]
      ,p.name as name_province
      ,c.name as name_city
      ,county.name as name_county
      ,shop.mc as name_shop
      from  [tb_user]
      as db
      LEFT JOIN Tb_user master ON db.id_father=master.id
      left join Tb_Districts p on db.id_province =p.id
      left join Tb_Districts c on db.id_city =c.id
      left join  Tb_Districts county on db.id_county =county.id
      LEFT JOIN Tb_account photo ON photo.id_user=db.id AND photo.username=db.phone
      LEFT JOIN Tb_account email ON email.id_user=db.id AND email.username=db.email
      left join Tb_Shop shop on db.id_shop =shop.id
       where  db.[id]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:00:38,373 [47] DEBUG [(null)] - Statement Id: [Tb_User.QueryItem] Parameters: [@param0=[id,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:00:38,375 [47] DEBUG [(null)] - Statement Id: [Tb_User.QueryItem] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:00:38,378 [47] DEBUG [(null)] - Open Connection "29634657" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:00:38,414 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:00:38,415 [47] DEBUG [(null)] - Close Connection "29634657" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:00:38,416 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[flag_type],db.[id_masteruser],db.[flag_update],db.[name],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[role_describe] from  [Tb_role]
		  as db
			 where   
            (db.flag_type = 2 or db.id_masteruser =  @param0 )
           order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:00:38,418 [47] DEBUG [(null)] - Statement Id: [Tb_Role.QueryList] Parameters: [@param0=[_id_masteruser,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:00:38,419 [47] DEBUG [(null)] - Statement Id: [Tb_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:00:38,421 [47] DEBUG [(null)] - Open Connection "15235544" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:00:38,433 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:00:38,434 [47] DEBUG [(null)] - Close Connection "15235544" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:00:38,435 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:00:38,436 [47] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:00:38,437 [47] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:00:38,438 [47] DEBUG [(null)] - Open Connection "54779026" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:00:38,459 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:00:38,460 [47] DEBUG [(null)] - Close Connection "54779026" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:13,000 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:13,002 [47] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:13,004 [47] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:13,006 [47] DEBUG [(null)] - Open Connection "47030392" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:13,019 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:13,021 [47] DEBUG [(null)] - Close Connection "47030392" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:13,024 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:13,025 [47] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:13,026 [47] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:13,028 [47] DEBUG [(null)] - Open Connection "17169046" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:13,066 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:13,067 [47] DEBUG [(null)] - Close Connection "17169046" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:13,082 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:13,084 [47] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90], @param1=[lgrq,2017/2/7 0:00:00], @param2=[bgrq,2017/2/7 23:59:59], @param3=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:13,085 [47] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:13,091 [47] DEBUG [(null)] - Open Connection "25291575" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:13,119 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:13,124 [47] DEBUG [(null)] - Close Connection "25291575" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:13,128 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:13,130 [47] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90], @param1=[lgrq,2017/2/7 0:00:00], @param2=[bgrq,2017/2/7 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:13,131 [47] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:13,132 [47] DEBUG [(null)] - Open Connection "49435803" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:13,164 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:13,165 [47] DEBUG [(null)] - Close Connection "49435803" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:13,167 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:13,170 [47] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926], @param1=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:13,173 [47] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:13,175 [47] DEBUG [(null)] - Open Connection "11651330" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:13,189 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:13,190 [47] DEBUG [(null)] - Close Connection "11651330" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:13,192 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  'dbbfed08-b13e-413d-82d3-714439657926','a3d5ca75-5726-437f-bad2-aeee4bbd1d90','2017/2/7 0:00:00','2017/2/7 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:13,193 [47] DEBUG [(null)] - Open Connection "34114220" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:13,225 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:13,226 [47] DEBUG [(null)] - Close Connection "34114220" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:13,228 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:13,229 [47] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926], @param1=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:13,230 [47] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:13,232 [47] DEBUG [(null)] - Open Connection "7375833" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:13,258 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:13,259 [47] DEBUG [(null)] - Close Connection "7375833" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:13,261 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:13,262 [47] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:13,264 [47] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:13,266 [47] DEBUG [(null)] - Open Connection "14249673" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:13,289 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:13,290 [47] DEBUG [(null)] - Close Connection "14249673" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:13,963 [40] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User.QueryItem] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select
      isnull(email.id,0)valid_email,isnull(photo.id,0)valid_phone,isnull(master.companyname,db.[companyname])companyname

      ,db.[id_cyuser],db.[id_masteruser],db.[id],db.[username],db.[password],db.[name]
      ,db.[flag_sex],db.[id_father],db.[job],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[rq_start],db.[rq_stop],db.[flag_state],db.[flag_master],db.[bz],db.[id_province],db.[id_city],db.[id_county],db.[zipcode],db.[address],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[version],db.id_shop,db.flag_delete,db.[flag_industry],db.[companyno]
      ,p.name as name_province
      ,c.name as name_city
      ,county.name as name_county
      ,shop.mc as name_shop
      from  [tb_user]
      as db
      LEFT JOIN Tb_user master ON db.id_father=master.id
      left join Tb_Districts p on db.id_province =p.id
      left join Tb_Districts c on db.id_city =c.id
      left join  Tb_Districts county on db.id_county =county.id
      LEFT JOIN Tb_account photo ON photo.id_user=db.id AND photo.username=db.phone
      LEFT JOIN Tb_account email ON email.id_user=db.id AND email.username=db.email
      left join Tb_Shop shop on db.id_shop =shop.id
       where  db.[id]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:13,965 [40] DEBUG [(null)] - Statement Id: [Tb_User.QueryItem] Parameters: [@param0=[id,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:13,966 [40] DEBUG [(null)] - Statement Id: [Tb_User.QueryItem] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:13,967 [40] DEBUG [(null)] - Open Connection "29389521" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:13,984 [40] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:13,986 [40] DEBUG [(null)] - Close Connection "29389521" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:13,987 [40] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[flag_type],db.[id_masteruser],db.[flag_update],db.[name],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[role_describe] from  [Tb_role]
		  as db
			 where   
            (db.flag_type = 2 or db.id_masteruser =  @param0 )
           order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:13,988 [40] DEBUG [(null)] - Statement Id: [Tb_Role.QueryList] Parameters: [@param0=[_id_masteruser,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:13,989 [40] DEBUG [(null)] - Statement Id: [Tb_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:13,990 [40] DEBUG [(null)] - Open Connection "17432891" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:14,007 [40] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:14,008 [40] DEBUG [(null)] - Close Connection "17432891" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:14,009 [40] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:14,011 [40] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:14,012 [40] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:14,014 [40] DEBUG [(null)] - Open Connection "57854739" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:14,026 [40] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:14,027 [40] DEBUG [(null)] - Close Connection "57854739" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:39,496 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:39,498 [47] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:39,500 [47] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:39,503 [47] DEBUG [(null)] - Open Connection "45135935" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:39,521 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:39,523 [47] DEBUG [(null)] - Close Connection "45135935" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:39,525 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:39,527 [47] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:39,529 [47] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:39,531 [47] DEBUG [(null)] - Open Connection "54192017" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:39,564 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:39,570 [47] DEBUG [(null)] - Close Connection "54192017" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:39,602 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:39,603 [47] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90], @param1=[lgrq,2017/2/7 0:00:00], @param2=[bgrq,2017/2/7 23:59:59], @param3=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:39,605 [47] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:39,606 [47] DEBUG [(null)] - Open Connection "57185382" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:39,626 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:39,628 [47] DEBUG [(null)] - Close Connection "57185382" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:39,633 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:39,635 [47] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90], @param1=[lgrq,2017/2/7 0:00:00], @param2=[bgrq,2017/2/7 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:39,636 [47] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:39,637 [47] DEBUG [(null)] - Open Connection "30925054" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:39,654 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:39,656 [47] DEBUG [(null)] - Close Connection "30925054" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:39,657 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:39,658 [47] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926], @param1=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:39,659 [47] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:39,660 [47] DEBUG [(null)] - Open Connection "62955417" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:39,674 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:39,675 [47] DEBUG [(null)] - Close Connection "62955417" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:39,676 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  'dbbfed08-b13e-413d-82d3-714439657926','a3d5ca75-5726-437f-bad2-aeee4bbd1d90','2017/2/7 0:00:00','2017/2/7 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:39,679 [47] DEBUG [(null)] - Open Connection "3691127" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:39,709 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:39,710 [47] DEBUG [(null)] - Close Connection "3691127" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:39,712 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:39,715 [47] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926], @param1=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:39,716 [47] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:39,717 [47] DEBUG [(null)] - Open Connection "41298904" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:39,742 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:39,743 [47] DEBUG [(null)] - Close Connection "41298904" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:39,744 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:39,747 [47] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:39,748 [47] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:39,749 [47] DEBUG [(null)] - Open Connection "51842556" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:39,770 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:39,771 [47] DEBUG [(null)] - Close Connection "51842556" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:40,463 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User.QueryItem] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select
      isnull(email.id,0)valid_email,isnull(photo.id,0)valid_phone,isnull(master.companyname,db.[companyname])companyname

      ,db.[id_cyuser],db.[id_masteruser],db.[id],db.[username],db.[password],db.[name]
      ,db.[flag_sex],db.[id_father],db.[job],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[rq_start],db.[rq_stop],db.[flag_state],db.[flag_master],db.[bz],db.[id_province],db.[id_city],db.[id_county],db.[zipcode],db.[address],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[version],db.id_shop,db.flag_delete,db.[flag_industry],db.[companyno]
      ,p.name as name_province
      ,c.name as name_city
      ,county.name as name_county
      ,shop.mc as name_shop
      from  [tb_user]
      as db
      LEFT JOIN Tb_user master ON db.id_father=master.id
      left join Tb_Districts p on db.id_province =p.id
      left join Tb_Districts c on db.id_city =c.id
      left join  Tb_Districts county on db.id_county =county.id
      LEFT JOIN Tb_account photo ON photo.id_user=db.id AND photo.username=db.phone
      LEFT JOIN Tb_account email ON email.id_user=db.id AND email.username=db.email
      left join Tb_Shop shop on db.id_shop =shop.id
       where  db.[id]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:40,465 [47] DEBUG [(null)] - Statement Id: [Tb_User.QueryItem] Parameters: [@param0=[id,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:40,467 [47] DEBUG [(null)] - Statement Id: [Tb_User.QueryItem] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:40,469 [47] DEBUG [(null)] - Open Connection "19899333" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:40,486 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:40,487 [47] DEBUG [(null)] - Close Connection "19899333" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:40,488 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[flag_type],db.[id_masteruser],db.[flag_update],db.[name],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[role_describe] from  [Tb_role]
		  as db
			 where   
            (db.flag_type = 2 or db.id_masteruser =  @param0 )
           order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:40,489 [47] DEBUG [(null)] - Statement Id: [Tb_Role.QueryList] Parameters: [@param0=[_id_masteruser,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:40,490 [47] DEBUG [(null)] - Statement Id: [Tb_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:40,491 [47] DEBUG [(null)] - Open Connection "15366033" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:40,509 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:40,511 [47] DEBUG [(null)] - Close Connection "15366033" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:40,512 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:40,513 [47] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:01:40,515 [47] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:40,516 [47] DEBUG [(null)] - Open Connection "12854368" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:40,526 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:01:40,528 [47] DEBUG [(null)] - Close Connection "12854368" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:02:13,968 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:02:13,969 [47] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:02:13,970 [47] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:02:13,973 [47] DEBUG [(null)] - Open Connection "16848395" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:02:13,987 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:02:13,989 [47] DEBUG [(null)] - Close Connection "16848395" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:02:13,991 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:02:13,993 [47] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:02:13,994 [47] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:02:13,996 [47] DEBUG [(null)] - Open Connection "30514832" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:02:14,036 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:02:14,038 [47] DEBUG [(null)] - Close Connection "30514832" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:02:14,049 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:02:14,051 [47] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90], @param1=[lgrq,2017/2/7 0:00:00], @param2=[bgrq,2017/2/7 23:59:59], @param3=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:02:14,052 [47] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:02:14,053 [47] DEBUG [(null)] - Open Connection "50891480" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:02:14,071 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:02:14,076 [47] DEBUG [(null)] - Close Connection "50891480" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:02:14,079 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:02:14,081 [47] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90], @param1=[lgrq,2017/2/7 0:00:00], @param2=[bgrq,2017/2/7 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:02:14,083 [47] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:02:14,084 [47] DEBUG [(null)] - Open Connection "24161571" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:02:14,100 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:02:14,101 [47] DEBUG [(null)] - Close Connection "24161571" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:02:14,103 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:02:14,104 [47] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926], @param1=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:02:14,108 [47] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:02:14,111 [47] DEBUG [(null)] - Open Connection "32671665" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:02:14,132 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:02:14,134 [47] DEBUG [(null)] - Close Connection "32671665" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:02:14,136 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  'dbbfed08-b13e-413d-82d3-714439657926','a3d5ca75-5726-437f-bad2-aeee4bbd1d90','2017/2/7 0:00:00','2017/2/7 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:02:14,137 [47] DEBUG [(null)] - Open Connection "64507074" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:02:14,168 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:02:14,170 [47] DEBUG [(null)] - Close Connection "64507074" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:02:14,180 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:02:14,193 [47] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926], @param1=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:02:14,194 [47] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:02:14,196 [47] DEBUG [(null)] - Open Connection "34725526" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:02:14,221 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:02:14,224 [47] DEBUG [(null)] - Close Connection "34725526" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:02:14,227 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:02:14,228 [47] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:02:14,231 [47] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:02:14,234 [47] DEBUG [(null)] - Open Connection "58249069" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:02:14,255 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:02:14,257 [47] DEBUG [(null)] - Close Connection "58249069" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:02:15,017 [40] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User.QueryItem] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select
      isnull(email.id,0)valid_email,isnull(photo.id,0)valid_phone,isnull(master.companyname,db.[companyname])companyname

      ,db.[id_cyuser],db.[id_masteruser],db.[id],db.[username],db.[password],db.[name]
      ,db.[flag_sex],db.[id_father],db.[job],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[rq_start],db.[rq_stop],db.[flag_state],db.[flag_master],db.[bz],db.[id_province],db.[id_city],db.[id_county],db.[zipcode],db.[address],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[version],db.id_shop,db.flag_delete,db.[flag_industry],db.[companyno]
      ,p.name as name_province
      ,c.name as name_city
      ,county.name as name_county
      ,shop.mc as name_shop
      from  [tb_user]
      as db
      LEFT JOIN Tb_user master ON db.id_father=master.id
      left join Tb_Districts p on db.id_province =p.id
      left join Tb_Districts c on db.id_city =c.id
      left join  Tb_Districts county on db.id_county =county.id
      LEFT JOIN Tb_account photo ON photo.id_user=db.id AND photo.username=db.phone
      LEFT JOIN Tb_account email ON email.id_user=db.id AND email.username=db.email
      left join Tb_Shop shop on db.id_shop =shop.id
       where  db.[id]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:02:15,019 [40] DEBUG [(null)] - Statement Id: [Tb_User.QueryItem] Parameters: [@param0=[id,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:02:15,020 [40] DEBUG [(null)] - Statement Id: [Tb_User.QueryItem] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:02:15,021 [40] DEBUG [(null)] - Open Connection "61788803" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:02:15,038 [40] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:02:15,041 [40] DEBUG [(null)] - Close Connection "61788803" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:02:15,043 [40] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[flag_type],db.[id_masteruser],db.[flag_update],db.[name],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[role_describe] from  [Tb_role]
		  as db
			 where   
            (db.flag_type = 2 or db.id_masteruser =  @param0 )
           order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:02:15,044 [40] DEBUG [(null)] - Statement Id: [Tb_Role.QueryList] Parameters: [@param0=[_id_masteruser,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:02:15,046 [40] DEBUG [(null)] - Statement Id: [Tb_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:02:15,047 [40] DEBUG [(null)] - Open Connection "61714046" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:02:15,060 [40] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:02:15,062 [40] DEBUG [(null)] - Close Connection "61714046" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:02:15,064 [40] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:02:15,067 [40] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:02:15,070 [40] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:02:15,075 [40] DEBUG [(null)] - Open Connection "49379205" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:02:15,086 [40] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:02:15,087 [40] DEBUG [(null)] - Close Connection "49379205" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:04:04,840 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:04:04,842 [47] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:04:04,845 [47] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:04:04,849 [47] DEBUG [(null)] - Open Connection "34823481" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:04:04,867 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:04:04,868 [47] DEBUG [(null)] - Close Connection "34823481" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:04:04,870 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:04:04,874 [47] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:04:04,880 [47] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:04:04,882 [47] DEBUG [(null)] - Open Connection "10045508" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:04:04,925 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:04:04,930 [47] DEBUG [(null)] - Close Connection "10045508" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:04:04,950 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:04:04,952 [47] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90], @param1=[lgrq,2017/2/7 0:00:00], @param2=[bgrq,2017/2/7 23:59:59], @param3=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:04:04,953 [47] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:04:04,955 [47] DEBUG [(null)] - Open Connection "59734930" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:04:04,977 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:04:04,979 [47] DEBUG [(null)] - Close Connection "59734930" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:04:04,981 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:04:04,983 [47] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90], @param1=[lgrq,2017/2/7 0:00:00], @param2=[bgrq,2017/2/7 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:04:04,985 [47] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:04:04,987 [47] DEBUG [(null)] - Open Connection "53225827" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:04:05,014 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:04:05,015 [47] DEBUG [(null)] - Close Connection "53225827" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:04:05,017 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:04:05,018 [47] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926], @param1=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:04:05,019 [47] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:04:05,020 [47] DEBUG [(null)] - Open Connection "4928503" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:04:05,040 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:04:05,042 [47] DEBUG [(null)] - Close Connection "4928503" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:04:05,044 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  'dbbfed08-b13e-413d-82d3-714439657926','a3d5ca75-5726-437f-bad2-aeee4bbd1d90','2017/2/7 0:00:00','2017/2/7 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:04:05,045 [47] DEBUG [(null)] - Open Connection "11677070" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:04:05,094 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:04:05,096 [47] DEBUG [(null)] - Close Connection "11677070" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:04:05,097 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:04:05,099 [47] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,dbbfed08-b13e-413d-82d3-714439657926], @param1=[id_shop,a3d5ca75-5726-437f-bad2-aeee4bbd1d90]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:04:05,100 [47] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:04:05,101 [47] DEBUG [(null)] - Open Connection "39082088" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:04:05,134 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:04:05,136 [47] DEBUG [(null)] - Close Connection "39082088" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:04:05,138 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:04:05,142 [47] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:04:05,144 [47] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:04:05,148 [47] DEBUG [(null)] - Open Connection "26650309" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:04:05,178 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:04:05,180 [47] DEBUG [(null)] - Close Connection "26650309" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:04:05,853 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User.QueryItem] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select
      isnull(email.id,0)valid_email,isnull(photo.id,0)valid_phone,isnull(master.companyname,db.[companyname])companyname

      ,db.[id_cyuser],db.[id_masteruser],db.[id],db.[username],db.[password],db.[name]
      ,db.[flag_sex],db.[id_father],db.[job],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[rq_start],db.[rq_stop],db.[flag_state],db.[flag_master],db.[bz],db.[id_province],db.[id_city],db.[id_county],db.[zipcode],db.[address],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[version],db.id_shop,db.flag_delete,db.[flag_industry],db.[companyno]
      ,p.name as name_province
      ,c.name as name_city
      ,county.name as name_county
      ,shop.mc as name_shop
      from  [tb_user]
      as db
      LEFT JOIN Tb_user master ON db.id_father=master.id
      left join Tb_Districts p on db.id_province =p.id
      left join Tb_Districts c on db.id_city =c.id
      left join  Tb_Districts county on db.id_county =county.id
      LEFT JOIN Tb_account photo ON photo.id_user=db.id AND photo.username=db.phone
      LEFT JOIN Tb_account email ON email.id_user=db.id AND email.username=db.email
      left join Tb_Shop shop on db.id_shop =shop.id
       where  db.[id]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:04:05,855 [47] DEBUG [(null)] - Statement Id: [Tb_User.QueryItem] Parameters: [@param0=[id,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:04:05,856 [47] DEBUG [(null)] - Statement Id: [Tb_User.QueryItem] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:04:05,857 [47] DEBUG [(null)] - Open Connection "35596237" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:04:05,879 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:04:05,880 [47] DEBUG [(null)] - Close Connection "35596237" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:04:05,881 [47] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[flag_type],db.[id_masteruser],db.[flag_update],db.[name],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[role_describe] from  [Tb_role]
		  as db
			 where   
            (db.flag_type = 2 or db.id_masteruser =  @param0 )
           order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:04:05,883 [47] DEBUG [(null)] - Statement Id: [Tb_Role.QueryList] Parameters: [@param0=[_id_masteruser,dbbfed08-b13e-413d-82d3-714439657926]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-02-07 17:04:05,884 [47] DEBUG [(null)] - Statement Id: [Tb_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:04:05,885 [47] DEBUG [(null)] - Open Connection "24969682" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:04:05,901 [47] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-02-07 17:04:05,903 [47] DEBUG [(null)] - Close Connection "24969682" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
