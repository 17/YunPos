Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:17:06,045 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:17:06,058 [13] DEBUG [(null)] - Close Connection "26999669" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:17:06,060 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:17:06,061 [13] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:17:06,069 [13] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:17:06,072 [13] DEBUG [(null)] - Open Connection "62586126" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:17:06,089 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:17:06,093 [13] DEBUG [(null)] - Close Connection "62586126" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:17:36,220 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:17:36,223 [13] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:17:36,224 [13] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:17:36,225 [13] DEBUG [(null)] - Open Connection "15210302" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:17:36,241 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:17:36,242 [13] DEBUG [(null)] - Close Connection "15210302" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:17:36,243 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:17:36,249 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],2], @param2=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:17:36,253 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:17:36,254 [13] DEBUG [(null)] - Open Connection "61680898" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:17:36,284 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:17:36,285 [13] DEBUG [(null)] - Close Connection "61680898" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:17:36,292 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:17:36,293 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59], @param3=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:17:36,294 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:17:36,295 [13] DEBUG [(null)] - Open Connection "26150290" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:17:36,308 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:17:36,308 [13] DEBUG [(null)] - Close Connection "26150290" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:17:36,309 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:17:36,310 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:17:36,311 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:17:36,311 [13] DEBUG [(null)] - Open Connection "14171526" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:17:36,329 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:17:36,331 [13] DEBUG [(null)] - Close Connection "14171526" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:17:36,332 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:17:36,333 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:17:36,334 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:17:36,335 [13] DEBUG [(null)] - Open Connection "2470640" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:17:36,345 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:17:36,346 [13] DEBUG [(null)] - Close Connection "2470640" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:17:36,347 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '08e9ed0b-db42-480d-ab10-47a788e65318','382952aa-ecb3-4708-95a0-c01754009101','2017/1/17 0:00:00','2017/1/17 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:17:36,348 [13] DEBUG [(null)] - Open Connection "6608793" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:17:36,359 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:17:36,360 [13] DEBUG [(null)] - Close Connection "6608793" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:17:36,361 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:17:36,362 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:17:36,362 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:17:36,364 [13] DEBUG [(null)] - Open Connection "41156930" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:17:36,406 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:17:36,407 [13] DEBUG [(null)] - Close Connection "41156930" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:17:36,409 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:17:36,411 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:17:36,413 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:17:36,415 [13] DEBUG [(null)] - Open Connection "64243684" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:17:36,453 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:17:36,454 [13] DEBUG [(null)] - Close Connection "64243684" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:17:44,088 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:17:44,089 [13] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:17:44,090 [13] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:17:44,092 [13] DEBUG [(null)] - Open Connection "60061362" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:17:44,135 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:17:44,164 [13] DEBUG [(null)] - Close Connection "60061362" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:17:44,252 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:17:44,273 [13] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:17:44,363 [13] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:17:44,402 [13] DEBUG [(null)] - Open Connection "945586" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:17:44,475 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:17:44,477 [13] DEBUG [(null)] - Close Connection "945586" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:19:22,031 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:19:22,032 [15] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:19:22,034 [15] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:19:22,036 [15] DEBUG [(null)] - Open Connection "48089607" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:19:22,048 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:19:22,051 [15] DEBUG [(null)] - Close Connection "48089607" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:19:22,053 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:19:22,058 [15] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],2], @param2=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:19:22,060 [15] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:19:22,061 [15] DEBUG [(null)] - Open Connection "38816727" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:19:22,089 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:19:22,090 [15] DEBUG [(null)] - Close Connection "38816727" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:19:22,098 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:19:22,099 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59], @param3=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:19:22,100 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:19:22,101 [15] DEBUG [(null)] - Open Connection "40059304" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:19:22,117 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:19:22,118 [15] DEBUG [(null)] - Close Connection "40059304" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:19:22,119 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:19:22,119 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:19:22,120 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:19:22,121 [15] DEBUG [(null)] - Open Connection "53717946" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:19:22,131 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:19:22,132 [15] DEBUG [(null)] - Close Connection "53717946" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:19:22,133 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:19:22,134 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:19:22,135 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:19:22,136 [15] DEBUG [(null)] - Open Connection "2005581" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:19:22,146 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:19:22,147 [15] DEBUG [(null)] - Close Connection "2005581" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:19:22,149 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '08e9ed0b-db42-480d-ab10-47a788e65318','382952aa-ecb3-4708-95a0-c01754009101','2017/1/17 0:00:00','2017/1/17 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:19:22,149 [15] DEBUG [(null)] - Open Connection "63253921" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:19:22,167 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:19:22,168 [15] DEBUG [(null)] - Close Connection "63253921" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:19:22,169 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:19:22,170 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:19:22,170 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:19:22,171 [15] DEBUG [(null)] - Open Connection "17864182" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:19:22,212 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:19:22,214 [15] DEBUG [(null)] - Close Connection "17864182" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:19:22,216 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:19:22,217 [15] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:19:22,218 [15] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:19:22,220 [15] DEBUG [(null)] - Open Connection "20321164" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:19:22,239 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:19:22,240 [15] DEBUG [(null)] - Close Connection "20321164" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:19:25,927 [19] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:19:25,928 [19] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:19:25,929 [19] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:19:25,930 [19] DEBUG [(null)] - Open Connection "46354799" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:19:25,956 [19] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:19:25,960 [19] DEBUG [(null)] - Close Connection "46354799" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:19:25,962 [19] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:19:25,963 [19] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:19:25,970 [19] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:19:25,971 [19] DEBUG [(null)] - Open Connection "63751201" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:19:25,993 [19] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:19:25,993 [19] DEBUG [(null)] - Close Connection "63751201" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:29,885 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:29,886 [18] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:29,887 [18] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:29,888 [18] DEBUG [(null)] - Open Connection "18828809" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:29,901 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:29,902 [18] DEBUG [(null)] - Close Connection "18828809" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:29,903 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:29,904 [18] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],2], @param2=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:29,905 [18] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:29,907 [18] DEBUG [(null)] - Open Connection "40532212" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:29,929 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:29,930 [18] DEBUG [(null)] - Close Connection "40532212" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:29,937 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:29,939 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59], @param3=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:29,940 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:29,941 [18] DEBUG [(null)] - Open Connection "33972640" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:29,959 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:29,960 [18] DEBUG [(null)] - Close Connection "33972640" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:29,961 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:29,962 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:29,963 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:29,964 [18] DEBUG [(null)] - Open Connection "65756461" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:29,975 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:29,976 [18] DEBUG [(null)] - Close Connection "65756461" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:29,977 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:29,978 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:29,979 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:29,979 [18] DEBUG [(null)] - Open Connection "30082716" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:29,990 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:29,991 [18] DEBUG [(null)] - Close Connection "30082716" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:29,992 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '08e9ed0b-db42-480d-ab10-47a788e65318','382952aa-ecb3-4708-95a0-c01754009101','2017/1/17 0:00:00','2017/1/17 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:29,992 [18] DEBUG [(null)] - Open Connection "34667776" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:30,012 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:30,013 [18] DEBUG [(null)] - Close Connection "34667776" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:30,014 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:30,015 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:30,016 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:30,017 [18] DEBUG [(null)] - Open Connection "52173092" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:30,065 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:30,066 [18] DEBUG [(null)] - Close Connection "52173092" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:30,067 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:30,068 [18] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:30,069 [18] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:30,070 [18] DEBUG [(null)] - Open Connection "57905116" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:30,107 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:30,108 [18] DEBUG [(null)] - Close Connection "57905116" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:33,601 [22] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:33,602 [22] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:33,604 [22] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:33,607 [22] DEBUG [(null)] - Open Connection "51450674" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:33,649 [22] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:33,656 [22] DEBUG [(null)] - Close Connection "51450674" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:33,663 [22] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:33,669 [22] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:33,680 [22] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:33,684 [22] DEBUG [(null)] - Open Connection "20183393" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:33,708 [22] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:33,721 [22] DEBUG [(null)] - Close Connection "20183393" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:52,715 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:52,717 [18] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:52,718 [18] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:52,720 [18] DEBUG [(null)] - Open Connection "50560908" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:52,731 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:52,732 [18] DEBUG [(null)] - Close Connection "50560908" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:52,733 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:52,734 [18] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],2], @param2=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:52,735 [18] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:52,736 [18] DEBUG [(null)] - Open Connection "875823" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:52,758 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:52,759 [18] DEBUG [(null)] - Close Connection "875823" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:52,767 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:52,768 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59], @param3=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:52,769 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:52,770 [18] DEBUG [(null)] - Open Connection "329527" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:52,783 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:52,783 [18] DEBUG [(null)] - Close Connection "329527" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:52,784 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:52,785 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:52,786 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:52,787 [18] DEBUG [(null)] - Open Connection "25373615" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:52,804 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:52,805 [18] DEBUG [(null)] - Close Connection "25373615" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:52,806 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:52,807 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:52,808 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:52,809 [18] DEBUG [(null)] - Open Connection "7611307" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:52,821 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:52,822 [18] DEBUG [(null)] - Close Connection "7611307" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:52,823 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '08e9ed0b-db42-480d-ab10-47a788e65318','382952aa-ecb3-4708-95a0-c01754009101','2017/1/17 0:00:00','2017/1/17 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:52,824 [18] DEBUG [(null)] - Open Connection "49199760" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:52,835 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:52,836 [18] DEBUG [(null)] - Close Connection "49199760" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:52,836 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:52,837 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:52,838 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:52,839 [18] DEBUG [(null)] - Open Connection "30285190" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:52,893 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:52,894 [18] DEBUG [(null)] - Close Connection "30285190" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:52,896 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:52,897 [18] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:52,898 [18] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:52,899 [18] DEBUG [(null)] - Open Connection "50258266" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:52,919 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:52,920 [18] DEBUG [(null)] - Close Connection "50258266" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:57,640 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:57,641 [18] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:57,642 [18] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:57,643 [18] DEBUG [(null)] - Open Connection "15356864" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:57,670 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:57,685 [18] DEBUG [(null)] - Close Connection "15356864" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:57,690 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:57,695 [18] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:22:57,704 [18] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:57,706 [18] DEBUG [(null)] - Open Connection "41627871" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:57,734 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:22:57,735 [18] DEBUG [(null)] - Close Connection "41627871" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:23:48,296 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:23:48,299 [18] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:23:48,303 [18] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:23:48,305 [18] DEBUG [(null)] - Open Connection "49562621" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:23:48,319 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:23:48,320 [18] DEBUG [(null)] - Close Connection "49562621" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:23:48,321 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:23:48,322 [18] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],2], @param2=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:23:48,323 [18] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:23:48,324 [18] DEBUG [(null)] - Open Connection "58225491" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:23:48,353 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:23:48,354 [18] DEBUG [(null)] - Close Connection "58225491" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:23:48,361 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:23:48,362 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59], @param3=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:23:48,363 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:23:48,364 [18] DEBUG [(null)] - Open Connection "54177857" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:23:48,377 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:23:48,378 [18] DEBUG [(null)] - Close Connection "54177857" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:23:48,379 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:23:48,380 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:23:48,381 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:23:48,382 [18] DEBUG [(null)] - Open Connection "10945467" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:23:48,395 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:23:48,396 [18] DEBUG [(null)] - Close Connection "10945467" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:23:48,397 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:23:48,398 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:23:48,399 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:23:48,400 [18] DEBUG [(null)] - Open Connection "37494663" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:23:48,416 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:23:48,417 [18] DEBUG [(null)] - Close Connection "37494663" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:23:48,418 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '08e9ed0b-db42-480d-ab10-47a788e65318','382952aa-ecb3-4708-95a0-c01754009101','2017/1/17 0:00:00','2017/1/17 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:23:48,419 [18] DEBUG [(null)] - Open Connection "1407914" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:23:48,429 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:23:48,430 [18] DEBUG [(null)] - Close Connection "1407914" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:23:48,431 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:23:48,432 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:23:48,433 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:23:48,434 [18] DEBUG [(null)] - Open Connection "41300564" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:23:48,475 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:23:48,476 [18] DEBUG [(null)] - Close Connection "41300564" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:23:48,477 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:23:48,478 [18] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:23:48,479 [18] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:23:48,479 [18] DEBUG [(null)] - Open Connection "26026862" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:23:48,507 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:23:48,508 [18] DEBUG [(null)] - Close Connection "26026862" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:23:51,824 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:23:51,825 [18] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:23:51,827 [18] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:23:51,828 [18] DEBUG [(null)] - Open Connection "35229718" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:23:51,862 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:23:51,863 [18] DEBUG [(null)] - Close Connection "35229718" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:23:51,864 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:23:51,877 [18] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:23:51,879 [18] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:23:51,880 [18] DEBUG [(null)] - Open Connection "28333794" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:23:51,937 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:23:51,946 [18] DEBUG [(null)] - Close Connection "28333794" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:26:05,017 [19] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:26:05,017 [19] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:26:05,018 [19] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:26:05,019 [19] DEBUG [(null)] - Open Connection "14022738" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:26:05,032 [19] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:26:05,033 [19] DEBUG [(null)] - Close Connection "14022738" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:26:05,035 [19] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:26:05,036 [19] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],2], @param2=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:26:05,037 [19] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:26:05,038 [19] DEBUG [(null)] - Open Connection "62099973" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:26:05,063 [19] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:26:05,064 [19] DEBUG [(null)] - Close Connection "62099973" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:26:05,073 [19] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:26:05,076 [19] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59], @param3=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:26:05,078 [19] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:26:05,079 [19] DEBUG [(null)] - Open Connection "64041877" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:26:05,098 [19] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:26:05,099 [19] DEBUG [(null)] - Close Connection "64041877" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:26:05,099 [19] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:26:05,100 [19] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:26:05,101 [19] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:26:05,102 [19] DEBUG [(null)] - Open Connection "20009510" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:26:05,116 [19] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:26:05,117 [19] DEBUG [(null)] - Close Connection "20009510" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:26:05,118 [19] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:26:05,118 [19] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:26:05,119 [19] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:26:05,120 [19] DEBUG [(null)] - Open Connection "10157596" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:26:05,135 [19] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:26:05,136 [19] DEBUG [(null)] - Close Connection "10157596" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:26:05,137 [19] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '08e9ed0b-db42-480d-ab10-47a788e65318','382952aa-ecb3-4708-95a0-c01754009101','2017/1/17 0:00:00','2017/1/17 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:26:05,138 [19] DEBUG [(null)] - Open Connection "17458972" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:26:05,150 [19] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:26:05,150 [19] DEBUG [(null)] - Close Connection "17458972" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:26:05,151 [19] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:26:05,152 [19] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:26:05,154 [19] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:26:05,155 [19] DEBUG [(null)] - Open Connection "4890633" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:26:05,199 [19] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:26:05,200 [19] DEBUG [(null)] - Close Connection "4890633" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:26:05,201 [19] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:26:05,201 [19] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:26:05,203 [19] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:26:05,205 [19] DEBUG [(null)] - Open Connection "60596999" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:26:05,234 [19] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:26:05,235 [19] DEBUG [(null)] - Close Connection "60596999" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:26:06,856 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:26:06,859 [17] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:26:06,860 [17] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:26:06,864 [17] DEBUG [(null)] - Open Connection "59930883" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:26:06,876 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:26:06,877 [17] DEBUG [(null)] - Close Connection "59930883" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:26:06,878 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:26:06,879 [17] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:26:06,881 [17] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:26:06,882 [17] DEBUG [(null)] - Open Connection "12878304" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:26:06,990 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:26:06,990 [17] DEBUG [(null)] - Close Connection "12878304" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:34:40,171 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:34:40,173 [18] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:34:40,174 [18] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:34:40,175 [18] DEBUG [(null)] - Open Connection "62889868" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:34:40,191 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:34:40,192 [18] DEBUG [(null)] - Close Connection "62889868" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:34:40,194 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:34:40,198 [18] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],2], @param2=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:34:40,200 [18] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:34:40,202 [18] DEBUG [(null)] - Open Connection "10681631" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:34:40,373 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:34:40,375 [18] DEBUG [(null)] - Close Connection "10681631" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:34:40,392 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:34:40,393 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59], @param3=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:34:40,395 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:34:40,396 [18] DEBUG [(null)] - Open Connection "17179267" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:34:40,416 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:34:40,417 [18] DEBUG [(null)] - Close Connection "17179267" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:34:40,419 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:34:40,420 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:34:40,422 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:34:40,424 [18] DEBUG [(null)] - Open Connection "47735153" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:34:40,443 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:34:40,444 [18] DEBUG [(null)] - Close Connection "47735153" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:34:40,445 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:34:40,447 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:34:40,449 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:34:40,450 [18] DEBUG [(null)] - Open Connection "51728189" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:34:40,485 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:34:40,486 [18] DEBUG [(null)] - Close Connection "51728189" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:34:40,496 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '08e9ed0b-db42-480d-ab10-47a788e65318','382952aa-ecb3-4708-95a0-c01754009101','2017/1/17 0:00:00','2017/1/17 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:34:40,503 [18] DEBUG [(null)] - Open Connection "23647652" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:34:40,552 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:34:40,553 [18] DEBUG [(null)] - Close Connection "23647652" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:34:40,554 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:34:40,555 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:34:40,557 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:34:40,558 [18] DEBUG [(null)] - Open Connection "8929938" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:34:40,651 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:34:40,653 [18] DEBUG [(null)] - Close Connection "8929938" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:34:40,654 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:34:40,655 [18] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:34:40,656 [18] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:34:40,657 [18] DEBUG [(null)] - Open Connection "16516630" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:34:40,684 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:34:40,687 [18] DEBUG [(null)] - Close Connection "16516630" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:34:44,325 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:34:44,338 [18] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:34:44,371 [18] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:34:44,402 [18] DEBUG [(null)] - Open Connection "30868212" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:34:44,519 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:34:44,525 [18] DEBUG [(null)] - Close Connection "30868212" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:34:44,530 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:34:44,532 [18] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:34:44,532 [18] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:34:44,532 [18] DEBUG [(null)] - Open Connection "28042097" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:34:44,594 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:34:44,610 [18] DEBUG [(null)] - Close Connection "28042097" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:34:51,654 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [DataTools.RunProcedureOutQuery] based off of PreparedStatement: [p_rep_spxs_mx]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:34:51,662 [13] DEBUG [(null)] - Statement Id: [DataTools.RunProcedureOutQuery] Parameters: [@str=[str,08e9ed0b-db42-480d-ab10-47a788e65318|382952aa-ecb3-4708-95a0-c01754009101|1|25||2017-01-01|2017-01-31||], @outstr=[outstr,]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:34:51,665 [13] DEBUG [(null)] - Statement Id: [DataTools.RunProcedureOutQuery] Types: [@str=[String, System.String], @outstr=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:34:51,672 [13] DEBUG [(null)] - Open Connection "49844892" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:34:53,506 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:34:53,506 [13] DEBUG [(null)] - Close Connection "49844892" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:35:02,060 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:35:02,062 [25] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:35:02,063 [25] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:35:02,064 [25] DEBUG [(null)] - Open Connection "8801159" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:35:02,080 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:35:02,081 [25] DEBUG [(null)] - Close Connection "8801159" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:35:02,082 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:35:02,083 [25] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],2], @param2=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:35:02,084 [25] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:35:02,086 [25] DEBUG [(null)] - Open Connection "51706546" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:35:02,117 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:35:02,119 [25] DEBUG [(null)] - Close Connection "51706546" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:35:02,135 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:35:02,136 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59], @param3=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:35:02,139 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:35:02,140 [25] DEBUG [(null)] - Open Connection "60478282" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:35:02,169 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:35:02,172 [25] DEBUG [(null)] - Close Connection "60478282" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:35:02,174 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:35:02,175 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:35:02,176 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:35:02,177 [25] DEBUG [(null)] - Open Connection "41986415" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:35:02,197 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:35:02,198 [25] DEBUG [(null)] - Close Connection "41986415" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:35:02,199 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:35:02,200 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:35:02,201 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:35:02,202 [25] DEBUG [(null)] - Open Connection "46497451" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:35:02,218 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:35:02,220 [25] DEBUG [(null)] - Close Connection "46497451" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:35:02,222 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '08e9ed0b-db42-480d-ab10-47a788e65318','382952aa-ecb3-4708-95a0-c01754009101','2017/1/17 0:00:00','2017/1/17 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:35:02,224 [25] DEBUG [(null)] - Open Connection "50394158" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:35:02,249 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:35:02,250 [25] DEBUG [(null)] - Close Connection "50394158" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:35:02,251 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:35:02,252 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:35:02,254 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:35:02,255 [25] DEBUG [(null)] - Open Connection "56895250" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:35:02,302 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:35:02,303 [25] DEBUG [(null)] - Close Connection "56895250" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:35:02,305 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:35:02,307 [25] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:35:02,308 [25] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:35:02,309 [25] DEBUG [(null)] - Open Connection "1312408" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:35:02,332 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:35:02,333 [25] DEBUG [(null)] - Close Connection "1312408" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:35:03,650 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:35:03,652 [13] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:35:03,655 [13] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:35:03,660 [13] DEBUG [(null)] - Open Connection "23783434" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:35:03,696 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:35:03,697 [13] DEBUG [(null)] - Close Connection "23783434" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:35:03,698 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:35:03,700 [13] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:35:03,701 [13] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:35:03,702 [13] DEBUG [(null)] - Open Connection "13478473" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:35:03,788 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:35:03,788 [13] DEBUG [(null)] - Close Connection "13478473" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:40:49,080 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:40:49,082 [7] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:40:49,084 [7] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:40:49,086 [7] DEBUG [(null)] - Open Connection "38539055" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:40:49,104 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:40:49,105 [7] DEBUG [(null)] - Close Connection "38539055" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:40:49,107 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:40:49,108 [7] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],2], @param2=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:40:49,109 [7] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:40:49,110 [7] DEBUG [(null)] - Open Connection "63829267" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:40:49,139 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:40:49,139 [7] DEBUG [(null)] - Close Connection "63829267" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:40:49,150 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:40:49,151 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59], @param3=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:40:49,153 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:40:49,155 [7] DEBUG [(null)] - Open Connection "25991031" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:40:49,170 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:40:49,171 [7] DEBUG [(null)] - Close Connection "25991031" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:40:49,172 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:40:49,173 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:40:49,174 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:40:49,174 [7] DEBUG [(null)] - Open Connection "52397676" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:40:49,193 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:40:49,195 [7] DEBUG [(null)] - Close Connection "52397676" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:40:49,201 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:40:49,203 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:40:49,204 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:40:49,205 [7] DEBUG [(null)] - Open Connection "51401730" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:40:49,220 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:40:49,221 [7] DEBUG [(null)] - Close Connection "51401730" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:40:49,222 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '08e9ed0b-db42-480d-ab10-47a788e65318','382952aa-ecb3-4708-95a0-c01754009101','2017/1/17 0:00:00','2017/1/17 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:40:49,223 [7] DEBUG [(null)] - Open Connection "18535496" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:40:49,242 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:40:49,244 [7] DEBUG [(null)] - Close Connection "18535496" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:40:49,245 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:40:49,248 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:40:49,249 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:40:49,250 [7] DEBUG [(null)] - Open Connection "7691598" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:40:49,315 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:40:49,316 [7] DEBUG [(null)] - Close Connection "7691598" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:40:49,318 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:40:49,319 [7] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:40:49,320 [7] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:40:49,321 [7] DEBUG [(null)] - Open Connection "52496165" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:40:49,343 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:40:49,343 [7] DEBUG [(null)] - Close Connection "52496165" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:40:51,545 [14] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:40:51,546 [14] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:40:51,548 [14] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:40:51,556 [14] DEBUG [(null)] - Open Connection "16158185" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:40:51,586 [14] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:40:51,587 [14] DEBUG [(null)] - Close Connection "16158185" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:40:51,589 [14] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:40:51,590 [14] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:40:51,591 [14] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:40:51,592 [14] DEBUG [(null)] - Open Connection "46125209" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:40:51,597 [14] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:40:51,613 [14] DEBUG [(null)] - Close Connection "46125209" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:41:30,607 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:41:30,608 [7] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:41:30,610 [7] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:41:30,612 [7] DEBUG [(null)] - Open Connection "21246467" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:41:30,624 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:41:30,625 [7] DEBUG [(null)] - Close Connection "21246467" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:41:30,627 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:41:30,629 [7] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],2], @param2=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:41:30,630 [7] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:41:30,631 [7] DEBUG [(null)] - Open Connection "30044797" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:41:30,659 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:41:30,661 [7] DEBUG [(null)] - Close Connection "30044797" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:41:30,670 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:41:30,671 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59], @param3=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:41:30,672 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:41:30,673 [7] DEBUG [(null)] - Open Connection "51954215" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:41:30,696 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:41:30,697 [7] DEBUG [(null)] - Close Connection "51954215" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:41:30,699 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:41:30,700 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:41:30,701 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:41:30,702 [7] DEBUG [(null)] - Open Connection "36767505" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:41:30,715 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:41:30,717 [7] DEBUG [(null)] - Close Connection "36767505" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:41:30,718 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:41:30,719 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:41:30,720 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:41:30,721 [7] DEBUG [(null)] - Open Connection "5368140" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:41:30,732 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:41:30,733 [7] DEBUG [(null)] - Close Connection "5368140" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:41:30,734 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '08e9ed0b-db42-480d-ab10-47a788e65318','382952aa-ecb3-4708-95a0-c01754009101','2017/1/17 0:00:00','2017/1/17 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:41:30,735 [7] DEBUG [(null)] - Open Connection "42930920" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:41:30,756 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:41:30,757 [7] DEBUG [(null)] - Close Connection "42930920" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:41:30,758 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:41:30,759 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:41:30,760 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:41:30,762 [7] DEBUG [(null)] - Open Connection "7434228" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:41:30,805 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:41:30,806 [7] DEBUG [(null)] - Close Connection "7434228" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:41:30,808 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:41:30,809 [7] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:41:30,810 [7] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:41:30,811 [7] DEBUG [(null)] - Open Connection "44002944" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:41:30,833 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:41:30,834 [7] DEBUG [(null)] - Close Connection "44002944" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:41:33,032 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:41:33,036 [7] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:41:33,043 [7] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:41:33,049 [7] DEBUG [(null)] - Open Connection "32772097" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:41:33,075 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:41:33,076 [7] DEBUG [(null)] - Close Connection "32772097" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:41:33,078 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:41:33,080 [7] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:41:33,082 [7] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:41:33,083 [7] DEBUG [(null)] - Open Connection "7737381" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:41:33,102 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:41:33,102 [7] DEBUG [(null)] - Close Connection "7737381" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:43:37,948 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:43:37,950 [7] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:43:37,951 [7] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:43:37,953 [7] DEBUG [(null)] - Open Connection "26317094" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:43:37,965 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:43:37,966 [7] DEBUG [(null)] - Close Connection "26317094" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:43:37,971 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:43:37,972 [7] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],2], @param2=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:43:37,973 [7] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:43:37,974 [7] DEBUG [(null)] - Open Connection "63157760" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:43:38,000 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:43:38,002 [7] DEBUG [(null)] - Close Connection "63157760" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:43:38,011 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:43:38,013 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59], @param3=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:43:38,013 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:43:38,014 [7] DEBUG [(null)] - Open Connection "3831323" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:43:38,028 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:43:38,029 [7] DEBUG [(null)] - Close Connection "3831323" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:43:38,030 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:43:38,031 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:43:38,032 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:43:38,034 [7] DEBUG [(null)] - Open Connection "59324806" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:43:38,047 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:43:38,047 [7] DEBUG [(null)] - Close Connection "59324806" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:43:38,048 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:43:38,049 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:43:38,050 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:43:38,052 [7] DEBUG [(null)] - Open Connection "11561553" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:43:38,062 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:43:38,063 [7] DEBUG [(null)] - Close Connection "11561553" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:43:38,064 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '08e9ed0b-db42-480d-ab10-47a788e65318','382952aa-ecb3-4708-95a0-c01754009101','2017/1/17 0:00:00','2017/1/17 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:43:38,065 [7] DEBUG [(null)] - Open Connection "45986957" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:43:38,082 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:43:38,084 [7] DEBUG [(null)] - Close Connection "45986957" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:43:38,085 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:43:38,086 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:43:38,087 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:43:38,088 [7] DEBUG [(null)] - Open Connection "41174602" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:43:38,133 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:43:38,134 [7] DEBUG [(null)] - Close Connection "41174602" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:43:38,135 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:43:38,136 [7] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:43:38,137 [7] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:43:38,138 [7] DEBUG [(null)] - Open Connection "16584599" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:43:38,166 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:43:38,167 [7] DEBUG [(null)] - Close Connection "16584599" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:43:43,364 [14] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:43:43,367 [14] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:43:43,370 [14] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:43:43,375 [14] DEBUG [(null)] - Open Connection "57567831" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:43:43,389 [14] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:43:43,391 [14] DEBUG [(null)] - Close Connection "57567831" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:43:43,392 [14] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:43:43,396 [14] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:43:43,397 [14] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:43:43,398 [14] DEBUG [(null)] - Open Connection "21976775" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:43:43,417 [14] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:43:43,422 [14] DEBUG [(null)] - Close Connection "21976775" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:48:54,362 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:48:54,363 [3] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:48:54,364 [3] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:48:54,365 [3] DEBUG [(null)] - Open Connection "6677619" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:48:54,381 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:48:54,385 [3] DEBUG [(null)] - Close Connection "6677619" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:48:54,388 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:48:54,389 [3] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],2], @param2=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:48:54,390 [3] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:48:54,390 [3] DEBUG [(null)] - Open Connection "46410672" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:48:54,417 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:48:54,418 [3] DEBUG [(null)] - Close Connection "46410672" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:48:54,427 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:48:54,428 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59], @param3=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:48:54,429 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:48:54,429 [3] DEBUG [(null)] - Open Connection "50783929" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:48:54,445 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:48:54,447 [3] DEBUG [(null)] - Close Connection "50783929" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:48:54,448 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:48:54,449 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:48:54,450 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:48:54,451 [3] DEBUG [(null)] - Open Connection "58020434" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:48:54,471 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:48:54,472 [3] DEBUG [(null)] - Close Connection "58020434" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:48:54,472 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:48:54,473 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:48:54,474 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:48:54,475 [3] DEBUG [(null)] - Open Connection "46823296" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:48:54,486 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:48:54,487 [3] DEBUG [(null)] - Close Connection "46823296" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:48:54,487 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '08e9ed0b-db42-480d-ab10-47a788e65318','382952aa-ecb3-4708-95a0-c01754009101','2017/1/17 0:00:00','2017/1/17 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:48:54,488 [3] DEBUG [(null)] - Open Connection "57798534" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:48:54,503 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:48:54,504 [3] DEBUG [(null)] - Close Connection "57798534" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:48:54,504 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:48:54,505 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:48:54,506 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:48:54,507 [3] DEBUG [(null)] - Open Connection "43050984" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:48:54,573 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:48:54,575 [3] DEBUG [(null)] - Close Connection "43050984" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:48:54,578 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:48:54,580 [3] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:48:54,584 [3] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:48:54,586 [3] DEBUG [(null)] - Open Connection "60778090" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:48:54,620 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:48:54,621 [3] DEBUG [(null)] - Close Connection "60778090" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:48:56,614 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:48:56,615 [17] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:48:56,619 [17] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:48:56,620 [17] DEBUG [(null)] - Open Connection "41036696" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:48:56,637 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:48:56,661 [17] DEBUG [(null)] - Close Connection "41036696" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:48:56,663 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:48:56,680 [17] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:48:56,689 [17] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:48:56,710 [17] DEBUG [(null)] - Open Connection "42888834" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:48:56,753 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:48:56,762 [17] DEBUG [(null)] - Close Connection "42888834" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:49:14,762 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:49:14,763 [3] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:49:14,765 [3] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:49:14,766 [3] DEBUG [(null)] - Open Connection "63006511" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:49:14,782 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:49:14,783 [3] DEBUG [(null)] - Close Connection "63006511" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:49:14,784 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:49:14,785 [3] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],2], @param2=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:49:14,786 [3] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:49:14,787 [3] DEBUG [(null)] - Open Connection "64477733" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:49:14,813 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:49:14,814 [3] DEBUG [(null)] - Close Connection "64477733" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:49:14,822 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:49:14,823 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59], @param3=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:49:14,824 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:49:14,825 [3] DEBUG [(null)] - Open Connection "22379652" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:49:14,848 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:49:14,849 [3] DEBUG [(null)] - Close Connection "22379652" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:49:14,850 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:49:14,850 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:49:14,851 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:49:14,852 [3] DEBUG [(null)] - Open Connection "44909775" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:49:14,864 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:49:14,865 [3] DEBUG [(null)] - Close Connection "44909775" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:49:14,866 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:49:14,867 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:49:14,868 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:49:14,869 [3] DEBUG [(null)] - Open Connection "25268682" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:49:14,880 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:49:14,880 [3] DEBUG [(null)] - Close Connection "25268682" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:49:14,881 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '08e9ed0b-db42-480d-ab10-47a788e65318','382952aa-ecb3-4708-95a0-c01754009101','2017/1/17 0:00:00','2017/1/17 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:49:14,882 [3] DEBUG [(null)] - Open Connection "26914426" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:49:14,900 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:49:14,901 [3] DEBUG [(null)] - Close Connection "26914426" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:49:14,902 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:49:14,903 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:49:14,904 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:49:14,905 [3] DEBUG [(null)] - Open Connection "54892066" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:49:14,948 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:49:14,949 [3] DEBUG [(null)] - Close Connection "54892066" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:49:14,950 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:49:14,951 [3] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:49:14,952 [3] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:49:14,953 [3] DEBUG [(null)] - Open Connection "60749894" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:49:14,974 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:49:14,975 [3] DEBUG [(null)] - Close Connection "60749894" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:49:16,046 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:49:16,047 [17] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:49:16,048 [17] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:49:16,050 [17] DEBUG [(null)] - Open Connection "706070" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:49:16,068 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:49:16,069 [17] DEBUG [(null)] - Close Connection "706070" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:49:16,071 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:49:16,072 [17] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:49:16,076 [17] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:49:16,077 [17] DEBUG [(null)] - Open Connection "51543135" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:49:16,103 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:49:16,154 [17] DEBUG [(null)] - Close Connection "51543135" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:49:39,582 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [DataTools.RunProcedureOutQuery] based off of PreparedStatement: [p_rep_spxs_mx]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:49:39,589 [3] DEBUG [(null)] - Statement Id: [DataTools.RunProcedureOutQuery] Parameters: [@str=[str,08e9ed0b-db42-480d-ab10-47a788e65318|382952aa-ecb3-4708-95a0-c01754009101|1|25|2dab2f66-31d9-4de5-9267-3746844187d6|2017-01-01|2017-01-31||], @outstr=[outstr,]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:49:39,591 [3] DEBUG [(null)] - Statement Id: [DataTools.RunProcedureOutQuery] Types: [@str=[String, System.String], @outstr=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:49:39,593 [3] DEBUG [(null)] - Open Connection "43750135" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:49:39,733 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:49:39,736 [3] DEBUG [(null)] - Close Connection "43750135" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:59:15,477 [10] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:59:15,478 [10] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:59:15,479 [10] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:59:15,480 [10] DEBUG [(null)] - Open Connection "58555143" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:59:15,496 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:59:15,499 [10] DEBUG [(null)] - Close Connection "58555143" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:59:15,505 [10] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:59:15,508 [10] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],2], @param2=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:59:15,509 [10] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:59:15,511 [10] DEBUG [(null)] - Open Connection "17735776" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:59:15,537 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:59:15,538 [10] DEBUG [(null)] - Close Connection "17735776" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:59:15,550 [10] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:59:15,552 [10] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59], @param3=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:59:15,553 [10] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:59:15,554 [10] DEBUG [(null)] - Open Connection "59912460" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:59:15,567 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:59:15,567 [10] DEBUG [(null)] - Close Connection "59912460" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:59:15,568 [10] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:59:15,569 [10] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:59:15,570 [10] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:59:15,571 [10] DEBUG [(null)] - Open Connection "11706154" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:59:15,588 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:59:15,589 [10] DEBUG [(null)] - Close Connection "11706154" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:59:15,590 [10] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:59:15,591 [10] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:59:15,592 [10] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:59:15,592 [10] DEBUG [(null)] - Open Connection "57014885" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:59:15,604 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:59:15,605 [10] DEBUG [(null)] - Close Connection "57014885" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:59:15,606 [10] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '08e9ed0b-db42-480d-ab10-47a788e65318','382952aa-ecb3-4708-95a0-c01754009101','2017/1/17 0:00:00','2017/1/17 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:59:15,606 [10] DEBUG [(null)] - Open Connection "15533016" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:59:15,620 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:59:15,621 [10] DEBUG [(null)] - Close Connection "15533016" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:59:15,622 [10] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:59:15,623 [10] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:59:15,624 [10] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:59:15,624 [10] DEBUG [(null)] - Open Connection "27897121" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:59:15,672 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:59:15,673 [10] DEBUG [(null)] - Close Connection "27897121" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:59:15,674 [10] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:59:15,674 [10] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:59:15,676 [10] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:59:15,677 [10] DEBUG [(null)] - Open Connection "47410915" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:59:15,702 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:59:15,703 [10] DEBUG [(null)] - Close Connection "47410915" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:59:17,821 [16] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:59:17,823 [16] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:59:17,824 [16] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:59:17,825 [16] DEBUG [(null)] - Open Connection "13235262" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:59:17,843 [16] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:59:17,845 [16] DEBUG [(null)] - Close Connection "13235262" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:59:17,862 [16] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:59:17,863 [16] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:59:17,865 [16] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:59:17,866 [16] DEBUG [(null)] - Open Connection "40817870" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:59:17,883 [16] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:59:17,884 [16] DEBUG [(null)] - Close Connection "40817870" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:59:19,873 [10] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [DataTools.RunProcedureOutQuery] based off of PreparedStatement: [p_rep_spxs_mx]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:59:19,875 [10] DEBUG [(null)] - Statement Id: [DataTools.RunProcedureOutQuery] Parameters: [@str=[str,08e9ed0b-db42-480d-ab10-47a788e65318|382952aa-ecb3-4708-95a0-c01754009101|1|25|2dab2f66-31d9-4de5-9267-3746844187d6|2017-01-01|2017-01-31||], @outstr=[outstr,]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 10:59:19,877 [10] DEBUG [(null)] - Statement Id: [DataTools.RunProcedureOutQuery] Types: [@str=[String, System.String], @outstr=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:59:19,878 [10] DEBUG [(null)] - Open Connection "33352210" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:59:19,898 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 10:59:19,898 [10] DEBUG [(null)] - Close Connection "33352210" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:10,857 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:10,858 [25] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:10,859 [25] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:10,860 [25] DEBUG [(null)] - Open Connection "20471829" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:10,891 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:10,892 [25] DEBUG [(null)] - Close Connection "20471829" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:10,893 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:10,894 [25] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],2], @param2=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:10,895 [25] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:10,897 [25] DEBUG [(null)] - Open Connection "2058447" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:10,921 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:10,922 [25] DEBUG [(null)] - Close Connection "2058447" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:10,931 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:10,932 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59], @param3=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:10,933 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:10,934 [25] DEBUG [(null)] - Open Connection "14810434" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:10,946 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:10,947 [25] DEBUG [(null)] - Close Connection "14810434" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:10,948 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:10,949 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:10,950 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:10,951 [25] DEBUG [(null)] - Open Connection "11591791" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:10,979 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:10,981 [25] DEBUG [(null)] - Close Connection "11591791" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:10,982 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:10,983 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:10,984 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:10,985 [25] DEBUG [(null)] - Open Connection "9178558" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:10,998 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:10,999 [25] DEBUG [(null)] - Close Connection "9178558" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:11,000 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '08e9ed0b-db42-480d-ab10-47a788e65318','382952aa-ecb3-4708-95a0-c01754009101','2017/1/17 0:00:00','2017/1/17 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:11,001 [25] DEBUG [(null)] - Open Connection "24224577" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:11,012 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:11,014 [25] DEBUG [(null)] - Close Connection "24224577" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:11,015 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:11,016 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:11,017 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:11,018 [25] DEBUG [(null)] - Open Connection "60552689" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:11,062 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:11,063 [25] DEBUG [(null)] - Close Connection "60552689" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:11,064 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:11,065 [25] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:11,066 [25] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:11,067 [25] DEBUG [(null)] - Open Connection "49799150" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:11,093 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:11,094 [25] DEBUG [(null)] - Close Connection "49799150" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:12,187 [16] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:12,188 [16] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:12,189 [16] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:12,191 [16] DEBUG [(null)] - Open Connection "26868334" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:12,209 [16] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:12,210 [16] DEBUG [(null)] - Close Connection "26868334" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:12,214 [16] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:12,215 [16] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:12,216 [16] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:12,241 [16] DEBUG [(null)] - Open Connection "41975730" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:12,256 [16] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:12,258 [16] DEBUG [(null)] - Close Connection "41975730" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:53,395 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:53,397 [25] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:53,400 [25] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:53,401 [25] DEBUG [(null)] - Open Connection "49167701" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:53,413 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:53,414 [25] DEBUG [(null)] - Close Connection "49167701" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:53,415 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:53,416 [25] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],2], @param2=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:53,417 [25] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:53,418 [25] DEBUG [(null)] - Open Connection "62335031" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:53,445 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:53,446 [25] DEBUG [(null)] - Close Connection "62335031" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:53,454 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:53,455 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59], @param3=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:53,456 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:53,458 [25] DEBUG [(null)] - Open Connection "35618473" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:53,476 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:53,477 [25] DEBUG [(null)] - Close Connection "35618473" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:53,478 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:53,479 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:53,480 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:53,481 [25] DEBUG [(null)] - Open Connection "48952172" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:53,492 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:53,495 [25] DEBUG [(null)] - Close Connection "48952172" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:53,497 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:53,498 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:53,499 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:53,500 [25] DEBUG [(null)] - Open Connection "39704491" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:53,514 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:53,516 [25] DEBUG [(null)] - Close Connection "39704491" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:53,517 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '08e9ed0b-db42-480d-ab10-47a788e65318','382952aa-ecb3-4708-95a0-c01754009101','2017/1/17 0:00:00','2017/1/17 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:53,518 [25] DEBUG [(null)] - Open Connection "8222005" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:53,541 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:53,543 [25] DEBUG [(null)] - Close Connection "8222005" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:53,544 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:53,545 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:53,546 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:53,547 [25] DEBUG [(null)] - Open Connection "58004163" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:53,612 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:53,615 [25] DEBUG [(null)] - Close Connection "58004163" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:53,619 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:53,622 [25] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:53,625 [25] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:53,629 [25] DEBUG [(null)] - Open Connection "50639415" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:53,689 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:53,690 [25] DEBUG [(null)] - Close Connection "50639415" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:54,976 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:54,977 [25] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:54,978 [25] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:54,979 [25] DEBUG [(null)] - Open Connection "46935166" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:55,023 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:55,024 [25] DEBUG [(null)] - Close Connection "46935166" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:55,025 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:55,029 [25] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:55,030 [25] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:55,031 [25] DEBUG [(null)] - Open Connection "29245382" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:55,100 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:55,101 [25] DEBUG [(null)] - Close Connection "29245382" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:59,785 [12] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [DataTools.RunProcedureOutQuery] based off of PreparedStatement: [p_rep_spxs_mx]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:59,787 [12] DEBUG [(null)] - Statement Id: [DataTools.RunProcedureOutQuery] Parameters: [@str=[str,08e9ed0b-db42-480d-ab10-47a788e65318|382952aa-ecb3-4708-95a0-c01754009101|1|25|2dab2f66-31d9-4de5-9267-3746844187d6|2017-01-01|2017-01-31||], @outstr=[outstr,]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:00:59,788 [12] DEBUG [(null)] - Statement Id: [DataTools.RunProcedureOutQuery] Types: [@str=[String, System.String], @outstr=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:59,790 [12] DEBUG [(null)] - Open Connection "10212830" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:59,812 [12] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:00:59,812 [12] DEBUG [(null)] - Close Connection "10212830" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:01:28,946 [16] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:01:28,947 [16] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:01:28,947 [16] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:01:28,948 [16] DEBUG [(null)] - Open Connection "19186756" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:01:28,961 [16] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:01:28,962 [16] DEBUG [(null)] - Close Connection "19186756" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:01:28,963 [16] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:01:28,964 [16] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],2], @param2=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:01:28,965 [16] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:01:28,966 [16] DEBUG [(null)] - Open Connection "48817799" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:01:28,999 [16] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:01:29,000 [16] DEBUG [(null)] - Close Connection "48817799" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:01:29,010 [16] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:01:29,011 [16] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59], @param3=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:01:29,012 [16] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:01:29,013 [16] DEBUG [(null)] - Open Connection "12984983" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:01:29,027 [16] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:01:29,028 [16] DEBUG [(null)] - Close Connection "12984983" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:01:29,029 [16] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:01:29,030 [16] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:01:29,031 [16] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:01:29,031 [16] DEBUG [(null)] - Open Connection "23548653" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:01:29,045 [16] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:01:29,046 [16] DEBUG [(null)] - Close Connection "23548653" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:01:29,046 [16] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:01:29,047 [16] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:01:29,048 [16] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:01:29,049 [16] DEBUG [(null)] - Open Connection "14244337" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:01:29,067 [16] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:01:29,067 [16] DEBUG [(null)] - Close Connection "14244337" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:01:29,068 [16] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '08e9ed0b-db42-480d-ab10-47a788e65318','382952aa-ecb3-4708-95a0-c01754009101','2017/1/17 0:00:00','2017/1/17 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:01:29,069 [16] DEBUG [(null)] - Open Connection "43335169" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:01:29,080 [16] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:01:29,081 [16] DEBUG [(null)] - Close Connection "43335169" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:01:29,082 [16] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:01:29,083 [16] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:01:29,083 [16] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:01:29,084 [16] DEBUG [(null)] - Open Connection "37336710" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:01:29,127 [16] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:01:29,128 [16] DEBUG [(null)] - Close Connection "37336710" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:01:29,129 [16] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:01:29,130 [16] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:01:29,131 [16] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:01:29,133 [16] DEBUG [(null)] - Open Connection "26096211" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:01:29,160 [16] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:01:29,161 [16] DEBUG [(null)] - Close Connection "26096211" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:01:30,364 [12] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:01:30,365 [12] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:01:30,366 [12] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:01:30,367 [12] DEBUG [(null)] - Open Connection "24963504" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:01:30,398 [12] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:01:30,400 [12] DEBUG [(null)] - Close Connection "24963504" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:01:30,401 [12] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:01:30,402 [12] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:01:30,403 [12] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:01:30,407 [12] DEBUG [(null)] - Open Connection "47997320" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:01:30,423 [12] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:01:30,424 [12] DEBUG [(null)] - Close Connection "47997320" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:01:32,202 [16] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [DataTools.RunProcedureOutQuery] based off of PreparedStatement: [p_rep_spxs_mx]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:01:32,204 [16] DEBUG [(null)] - Statement Id: [DataTools.RunProcedureOutQuery] Parameters: [@str=[str,08e9ed0b-db42-480d-ab10-47a788e65318|382952aa-ecb3-4708-95a0-c01754009101|1|25|2dab2f66-31d9-4de5-9267-3746844187d6|2017-01-01|2017-01-31||], @outstr=[outstr,]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:01:32,206 [16] DEBUG [(null)] - Statement Id: [DataTools.RunProcedureOutQuery] Types: [@str=[String, System.String], @outstr=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:01:32,207 [16] DEBUG [(null)] - Open Connection "56294264" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:01:32,231 [16] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:01:32,232 [16] DEBUG [(null)] - Close Connection "56294264" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:01:53,384 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [DataTools.RunProcedureOutQuery] based off of PreparedStatement: [p_rep_spxs_mx]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:01:53,385 [25] DEBUG [(null)] - Statement Id: [DataTools.RunProcedureOutQuery] Parameters: [@str=[str,08e9ed0b-db42-480d-ab10-47a788e65318|382952aa-ecb3-4708-95a0-c01754009101|1|25|2dab2f66-31d9-4de5-9267-3746844187d6|2017-01-01|2017-01-31||], @outstr=[outstr,]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:01:53,386 [25] DEBUG [(null)] - Statement Id: [DataTools.RunProcedureOutQuery] Types: [@str=[String, System.String], @outstr=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:01:53,388 [25] DEBUG [(null)] - Open Connection "37367562" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:01:53,413 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:01:53,413 [25] DEBUG [(null)] - Close Connection "37367562" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:16,213 [16] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:16,214 [16] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:16,216 [16] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:16,218 [16] DEBUG [(null)] - Open Connection "13561839" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:16,234 [16] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:16,234 [16] DEBUG [(null)] - Close Connection "13561839" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:16,236 [16] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:16,238 [16] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],2], @param2=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:16,239 [16] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:16,240 [16] DEBUG [(null)] - Open Connection "63351661" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:16,265 [16] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:16,266 [16] DEBUG [(null)] - Close Connection "63351661" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:16,275 [16] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:16,276 [16] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59], @param3=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:16,277 [16] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:16,278 [16] DEBUG [(null)] - Open Connection "9188460" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:16,298 [16] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:16,299 [16] DEBUG [(null)] - Close Connection "9188460" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:16,300 [16] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:16,301 [16] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:16,301 [16] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:16,302 [16] DEBUG [(null)] - Open Connection "30024024" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:16,314 [16] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:16,315 [16] DEBUG [(null)] - Close Connection "30024024" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:16,316 [16] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:16,317 [16] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:16,318 [16] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:16,319 [16] DEBUG [(null)] - Open Connection "58391762" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:16,330 [16] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:16,331 [16] DEBUG [(null)] - Close Connection "58391762" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:16,332 [16] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '08e9ed0b-db42-480d-ab10-47a788e65318','382952aa-ecb3-4708-95a0-c01754009101','2017/1/17 0:00:00','2017/1/17 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:16,333 [16] DEBUG [(null)] - Open Connection "2499804" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:16,344 [16] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:16,345 [16] DEBUG [(null)] - Close Connection "2499804" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:16,346 [16] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:16,347 [16] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:16,348 [16] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:16,349 [16] DEBUG [(null)] - Open Connection "38268807" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:16,410 [16] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:16,411 [16] DEBUG [(null)] - Close Connection "38268807" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:16,412 [16] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:16,413 [16] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:16,414 [16] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:16,415 [16] DEBUG [(null)] - Open Connection "23302008" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:16,438 [16] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:16,442 [16] DEBUG [(null)] - Close Connection "23302008" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:17,568 [12] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:17,569 [12] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:17,570 [12] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:17,572 [12] DEBUG [(null)] - Open Connection "37174686" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:17,599 [12] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:17,600 [12] DEBUG [(null)] - Close Connection "37174686" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:17,603 [12] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:17,605 [12] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:17,611 [12] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:17,612 [12] DEBUG [(null)] - Open Connection "24101339" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:17,646 [12] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:17,647 [12] DEBUG [(null)] - Close Connection "24101339" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:19,505 [12] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [DataTools.RunProcedureOutQuery] based off of PreparedStatement: [p_rep_spxs_mx]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:19,509 [12] DEBUG [(null)] - Statement Id: [DataTools.RunProcedureOutQuery] Parameters: [@str=[str,08e9ed0b-db42-480d-ab10-47a788e65318|382952aa-ecb3-4708-95a0-c01754009101|1|25|2dab2f66-31d9-4de5-9267-3746844187d6|2017-01-01|2017-01-31||], @outstr=[outstr,]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:19,511 [12] DEBUG [(null)] - Statement Id: [DataTools.RunProcedureOutQuery] Types: [@str=[String, System.String], @outstr=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:19,513 [12] DEBUG [(null)] - Open Connection "45473842" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:19,536 [12] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:19,537 [12] DEBUG [(null)] - Close Connection "45473842" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:36,822 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:36,823 [15] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:36,824 [15] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:36,825 [15] DEBUG [(null)] - Open Connection "57229177" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:36,838 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:36,839 [15] DEBUG [(null)] - Close Connection "57229177" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:36,840 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:36,841 [15] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],2], @param2=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:36,843 [15] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:36,845 [15] DEBUG [(null)] - Open Connection "28909032" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:36,871 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:36,872 [15] DEBUG [(null)] - Close Connection "28909032" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:36,882 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:36,883 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59], @param3=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:36,884 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:36,885 [15] DEBUG [(null)] - Open Connection "38936" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:36,904 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:36,905 [15] DEBUG [(null)] - Close Connection "38936" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:36,907 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:36,908 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:36,909 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:36,910 [15] DEBUG [(null)] - Open Connection "2530889" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:36,928 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:36,929 [15] DEBUG [(null)] - Close Connection "2530889" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:36,930 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:36,931 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:36,932 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:36,933 [15] DEBUG [(null)] - Open Connection "30290107" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:36,945 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:36,946 [15] DEBUG [(null)] - Close Connection "30290107" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:36,946 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '08e9ed0b-db42-480d-ab10-47a788e65318','382952aa-ecb3-4708-95a0-c01754009101','2017/1/17 0:00:00','2017/1/17 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:36,947 [15] DEBUG [(null)] - Open Connection "22699950" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:36,966 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:36,967 [15] DEBUG [(null)] - Close Connection "22699950" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:36,967 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:36,968 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:36,969 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:36,970 [15] DEBUG [(null)] - Open Connection "66210658" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:37,031 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:37,033 [15] DEBUG [(null)] - Close Connection "66210658" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:37,037 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:37,039 [15] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:37,041 [15] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:37,045 [15] DEBUG [(null)] - Open Connection "8725527" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:37,080 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:37,081 [15] DEBUG [(null)] - Close Connection "8725527" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:38,238 [14] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:38,240 [14] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:38,245 [14] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:38,247 [14] DEBUG [(null)] - Open Connection "64462057" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:38,266 [14] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:38,267 [14] DEBUG [(null)] - Close Connection "64462057" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:38,268 [14] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:38,269 [14] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:38,270 [14] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:38,271 [14] DEBUG [(null)] - Open Connection "39871385" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:38,331 [14] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:38,332 [14] DEBUG [(null)] - Close Connection "39871385" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:39,387 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [DataTools.RunProcedureOutQuery] based off of PreparedStatement: [p_rep_spxs_mx]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:39,388 [25] DEBUG [(null)] - Statement Id: [DataTools.RunProcedureOutQuery] Parameters: [@str=[str,08e9ed0b-db42-480d-ab10-47a788e65318|382952aa-ecb3-4708-95a0-c01754009101|1|25|2dab2f66-31d9-4de5-9267-3746844187d6|2017-01-01|2017-01-31||], @outstr=[outstr,]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:02:39,391 [25] DEBUG [(null)] - Statement Id: [DataTools.RunProcedureOutQuery] Types: [@str=[String, System.String], @outstr=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:39,394 [25] DEBUG [(null)] - Open Connection "45773871" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:39,426 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:02:39,426 [25] DEBUG [(null)] - Close Connection "45773871" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:03:09,144 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:03:09,145 [25] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:03:09,146 [25] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:03:09,147 [25] DEBUG [(null)] - Open Connection "31841183" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:03:09,163 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:03:09,163 [25] DEBUG [(null)] - Close Connection "31841183" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:03:09,165 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:03:09,166 [25] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],2], @param2=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:03:09,166 [25] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:03:09,167 [25] DEBUG [(null)] - Open Connection "54989901" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:03:09,192 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:03:09,194 [25] DEBUG [(null)] - Close Connection "54989901" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:03:09,204 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:03:09,205 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59], @param3=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:03:09,206 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:03:09,207 [25] DEBUG [(null)] - Open Connection "2577404" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:03:09,219 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:03:09,220 [25] DEBUG [(null)] - Close Connection "2577404" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:03:09,221 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:03:09,222 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:03:09,223 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:03:09,223 [25] DEBUG [(null)] - Open Connection "2192003" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:03:09,243 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:03:09,244 [25] DEBUG [(null)] - Close Connection "2192003" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:03:09,245 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:03:09,246 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:03:09,247 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:03:09,247 [25] DEBUG [(null)] - Open Connection "28833764" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:03:09,259 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:03:09,260 [25] DEBUG [(null)] - Close Connection "28833764" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:03:09,261 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '08e9ed0b-db42-480d-ab10-47a788e65318','382952aa-ecb3-4708-95a0-c01754009101','2017/1/17 0:00:00','2017/1/17 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:03:09,262 [25] DEBUG [(null)] - Open Connection "7646343" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:03:09,274 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:03:09,275 [25] DEBUG [(null)] - Close Connection "7646343" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:03:09,276 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:03:09,277 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:03:09,277 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:03:09,278 [25] DEBUG [(null)] - Open Connection "64668542" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:03:09,331 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:03:09,333 [25] DEBUG [(null)] - Close Connection "64668542" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:03:09,334 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:03:09,335 [25] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:03:09,337 [25] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:03:09,339 [25] DEBUG [(null)] - Open Connection "12201665" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:03:09,361 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:03:09,362 [25] DEBUG [(null)] - Close Connection "12201665" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:03:10,521 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:03:10,522 [25] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:03:10,527 [25] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:03:10,535 [25] DEBUG [(null)] - Open Connection "34363487" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:03:10,567 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:03:10,571 [25] DEBUG [(null)] - Close Connection "34363487" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:03:10,572 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:03:10,573 [25] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:03:10,573 [25] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:03:10,574 [25] DEBUG [(null)] - Open Connection "51396441" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:03:10,587 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:03:10,587 [25] DEBUG [(null)] - Close Connection "51396441" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:03:11,906 [14] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [DataTools.RunProcedureOutQuery] based off of PreparedStatement: [p_rep_spxs_mx]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:03:11,908 [14] DEBUG [(null)] - Statement Id: [DataTools.RunProcedureOutQuery] Parameters: [@str=[str,08e9ed0b-db42-480d-ab10-47a788e65318|382952aa-ecb3-4708-95a0-c01754009101|1|25|2dab2f66-31d9-4de5-9267-3746844187d6|2017-01-01|2017-01-31||], @outstr=[outstr,]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:03:11,910 [14] DEBUG [(null)] - Statement Id: [DataTools.RunProcedureOutQuery] Types: [@str=[String, System.String], @outstr=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:03:11,911 [14] DEBUG [(null)] - Open Connection "50468058" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:03:11,934 [14] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:03:11,935 [14] DEBUG [(null)] - Close Connection "50468058" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:04:08,937 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:04:08,939 [25] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:04:08,941 [25] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:04:08,943 [25] DEBUG [(null)] - Open Connection "31578293" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:04:08,957 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:04:08,958 [25] DEBUG [(null)] - Close Connection "31578293" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:04:08,959 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:04:08,961 [25] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],2], @param2=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:04:08,962 [25] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:04:08,963 [25] DEBUG [(null)] - Open Connection "27386479" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:04:08,987 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:04:08,989 [25] DEBUG [(null)] - Close Connection "27386479" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:04:08,999 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:04:09,001 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59], @param3=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:04:09,003 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:04:09,008 [25] DEBUG [(null)] - Open Connection "57008098" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:04:09,028 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:04:09,029 [25] DEBUG [(null)] - Close Connection "57008098" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:04:09,030 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:04:09,031 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:04:09,032 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:04:09,033 [25] DEBUG [(null)] - Open Connection "13161487" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:04:09,045 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:04:09,046 [25] DEBUG [(null)] - Close Connection "13161487" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:04:09,047 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:04:09,048 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:04:09,048 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:04:09,049 [25] DEBUG [(null)] - Open Connection "39778910" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:04:09,062 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:04:09,062 [25] DEBUG [(null)] - Close Connection "39778910" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:04:09,063 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '08e9ed0b-db42-480d-ab10-47a788e65318','382952aa-ecb3-4708-95a0-c01754009101','2017/1/17 0:00:00','2017/1/17 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:04:09,064 [25] DEBUG [(null)] - Open Connection "16036065" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:04:09,086 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:04:09,087 [25] DEBUG [(null)] - Close Connection "16036065" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:04:09,088 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:04:09,089 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:04:09,091 [25] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:04:09,091 [25] DEBUG [(null)] - Open Connection "6065297" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:04:09,135 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:04:09,137 [25] DEBUG [(null)] - Close Connection "6065297" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:04:09,141 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:04:09,144 [25] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:04:09,147 [25] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:04:09,149 [25] DEBUG [(null)] - Open Connection "32876430" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:04:09,190 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:04:09,191 [25] DEBUG [(null)] - Close Connection "32876430" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:04:10,748 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:04:10,750 [15] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:04:10,751 [15] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:04:10,753 [15] DEBUG [(null)] - Open Connection "16986338" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:04:10,771 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:04:10,774 [15] DEBUG [(null)] - Close Connection "16986338" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:04:10,776 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:04:10,778 [15] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:04:10,779 [15] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:04:10,780 [15] DEBUG [(null)] - Open Connection "30370204" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:04:10,803 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:04:10,809 [15] DEBUG [(null)] - Close Connection "30370204" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:04:11,978 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [DataTools.RunProcedureOutQuery] based off of PreparedStatement: [p_rep_spxs_mx]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:04:11,980 [15] DEBUG [(null)] - Statement Id: [DataTools.RunProcedureOutQuery] Parameters: [@str=[str,08e9ed0b-db42-480d-ab10-47a788e65318|382952aa-ecb3-4708-95a0-c01754009101|1|25|2dab2f66-31d9-4de5-9267-3746844187d6|2017-01-01|2017-01-31||], @outstr=[outstr,]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:04:11,982 [15] DEBUG [(null)] - Statement Id: [DataTools.RunProcedureOutQuery] Types: [@str=[String, System.String], @outstr=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:04:11,983 [15] DEBUG [(null)] - Open Connection "65121814" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:04:12,006 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:04:12,006 [15] DEBUG [(null)] - Close Connection "65121814" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:04:41,519 [25] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [DataTools.RunProcedureOutQuery] based off of PreparedStatement: [p_rep_spxs_mx]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:04:41,520 [25] DEBUG [(null)] - Statement Id: [DataTools.RunProcedureOutQuery] Parameters: [@str=[str,08e9ed0b-db42-480d-ab10-47a788e65318|382952aa-ecb3-4708-95a0-c01754009101|101|125|2dab2f66-31d9-4de5-9267-3746844187d6|2017-01-01|2017-01-31||], @outstr=[outstr,]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:04:41,521 [25] DEBUG [(null)] - Statement Id: [DataTools.RunProcedureOutQuery] Types: [@str=[String, System.String], @outstr=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:04:41,522 [25] DEBUG [(null)] - Open Connection "12289640" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:04:41,618 [25] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:04:41,618 [25] DEBUG [(null)] - Close Connection "12289640" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:11:17,156 [8] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:11:17,158 [8] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:11:17,159 [8] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:11:17,161 [8] DEBUG [(null)] - Open Connection "24157162" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:11:17,174 [8] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:11:17,176 [8] DEBUG [(null)] - Close Connection "24157162" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:11:17,177 [8] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:11:17,178 [8] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],2], @param2=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:11:17,179 [8] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:11:17,181 [8] DEBUG [(null)] - Open Connection "21399764" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:11:17,213 [8] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:11:17,214 [8] DEBUG [(null)] - Close Connection "21399764" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:11:17,223 [8] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:11:17,224 [8] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59], @param3=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:11:17,225 [8] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:11:17,228 [8] DEBUG [(null)] - Open Connection "53593797" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:11:17,240 [8] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:11:17,241 [8] DEBUG [(null)] - Close Connection "53593797" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:11:17,242 [8] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:11:17,243 [8] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:11:17,243 [8] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:11:17,244 [8] DEBUG [(null)] - Open Connection "36813453" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:11:17,259 [8] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:11:17,260 [8] DEBUG [(null)] - Close Connection "36813453" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:11:17,261 [8] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:11:17,262 [8] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:11:17,262 [8] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:11:17,263 [8] DEBUG [(null)] - Open Connection "19920490" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:11:17,272 [8] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:11:17,273 [8] DEBUG [(null)] - Close Connection "19920490" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:11:17,275 [8] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '08e9ed0b-db42-480d-ab10-47a788e65318','382952aa-ecb3-4708-95a0-c01754009101','2017/1/17 0:00:00','2017/1/17 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:11:17,275 [8] DEBUG [(null)] - Open Connection "65969499" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:11:17,286 [8] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:11:17,287 [8] DEBUG [(null)] - Close Connection "65969499" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:11:17,288 [8] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:11:17,289 [8] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:11:17,290 [8] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:11:17,291 [8] DEBUG [(null)] - Open Connection "24952390" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:11:17,342 [8] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:11:17,343 [8] DEBUG [(null)] - Close Connection "24952390" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:11:17,344 [8] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:11:17,345 [8] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:11:17,345 [8] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:11:17,346 [8] DEBUG [(null)] - Open Connection "50823206" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:11:17,365 [8] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:11:17,366 [8] DEBUG [(null)] - Close Connection "50823206" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:11:18,486 [14] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:11:18,487 [14] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:11:18,488 [14] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:11:18,490 [14] DEBUG [(null)] - Open Connection "39347903" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:11:18,517 [14] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:11:18,522 [14] DEBUG [(null)] - Close Connection "39347903" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:11:18,558 [14] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:11:18,573 [14] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:11:18,579 [14] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:11:18,611 [14] DEBUG [(null)] - Open Connection "51411861" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:11:18,611 [14] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:11:18,627 [14] DEBUG [(null)] - Close Connection "51411861" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:11:20,804 [8] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [DataTools.RunProcedureOutQuery] based off of PreparedStatement: [p_rep_spxs_mx]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:11:20,805 [8] DEBUG [(null)] - Statement Id: [DataTools.RunProcedureOutQuery] Parameters: [@str=[str,08e9ed0b-db42-480d-ab10-47a788e65318|382952aa-ecb3-4708-95a0-c01754009101|1|25|2dab2f66-31d9-4de5-9267-3746844187d6|2017-01-01|2017-01-31||], @outstr=[outstr,]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:11:20,808 [8] DEBUG [(null)] - Statement Id: [DataTools.RunProcedureOutQuery] Types: [@str=[String, System.String], @outstr=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:11:20,810 [8] DEBUG [(null)] - Open Connection "31842477" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:11:20,834 [8] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:11:20,835 [8] DEBUG [(null)] - Close Connection "31842477" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:13:15,864 [8] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [DataTools.RunProcedureOutQuery] based off of PreparedStatement: [p_rep_spxs_mx]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:13:15,865 [8] DEBUG [(null)] - Statement Id: [DataTools.RunProcedureOutQuery] Parameters: [@str=[str,08e9ed0b-db42-480d-ab10-47a788e65318|382952aa-ecb3-4708-95a0-c01754009101|26|50|2dab2f66-31d9-4de5-9267-3746844187d6|2017-01-01|2017-01-31||], @outstr=[outstr,]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:13:15,866 [8] DEBUG [(null)] - Statement Id: [DataTools.RunProcedureOutQuery] Types: [@str=[String, System.String], @outstr=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:13:15,867 [8] DEBUG [(null)] - Open Connection "28616016" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:13:15,954 [8] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:13:15,954 [8] DEBUG [(null)] - Close Connection "28616016" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:17:54,458 [23] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:17:54,459 [23] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:17:54,461 [23] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:17:54,462 [23] DEBUG [(null)] - Open Connection "16799753" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:17:54,474 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:17:54,475 [23] DEBUG [(null)] - Close Connection "16799753" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:17:54,476 [23] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:17:54,477 [23] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],2], @param2=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:17:54,478 [23] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:17:54,481 [23] DEBUG [(null)] - Open Connection "18963377" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:17:54,512 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:17:54,512 [23] DEBUG [(null)] - Close Connection "18963377" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:17:54,522 [23] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:17:54,523 [23] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59], @param3=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:17:54,523 [23] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:17:54,524 [23] DEBUG [(null)] - Open Connection "27508315" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:17:54,543 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:17:54,544 [23] DEBUG [(null)] - Close Connection "27508315" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:17:54,545 [23] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:17:54,546 [23] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:17:54,547 [23] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:17:54,550 [23] DEBUG [(null)] - Open Connection "51060886" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:17:54,563 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:17:54,564 [23] DEBUG [(null)] - Close Connection "51060886" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:17:54,565 [23] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:17:54,567 [23] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:17:54,567 [23] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:17:54,568 [23] DEBUG [(null)] - Open Connection "53958898" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:17:54,578 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:17:54,579 [23] DEBUG [(null)] - Close Connection "53958898" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:17:54,580 [23] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '08e9ed0b-db42-480d-ab10-47a788e65318','382952aa-ecb3-4708-95a0-c01754009101','2017/1/17 0:00:00','2017/1/17 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:17:54,581 [23] DEBUG [(null)] - Open Connection "66630656" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:17:54,613 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:17:54,614 [23] DEBUG [(null)] - Close Connection "66630656" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:17:54,615 [23] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:17:54,616 [23] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:17:54,618 [23] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:17:54,622 [23] DEBUG [(null)] - Open Connection "20722768" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:17:54,668 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:17:54,672 [23] DEBUG [(null)] - Close Connection "20722768" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:17:54,673 [23] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:17:54,674 [23] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:17:54,675 [23] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:17:54,676 [23] DEBUG [(null)] - Open Connection "63951473" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:17:54,700 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:17:54,701 [23] DEBUG [(null)] - Close Connection "63951473" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:17:55,869 [22] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:17:55,872 [22] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:17:55,877 [22] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:17:55,882 [22] DEBUG [(null)] - Open Connection "11511752" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:17:55,917 [22] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:17:55,918 [22] DEBUG [(null)] - Close Connection "11511752" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:17:55,920 [22] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:17:55,922 [22] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:17:55,923 [22] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:17:55,925 [22] DEBUG [(null)] - Open Connection "63960012" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:17:55,943 [22] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:17:55,945 [22] DEBUG [(null)] - Close Connection "63960012" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:17:57,298 [23] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [DataTools.RunProcedureOutQuery] based off of PreparedStatement: [p_rep_spxs_mx]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:17:57,300 [23] DEBUG [(null)] - Statement Id: [DataTools.RunProcedureOutQuery] Parameters: [@str=[str,08e9ed0b-db42-480d-ab10-47a788e65318|382952aa-ecb3-4708-95a0-c01754009101|1|25|2dab2f66-31d9-4de5-9267-3746844187d6|2017-01-01|2017-01-31||], @outstr=[outstr,]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:17:57,303 [23] DEBUG [(null)] - Statement Id: [DataTools.RunProcedureOutQuery] Types: [@str=[String, System.String], @outstr=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:17:57,305 [23] DEBUG [(null)] - Open Connection "59984866" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:17:57,328 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:17:57,329 [23] DEBUG [(null)] - Close Connection "59984866" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:29,791 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:29,823 [3] DEBUG [(null)] - Close Connection "32962410" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:29,825 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:29,825 [3] DEBUG [(null)] - Close Connection "23490060" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:29,848 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:29,851 [3] DEBUG [(null)] - Close Connection "24398199" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:29,875 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:29,876 [3] DEBUG [(null)] - Close Connection "25972897" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:29,878 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:29,885 [3] DEBUG [(null)] - Close Connection "38886067" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:29,905 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:29,906 [3] DEBUG [(null)] - Close Connection "2675960" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:29,908 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:29,909 [3] DEBUG [(null)] - Close Connection "45491324" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:29,910 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:29,915 [3] DEBUG [(null)] - Close Connection "35155004" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:29,919 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:29,920 [3] DEBUG [(null)] - Close Connection "60764156" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:29,921 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:29,922 [3] DEBUG [(null)] - Close Connection "26357696" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:29,923 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:29,924 [3] DEBUG [(null)] - Close Connection "45427661" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:29,959 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:29,960 [3] DEBUG [(null)] - Close Connection "45247916" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:29,965 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:29,967 [3] DEBUG [(null)] - Close Connection "38457352" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:29,968 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:29,969 [3] DEBUG [(null)] - Close Connection "49795221" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:29,988 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:29,989 [3] DEBUG [(null)] - Close Connection "48036894" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:29,990 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:29,991 [3] DEBUG [(null)] - Close Connection "11320832" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:29,992 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:29,993 [3] DEBUG [(null)] - Close Connection "58236422" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:29,998 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:29,999 [3] DEBUG [(null)] - Close Connection "57384839" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:30,012 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:30,013 [3] DEBUG [(null)] - Close Connection "14300478" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:30,026 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:30,027 [3] DEBUG [(null)] - Close Connection "31002565" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:30,030 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:30,030 [3] DEBUG [(null)] - Close Connection "57281558" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:30,031 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:30,032 [3] DEBUG [(null)] - Close Connection "45589971" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:30,033 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:30,034 [3] DEBUG [(null)] - Close Connection "36832005" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:30,035 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:30,035 [3] DEBUG [(null)] - Close Connection "30146526" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:30,043 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:30,044 [3] DEBUG [(null)] - Close Connection "44510687" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:19:32,434 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:19:32,438 [3] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:19:32,439 [3] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:32,493 [3] DEBUG [(null)] - Open Connection "50811453" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:32,569 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:32,570 [3] DEBUG [(null)] - Close Connection "50811453" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:19:32,576 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:19:32,577 [3] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],2], @param2=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:19:32,578 [3] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:32,579 [3] DEBUG [(null)] - Open Connection "58804375" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:32,602 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:32,603 [3] DEBUG [(null)] - Close Connection "58804375" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:19:32,639 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:19:32,640 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59], @param3=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:19:32,641 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:32,642 [3] DEBUG [(null)] - Open Connection "15922000" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:32,678 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:32,680 [3] DEBUG [(null)] - Close Connection "15922000" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:19:32,682 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:19:32,684 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:19:32,686 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:32,689 [3] DEBUG [(null)] - Open Connection "2238544" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:32,705 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:32,705 [3] DEBUG [(null)] - Close Connection "2238544" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:19:32,707 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:19:32,708 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:19:32,709 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:32,710 [3] DEBUG [(null)] - Open Connection "38055257" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:32,728 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:32,729 [3] DEBUG [(null)] - Close Connection "38055257" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:19:32,732 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '08e9ed0b-db42-480d-ab10-47a788e65318','382952aa-ecb3-4708-95a0-c01754009101','2017/1/17 0:00:00','2017/1/17 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:32,733 [3] DEBUG [(null)] - Open Connection "42959598" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:32,745 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:32,746 [3] DEBUG [(null)] - Close Connection "42959598" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:19:32,747 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:19:32,748 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:19:32,749 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:32,750 [3] DEBUG [(null)] - Open Connection "59224531" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:32,820 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:32,823 [3] DEBUG [(null)] - Close Connection "59224531" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:19:32,831 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:19:32,833 [3] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:19:32,835 [3] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:32,836 [3] DEBUG [(null)] - Open Connection "3129310" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:32,879 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:32,881 [3] DEBUG [(null)] - Close Connection "3129310" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:19:33,292 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User.GetItem] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select  db.[id_cyuser],db.[id_masteruser],db.[id],db.[username],db.[password],db.[name],isnull(master.companyname,db.[companyname])companyname,db.[flag_sex],db.[id_father],db.[job],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[rq_start],db.[rq_stop],db.[flag_state],db.[flag_master],db.[bz],db.[id_province],db.[id_city],db.[id_county],db.[zipcode],db.[address],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[version],db.flag_delete
      ,db.id_shop
      from  [tb_user]
      as db
      LEFT JOIN Tb_user master ON db.id_father=master.id
       where  db.[id]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:19:33,293 [3] DEBUG [(null)] - Statement Id: [Tb_User.GetItem] Parameters: [@param0=[id,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:19:33,294 [3] DEBUG [(null)] - Statement Id: [Tb_User.GetItem] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:33,295 [3] DEBUG [(null)] - Open Connection "67037204" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:33,323 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:33,324 [3] DEBUG [(null)] - Close Connection "67037204" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:19:33,325 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:19:33,326 [3] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:19:33,327 [3] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:33,328 [3] DEBUG [(null)] - Open Connection "65890648" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:33,342 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:33,343 [3] DEBUG [(null)] - Close Connection "65890648" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:19:33,345 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  
					db.[flag_type] in  (  @param0 ,   @param1 ) and db.[flag_stop]= @param2  and 
					exists(
					select 1 from Tb_function as fun
					where
					fun.flag_stop = 0
					 and 
						exists(select 1 from Tb_role_function as rf where rf.id_function = fun.id and rf.id_role in  (  @param3 ,   @param4 ) )
					 
					and (db.path+'/' like fun.path+'/%' or fun.path+'/' like db.path+'/%')
					)
				 order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:19:33,346 [3] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_typeList[0],controller], @param1=[flag_typeList[1],action], @param2=[flag_stop,0], @param3=[id_roleList[0],2], @param4=[id_roleList[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:19:33,348 [3] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[Int32, System.Int32], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:33,349 [3] DEBUG [(null)] - Open Connection "54703861" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:33,429 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:33,430 [3] DEBUG [(null)] - Close Connection "54703861" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:19:33,431 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param0 ,   @param1 ) )
         order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:19:33,432 [3] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[rolelist[0],2], @param1=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:19:33,434 [3] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:33,435 [3] DEBUG [(null)] - Open Connection "57550418" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:33,465 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:33,467 [3] DEBUG [(null)] - Close Connection "57550418" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:19:37,716 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Parm.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[parmcode],db.[parmname],db.[parmvalue],db.[nlast],db.[regex],db.[version],db.[parmdescribe],db.[sort_id],db.[flag_editstyle] from  [ts_parm]
      as db
       where  

          (
          db.[id_masteruser]='0'
           or  db.[id_masteruser]= @param0   
          )
         order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:19:37,717 [7] DEBUG [(null)] - Statement Id: [Ts_Parm.QueryList] Parameters: [@param0=[self_id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:19:37,718 [7] DEBUG [(null)] - Statement Id: [Ts_Parm.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:37,719 [7] DEBUG [(null)] - Open Connection "17363659" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:37,750 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:37,751 [7] DEBUG [(null)] - Close Connection "17363659" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:19:39,466 [8] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:19:39,468 [8] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:19:39,469 [8] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:39,470 [8] DEBUG [(null)] - Open Connection "48404358" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:39,489 [8] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:39,490 [8] DEBUG [(null)] - Close Connection "48404358" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:19:39,495 [8] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:19:39,501 [8] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:19:39,502 [8] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:39,505 [8] DEBUG [(null)] - Open Connection "29117912" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.MappedStatements.ReaderAutoMapper: 2017-01-17 11:19:39,562 [8] ERROR [(null)] - The column [id_shop] could not be auto mapped to a property on [CySoft.Model.Tb.Tb_Shop]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:39,570 [8] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:19:39,571 [8] DEBUG [(null)] - Close Connection "29117912" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:21:04,981 [7] DEBUG [(null)] - Open Connection "51842194" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:21:05,024 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [DataTools.RunProcedureOutQuery] based off of PreparedStatement: [p_rep_spxs_hz]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:21:05,025 [7] DEBUG [(null)] - Statement Id: [DataTools.RunProcedureOutQuery] Parameters: [@str=[str,08e9ed0b-db42-480d-ab10-47a788e65318|382952aa-ecb3-4708-95a0-c01754009101|1|10|0|2017-01-01|2017-01-31|0|0], @outstr=[outstr,]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:21:05,026 [7] DEBUG [(null)] - Statement Id: [DataTools.RunProcedureOutQuery] Types: [@str=[String, System.String], @outstr=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:21:05,223 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:21:05,227 [7] DEBUG [(null)] - Close Connection "51842194" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:21:05,241 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:21:05,246 [7] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:21:05,249 [7] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:21:05,250 [7] DEBUG [(null)] - Open Connection "11802219" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:21:05,269 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:21:05,271 [7] DEBUG [(null)] - Close Connection "11802219" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:21:05,272 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:21:05,273 [7] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:21:05,275 [7] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:21:05,276 [7] DEBUG [(null)] - Open Connection "53928923" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:21:05,294 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:21:05,295 [7] DEBUG [(null)] - Close Connection "53928923" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:21:06,024 [8] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Spfl.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[path],db.[id_father],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[sort_id] from  [tb_spfl]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  
          db.sort_id asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:21:06,025 [8] DEBUG [(null)] - Statement Id: [Tb_Spfl.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:21:06,026 [8] DEBUG [(null)] - Statement Id: [Tb_Spfl.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:21:06,027 [8] DEBUG [(null)] - Open Connection "63147269" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:21:06,068 [8] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:21:06,069 [8] DEBUG [(null)] - Close Connection "63147269" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:30,275 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:30,288 [3] DEBUG [(null)] - Close Connection "32962410" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:30,289 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:30,290 [3] DEBUG [(null)] - Close Connection "23490060" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:30,307 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:30,308 [3] DEBUG [(null)] - Close Connection "24398199" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:30,333 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:30,334 [3] DEBUG [(null)] - Close Connection "25972897" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:30,336 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:30,336 [3] DEBUG [(null)] - Close Connection "38886067" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:30,348 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:30,349 [3] DEBUG [(null)] - Close Connection "2675960" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:30,350 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:30,351 [3] DEBUG [(null)] - Close Connection "45491324" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:30,352 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:30,352 [3] DEBUG [(null)] - Close Connection "35155004" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:30,353 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:30,354 [3] DEBUG [(null)] - Close Connection "60764156" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:30,355 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:30,356 [3] DEBUG [(null)] - Close Connection "26357696" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:30,356 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:30,357 [3] DEBUG [(null)] - Close Connection "45427661" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:30,377 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:30,378 [3] DEBUG [(null)] - Close Connection "45247916" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:30,381 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:30,381 [3] DEBUG [(null)] - Close Connection "38457352" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:30,382 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:30,383 [3] DEBUG [(null)] - Close Connection "49795221" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:30,416 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:30,417 [3] DEBUG [(null)] - Close Connection "48036894" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:30,418 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:30,418 [3] DEBUG [(null)] - Close Connection "11320832" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:30,419 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:30,420 [3] DEBUG [(null)] - Close Connection "58236422" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:30,424 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:30,425 [3] DEBUG [(null)] - Close Connection "57384839" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:30,441 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:30,442 [3] DEBUG [(null)] - Close Connection "14300478" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:30,460 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:30,461 [3] DEBUG [(null)] - Close Connection "31002565" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:30,462 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:30,463 [3] DEBUG [(null)] - Close Connection "57281558" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:30,464 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:30,464 [3] DEBUG [(null)] - Close Connection "45589971" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:30,465 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:30,466 [3] DEBUG [(null)] - Close Connection "36832005" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:30,467 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:30,468 [3] DEBUG [(null)] - Close Connection "30146526" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:30,475 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:30,476 [3] DEBUG [(null)] - Close Connection "44510687" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:32,215 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:32,219 [3] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:32,219 [3] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:32,252 [3] DEBUG [(null)] - Open Connection "50811453" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:32,298 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:32,299 [3] DEBUG [(null)] - Close Connection "50811453" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:32,303 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:32,305 [3] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],2], @param2=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:32,306 [3] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:32,307 [3] DEBUG [(null)] - Open Connection "58804375" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:32,337 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:32,338 [3] DEBUG [(null)] - Close Connection "58804375" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:32,356 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:32,357 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59], @param3=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:32,358 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:32,359 [3] DEBUG [(null)] - Open Connection "15922000" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:32,378 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:32,379 [3] DEBUG [(null)] - Close Connection "15922000" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:32,380 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:32,381 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:32,382 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:32,383 [3] DEBUG [(null)] - Open Connection "2238544" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:32,395 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:32,396 [3] DEBUG [(null)] - Close Connection "2238544" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:32,397 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:32,398 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:32,399 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:32,400 [3] DEBUG [(null)] - Open Connection "38055257" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:32,411 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:32,412 [3] DEBUG [(null)] - Close Connection "38055257" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:32,414 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '08e9ed0b-db42-480d-ab10-47a788e65318','382952aa-ecb3-4708-95a0-c01754009101','2017/1/17 0:00:00','2017/1/17 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:32,415 [3] DEBUG [(null)] - Open Connection "42959598" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:32,433 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:32,434 [3] DEBUG [(null)] - Close Connection "42959598" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:32,435 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:32,436 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:32,437 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:32,437 [3] DEBUG [(null)] - Open Connection "59224531" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:32,497 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:32,500 [3] DEBUG [(null)] - Close Connection "59224531" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:32,505 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:32,507 [3] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:32,509 [3] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:32,512 [3] DEBUG [(null)] - Open Connection "3129310" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:32,562 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:32,565 [3] DEBUG [(null)] - Close Connection "3129310" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:32,951 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User.GetItem] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select  db.[id_cyuser],db.[id_masteruser],db.[id],db.[username],db.[password],db.[name],isnull(master.companyname,db.[companyname])companyname,db.[flag_sex],db.[id_father],db.[job],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[rq_start],db.[rq_stop],db.[flag_state],db.[flag_master],db.[bz],db.[id_province],db.[id_city],db.[id_county],db.[zipcode],db.[address],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[version],db.flag_delete
      ,db.id_shop
      from  [tb_user]
      as db
      LEFT JOIN Tb_user master ON db.id_father=master.id
       where  db.[id]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:32,951 [3] DEBUG [(null)] - Statement Id: [Tb_User.GetItem] Parameters: [@param0=[id,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:32,952 [3] DEBUG [(null)] - Statement Id: [Tb_User.GetItem] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:32,953 [3] DEBUG [(null)] - Open Connection "67037204" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:33,008 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:33,011 [3] DEBUG [(null)] - Close Connection "67037204" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:33,014 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:33,018 [3] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:33,023 [3] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:33,024 [3] DEBUG [(null)] - Open Connection "65890648" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:33,037 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:33,038 [3] DEBUG [(null)] - Close Connection "65890648" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:33,039 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  
					db.[flag_type] in  (  @param0 ,   @param1 ) and db.[flag_stop]= @param2  and 
					exists(
					select 1 from Tb_function as fun
					where
					fun.flag_stop = 0
					 and 
						exists(select 1 from Tb_role_function as rf where rf.id_function = fun.id and rf.id_role in  (  @param3 ,   @param4 ) )
					 
					and (db.path+'/' like fun.path+'/%' or fun.path+'/' like db.path+'/%')
					)
				 order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:33,040 [3] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_typeList[0],controller], @param1=[flag_typeList[1],action], @param2=[flag_stop,0], @param3=[id_roleList[0],2], @param4=[id_roleList[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:33,041 [3] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[Int32, System.Int32], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:33,042 [3] DEBUG [(null)] - Open Connection "54703861" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:33,120 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:33,121 [3] DEBUG [(null)] - Close Connection "54703861" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:33,124 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param0 ,   @param1 ) )
         order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:33,126 [3] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[rolelist[0],2], @param1=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:33,127 [3] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:33,129 [3] DEBUG [(null)] - Open Connection "57550418" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:33,171 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:33,172 [3] DEBUG [(null)] - Close Connection "57550418" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:35,545 [6] DEBUG [(null)] - Open Connection "47846228" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:35,698 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [DataTools.RunProcedureOutQuery] based off of PreparedStatement: [p_rep_spxs_hz]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:35,702 [6] DEBUG [(null)] - Statement Id: [DataTools.RunProcedureOutQuery] Parameters: [@str=[str,08e9ed0b-db42-480d-ab10-47a788e65318|382952aa-ecb3-4708-95a0-c01754009101|1|10|0|2017-01-01|2017-01-31|0|0], @outstr=[outstr,]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:35,704 [6] DEBUG [(null)] - Statement Id: [DataTools.RunProcedureOutQuery] Types: [@str=[String, System.String], @outstr=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:35,774 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:35,776 [6] DEBUG [(null)] - Close Connection "47846228" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:35,801 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Parm.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[parmcode],db.[parmname],db.[parmvalue],db.[nlast],db.[regex],db.[version],db.[parmdescribe],db.[sort_id],db.[flag_editstyle] from  [ts_parm]
      as db
       where  

          (
          db.[id_masteruser]='0'
           or  db.[id_masteruser]= @param0   
          )
         order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:35,804 [6] DEBUG [(null)] - Statement Id: [Ts_Parm.QueryList] Parameters: [@param0=[self_id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:35,806 [6] DEBUG [(null)] - Statement Id: [Ts_Parm.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:35,809 [6] DEBUG [(null)] - Open Connection "32739668" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:35,839 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:35,840 [6] DEBUG [(null)] - Close Connection "32739668" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:35,857 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:35,857 [6] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:35,858 [6] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:35,859 [6] DEBUG [(null)] - Open Connection "49515534" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:35,872 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:35,873 [6] DEBUG [(null)] - Close Connection "49515534" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:35,875 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:35,875 [6] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:35,876 [6] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:35,877 [6] DEBUG [(null)] - Open Connection "35069176" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.MappedStatements.ReaderAutoMapper: 2017-01-17 11:29:35,892 [6] ERROR [(null)] - The column [id_shop] could not be auto mapped to a property on [CySoft.Model.Tb.Tb_Shop]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:35,897 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:35,897 [6] DEBUG [(null)] - Close Connection "35069176" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:37,377 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:37,378 [3] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:37,380 [3] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:37,381 [3] DEBUG [(null)] - Open Connection "12163764" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:37,394 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:37,395 [3] DEBUG [(null)] - Close Connection "12163764" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:37,396 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no]  from  [tb_shop]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  and db.[flag_delete]= @param2  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:37,397 [3] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[flag_state,1], @param2=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:29:37,398 [3] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:37,400 [3] DEBUG [(null)] - Open Connection "5457404" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:37,441 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:29:37,442 [3] DEBUG [(null)] - Close Connection "5457404" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:32:56,265 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser] from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:32:56,266 [3] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:32:56,268 [3] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:32:56,268 [3] DEBUG [(null)] - Open Connection "35756053" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:32:56,282 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:32:56,284 [3] DEBUG [(null)] - Close Connection "35756053" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:32:56,286 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:32:56,287 [3] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],2], @param2=[rolelist[1],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:32:56,288 [3] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:32:56,288 [3] DEBUG [(null)] - Open Connection "3873132" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:32:56,315 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:32:56,316 [3] DEBUG [(null)] - Close Connection "3873132" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:32:56,325 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:32:56,326 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59], @param3=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:32:56,327 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:32:56,328 [3] DEBUG [(null)] - Open Connection "65843260" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:32:56,341 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:32:56,341 [3] DEBUG [(null)] - Close Connection "65843260" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:32:56,342 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:32:56,343 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,382952aa-ecb3-4708-95a0-c01754009101], @param1=[lgrq,2017/1/17 0:00:00], @param2=[bgrq,2017/1/17 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:32:56,344 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[DateTime, System.DateTime], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:32:56,344 [3] DEBUG [(null)] - Open Connection "45593608" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:32:56,365 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:32:56,366 [3] DEBUG [(null)] - Close Connection "45593608" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:32:56,368 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:32:56,369 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:32:56,370 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:32:56,370 [3] DEBUG [(null)] - Open Connection "36893845" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:32:56,381 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:32:56,382 [3] DEBUG [(null)] - Close Connection "36893845" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:32:56,384 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '08e9ed0b-db42-480d-ab10-47a788e65318','382952aa-ecb3-4708-95a0-c01754009101','2017/1/17 0:00:00','2017/1/17 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:32:56,385 [3] DEBUG [(null)] - Open Connection "23215589" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:32:56,395 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:32:56,396 [3] DEBUG [(null)] - Close Connection "23215589" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:32:56,396 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:32:56,397 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,08e9ed0b-db42-480d-ab10-47a788e65318], @param1=[id_shop,382952aa-ecb3-4708-95a0-c01754009101]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:32:56,399 [3] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:32:56,400 [3] DEBUG [(null)] - Open Connection "59120702" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:32:56,456 [3] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-01-17 11:32:56,458 [3] DEBUG [(null)] - Close Connection "59120702" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-01-17 11:32:56,459 [3] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
