Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:28:35,060 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-10], @param2=[bgrq,2017/3/10 23:59:59], @param3=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:28:35,066 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:28:35,067 [18] DEBUG [(null)] - Open Connection "44769856" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:28:35,095 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:28:35,096 [18] DEBUG [(null)] - Close Connection "44769856" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:28:35,097 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:28:35,098 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-10], @param2=[bgrq,2017/3/10 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:28:35,099 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:28:35,100 [18] DEBUG [(null)] - Open Connection "24726911" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:28:35,118 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:28:35,119 [18] DEBUG [(null)] - Close Connection "24726911" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:28:35,121 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:28:35,122 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:28:35,123 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:28:35,125 [18] DEBUG [(null)] - Open Connection "24924015" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:28:35,138 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:28:35,139 [18] DEBUG [(null)] - Close Connection "24924015" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:28:35,140 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '2a7a8a51-fe78-4687-8036-1494130f7945','a6057a78-1836-4fc3-8688-d987fcf1a99a','2017-03-10','2017/3/10 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:28:35,144 [18] DEBUG [(null)] - Open Connection "40100976" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:28:35,164 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:28:35,165 [18] DEBUG [(null)] - Close Connection "40100976" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:28:35,166 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:28:35,167 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:28:35,168 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:28:35,169 [18] DEBUG [(null)] - Open Connection "767427" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:28:35,191 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:28:35,193 [18] DEBUG [(null)] - Close Connection "767427" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:28:35,194 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:28:35,196 [18] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:28:35,197 [18] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:28:35,198 [18] DEBUG [(null)] - Open Connection "59091899" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:28:35,223 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:28:35,224 [18] DEBUG [(null)] - Close Connection "59091899" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:28:35,226 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [ts_notice]
      as db
       where  db.[flag_delete]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:28:35,227 [18] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Parameters: [@param0=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:28:35,228 [18] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:28:35,229 [18] DEBUG [(null)] - Open Connection "53782371" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:28:35,249 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:28:35,250 [18] DEBUG [(null)] - Close Connection "53782371" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:28:35,252 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.QueryPage] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select t.* from (select row_number() over( order by  
          db.rq_create desc
           ) as rownumber,db.* from  [ts_notice]
      as db  where  db.[flag_delete]= @param0  ) as t
       where  
          t.rownumber between ( @param1  + 1)
           and 
            ( @param1  +  @param2 )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:28:35,253 [18] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Parameters: [@param0=[flag_delete,0], @param1=[start,0], @param2=[limit,10]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:28:35,254 [18] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32], @param2=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:28:35,256 [18] DEBUG [(null)] - Open Connection "47601871" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:28:35,276 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:28:35,279 [18] DEBUG [(null)] - Close Connection "47601871" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:28:46,269 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm,ss.id_shop_father from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
      left join tb_shop_shop ss on ss.id_shop_child=db.id_shop
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:28:46,271 [18] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:28:46,284 [18] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:28:46,308 [18] DEBUG [(null)] - Open Connection "2361882" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:28:46,327 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:28:46,331 [18] DEBUG [(null)] - Close Connection "2361882" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:28:46,332 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[id_shop_child],db.[id_shop_father],db.[path],db.[flag_state],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],s.flag_type
      ,s.mc,s.bm
      ,s.flag_state shop_flag_state
      ,s.flag_delete shop_flag_delete
      from  [tb_shop_shop]
      as db
      left join tb_shop s on db.id_shop_child=s.id
       where  db.[id_masteruser]= @param0  and db.[id_shop_father]= @param1  and db.[flag_delete]= @param2  and s.[flag_state]= @param3  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:28:46,334 [18] DEBUG [(null)] - Statement Id: [Tb_Shop_Shop.QueryList] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop_father,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param2=[flag_delete,0], @param3=[tb_shop_state,1]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:28:46,337 [18] DEBUG [(null)] - Statement Id: [Tb_Shop_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[Byte, System.Byte], @param3=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:28:46,339 [18] DEBUG [(null)] - Open Connection "47647200" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:28:46,376 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:28:46,379 [18] DEBUG [(null)] - Close Connection "47647200" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:28:46,381 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryListWithFatherId] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no],db.flag_type,db.id_shop_ps,db.id_kh,ss.id_shop_father  from
       [tb_shop]
      as db
       left join tb_shop_shop ss on ss.id_shop_child=db.id
       where  db.[id]= @param0  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:28:46,383 [18] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryListWithFatherId] Parameters: [@param0=[id,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:28:46,384 [18] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryListWithFatherId] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:28:46,385 [18] DEBUG [(null)] - Open Connection "44955778" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:28:46,457 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:28:46,475 [18] DEBUG [(null)] - Close Connection "44955778" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:28:46,481 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[id_shop_child],db.[id_shop_father],db.[path],db.[flag_state],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],s.flag_type
      ,s.mc,s.bm
      ,s.flag_state shop_flag_state
      ,s.flag_delete shop_flag_delete
      from  [tb_shop_shop]
      as db
      left join tb_shop s on db.id_shop_child=s.id
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  and EXISTS(SELECT 1 FROM tb_shop_shop ss WHERE db.path+'/' LIKE ss.path+'/%' AND ss.id_shop_father= @param2  and  ss.id_masteruser= @param0  ) and s.[flag_state]= @param3  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:28:46,485 [18] DEBUG [(null)] - Statement Id: [Tb_Shop_Shop.QueryList] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0], @param2=[shopShopID,0], @param3=[tb_shop_state,1]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:28:46,492 [18] DEBUG [(null)] - Statement Id: [Tb_Shop_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[String, System.String], @param3=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:28:46,500 [18] DEBUG [(null)] - Open Connection "39042911" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:28:46,579 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:28:46,583 [18] DEBUG [(null)] - Close Connection "39042911" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:28:46,585 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Gys.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[companytel],db.[zjm],db.[tel],db.[lxr],db.[email],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_gysfl
      from  [tb_gys]
      as db
      left join tb_gysfl fl on fl.id=db.id_gysfl
      
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:28:46,587 [18] DEBUG [(null)] - Statement Id: [Tb_Gys.QueryList] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:28:46,588 [18] DEBUG [(null)] - Statement Id: [Tb_Gys.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:28:46,612 [18] DEBUG [(null)] - Open Connection "53514192" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:28:46,661 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:28:46,665 [18] DEBUG [(null)] - Close Connection "53514192" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:28:46,667 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_cyuser],db.[id_masteruser],db.[id],db.[username],db.[password],db.[name],db.[companyname],db.[flag_sex],db.[id_father],db.[job],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[rq_start],db.[rq_stop],db.[flag_state],db.[flag_master],db.[bz],db.[id_province],db.[id_city],db.[id_county],db.[zipcode],db.[address],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[version],db.id_shop,db.flag_delete,db.[flag_industry],db.[companyno]  from  [tb_user]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:28:46,668 [18] DEBUG [(null)] - Statement Id: [Tb_User.QueryList] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_state,1]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:28:46,669 [18] DEBUG [(null)] - Statement Id: [Tb_User.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:28:46,670 [18] DEBUG [(null)] - Open Connection "26952108" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:28:46,722 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:28:46,724 [18] DEBUG [(null)] - Close Connection "26952108" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:29:21,960 [19] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:29:21,963 [19] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:29:21,973 [19] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:29:21,981 [19] DEBUG [(null)] - Open Connection "56630235" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:29:22,016 [19] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:29:22,017 [19] DEBUG [(null)] - Close Connection "56630235" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:29:51,433 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:29:51,436 [7] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:29:51,441 [7] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:29:51,442 [7] DEBUG [(null)] - Open Connection "56023468" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:29:51,508 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:29:51,509 [7] DEBUG [(null)] - Close Connection "56023468" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:29:51,580 [19] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and db.[id_father]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:29:51,582 [19] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[id_father,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:29:51,584 [19] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:29:51,585 [19] DEBUG [(null)] - Open Connection "60979217" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:29:51,602 [19] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:29:51,605 [19] DEBUG [(null)] - Close Connection "60979217" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:31:47,206 [19] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id_user],db.[id_shop],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_default],s.mc,s.bm,ss.id_shop_father from  [tb_user_shop]
      as db
      left join dbo.tb_shop s on db.id_shop=s.id
      left join tb_shop_shop ss on ss.id_shop_child=db.id_shop
       where  db.[id_user]= @param0  and db.[id_masteruser]= @param1  order by  db.[id_user] asc,db.[id_shop] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:31:47,210 [19] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Parameters: [@param0=[id_user,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:31:47,222 [19] DEBUG [(null)] - Statement Id: [Tb_User_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:31:47,224 [19] DEBUG [(null)] - Open Connection "60400881" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:31:47,258 [19] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:31:47,263 [19] DEBUG [(null)] - Close Connection "60400881" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:31:47,265 [19] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[id_shop_child],db.[id_shop_father],db.[path],db.[flag_state],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],s.flag_type
      ,s.mc,s.bm
      ,s.flag_state shop_flag_state
      ,s.flag_delete shop_flag_delete
      from  [tb_shop_shop]
      as db
      left join tb_shop s on db.id_shop_child=s.id
       where  db.[id_masteruser]= @param0  and db.[id_shop_father]= @param1  and db.[flag_delete]= @param2  and s.[flag_state]= @param3  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:31:47,266 [19] DEBUG [(null)] - Statement Id: [Tb_Shop_Shop.QueryList] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop_father,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param2=[flag_delete,0], @param3=[tb_shop_state,1]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:31:47,267 [19] DEBUG [(null)] - Statement Id: [Tb_Shop_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[Byte, System.Byte], @param3=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:31:47,270 [19] DEBUG [(null)] - Open Connection "60633228" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:31:47,288 [19] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:31:47,289 [19] DEBUG [(null)] - Close Connection "60633228" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:31:47,290 [19] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop.QueryListWithFatherId] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[lxr],db.[rq_start],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_cloneshop,db.yzm,db.pic_path,db.id [id_shop],db.[discern_no],db.flag_type,db.id_shop_ps,db.id_kh,ss.id_shop_father  from
       [tb_shop]
      as db
       left join tb_shop_shop ss on ss.id_shop_child=db.id
       where  db.[id]= @param0  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:31:47,292 [19] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryListWithFatherId] Parameters: [@param0=[id,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:31:47,293 [19] DEBUG [(null)] - Statement Id: [Tb_Shop.QueryListWithFatherId] Types: [@param0=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:31:47,295 [19] DEBUG [(null)] - Open Connection "12344473" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:31:47,316 [19] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:31:47,317 [19] DEBUG [(null)] - Close Connection "12344473" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:31:47,321 [19] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Shop_Shop.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[id_shop_child],db.[id_shop_father],db.[path],db.[flag_state],db.[id_create],s.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],s.flag_type
      ,s.mc,s.bm
      ,s.flag_state shop_flag_state
      ,s.flag_delete shop_flag_delete
      from  [tb_shop_shop]
      as db
      left join tb_shop s on db.id_shop_child=s.id
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  and EXISTS(SELECT 1 FROM tb_shop_shop ss WHERE db.path+'/' LIKE ss.path+'/%' AND ss.id_shop_father= @param2  and  ss.id_masteruser= @param0  ) and s.[flag_state]= @param3  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:31:47,323 [19] DEBUG [(null)] - Statement Id: [Tb_Shop_Shop.QueryList] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0], @param2=[shopShopID,0], @param3=[tb_shop_state,1]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:31:47,326 [19] DEBUG [(null)] - Statement Id: [Tb_Shop_Shop.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte], @param2=[String, System.String], @param3=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:31:47,327 [19] DEBUG [(null)] - Open Connection "60378234" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:31:47,646 [19] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:31:47,647 [19] DEBUG [(null)] - Close Connection "60378234" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:31:47,648 [19] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Gys.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_masteruser],db.[id],db.[bm],db.[mc],db.[companytel],db.[zjm],db.[tel],db.[lxr],db.[email],db.[zipcode],db.[address],db.[flag_state],db.[bz],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[flag_delete],db.[nlast],db.id_gysfl
      from  [tb_gys]
      as db
      left join tb_gysfl fl on fl.id=db.id_gysfl
      
       where  db.[id_masteruser]= @param0  and db.[flag_delete]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:31:47,650 [19] DEBUG [(null)] - Statement Id: [Tb_Gys.QueryList] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:31:47,651 [19] DEBUG [(null)] - Statement Id: [Tb_Gys.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:31:47,653 [19] DEBUG [(null)] - Open Connection "58798805" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:31:47,679 [19] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:31:47,681 [19] DEBUG [(null)] - Close Connection "58798805" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:31:47,683 [19] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User.QueryList] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select db.[id_cyuser],db.[id_masteruser],db.[id],db.[username],db.[password],db.[name],db.[companyname],db.[flag_sex],db.[id_father],db.[job],db.[qq],db.[email],db.[phone],db.[tel],db.[fax],db.[rq_start],db.[rq_stop],db.[flag_state],db.[flag_master],db.[bz],db.[id_province],db.[id_city],db.[id_county],db.[zipcode],db.[address],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[version],db.id_shop,db.flag_delete,db.[flag_industry],db.[companyno]  from  [tb_user]
      as db
       where  db.[id_masteruser]= @param0  and db.[flag_state]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:31:47,686 [19] DEBUG [(null)] - Statement Id: [Tb_User.QueryList] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_state,1]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:31:47,688 [19] DEBUG [(null)] - Statement Id: [Tb_User.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:31:47,691 [19] DEBUG [(null)] - Open Connection "65082765" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:31:47,722 [19] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:31:47,723 [19] DEBUG [(null)] - Close Connection "65082765" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:09,568 [19] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser],db.flag_delete from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  and db.[flag_delete]= @param1  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:09,569 [19] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:09,571 [19] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:09,572 [19] DEBUG [(null)] - Open Connection "9918349" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:09,896 [19] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:09,898 [19] DEBUG [(null)] - Close Connection "9918349" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:09,900 [19] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:09,902 [19] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:09,903 [19] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:09,904 [19] DEBUG [(null)] - Open Connection "65188770" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:10,573 [19] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:10,575 [19] DEBUG [(null)] - Close Connection "65188770" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:10,605 [19] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:10,607 [19] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-10], @param2=[bgrq,2017/3/10 23:59:59], @param3=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:10,609 [19] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:10,610 [19] DEBUG [(null)] - Open Connection "45798984" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:10,637 [19] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:10,638 [19] DEBUG [(null)] - Close Connection "45798984" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:10,639 [19] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:10,640 [19] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-10], @param2=[bgrq,2017/3/10 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:10,641 [19] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:10,643 [19] DEBUG [(null)] - Open Connection "18730211" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:10,666 [19] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:10,669 [19] DEBUG [(null)] - Close Connection "18730211" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:10,671 [19] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:10,672 [19] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:10,674 [19] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:10,675 [19] DEBUG [(null)] - Open Connection "40752152" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:10,692 [19] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:10,696 [19] DEBUG [(null)] - Close Connection "40752152" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:10,697 [19] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '2a7a8a51-fe78-4687-8036-1494130f7945','a6057a78-1836-4fc3-8688-d987fcf1a99a','2017-03-10','2017/3/10 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:10,698 [19] DEBUG [(null)] - Open Connection "12590026" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:10,719 [19] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:10,720 [19] DEBUG [(null)] - Close Connection "12590026" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:10,722 [19] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:10,723 [19] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:10,724 [19] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:10,725 [19] DEBUG [(null)] - Open Connection "13159197" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:10,747 [19] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:10,749 [19] DEBUG [(null)] - Close Connection "13159197" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:10,752 [19] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:10,753 [19] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:10,754 [19] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:10,756 [19] DEBUG [(null)] - Open Connection "59262070" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:11,083 [19] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:11,086 [19] DEBUG [(null)] - Close Connection "59262070" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:11,090 [19] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [ts_notice]
      as db
       where  db.[flag_delete]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:11,092 [19] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Parameters: [@param0=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:11,095 [19] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:11,098 [19] DEBUG [(null)] - Open Connection "35498360" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:11,129 [19] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:11,130 [19] DEBUG [(null)] - Close Connection "35498360" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:11,131 [19] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.QueryPage] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select t.* from (select row_number() over( order by  
          db.rq_create desc
           ) as rownumber,db.* from  [ts_notice]
      as db  where  db.[flag_delete]= @param0  ) as t
       where  
          t.rownumber between ( @param1  + 1)
           and 
            ( @param1  +  @param2 )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:11,133 [19] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Parameters: [@param0=[flag_delete,0], @param1=[start,0], @param2=[limit,10]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:11,134 [19] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32], @param2=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:11,135 [19] DEBUG [(null)] - Open Connection "56794887" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:11,208 [19] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:11,221 [19] DEBUG [(null)] - Close Connection "56794887" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:12,174 [19] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:12,202 [19] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:12,207 [19] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:12,218 [19] DEBUG [(null)] - Open Connection "35901121" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:15,237 [19] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:15,241 [19] DEBUG [(null)] - Close Connection "35901121" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:16,491 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:16,492 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:16,495 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:16,496 [13] DEBUG [(null)] - Open Connection "51822662" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:16,850 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:16,852 [13] DEBUG [(null)] - Close Connection "51822662" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:16,925 [10] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and db.[id_father]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:16,936 [10] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[id_father,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:16,937 [10] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:16,938 [10] DEBUG [(null)] - Open Connection "16027686" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:16,954 [10] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:16,955 [10] DEBUG [(null)] - Close Connection "16027686" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:41,131 [16] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser],db.flag_delete from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  and db.[flag_delete]= @param1  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:41,132 [16] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:41,134 [16] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:41,140 [16] DEBUG [(null)] - Open Connection "59255207" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:41,154 [16] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:41,155 [16] DEBUG [(null)] - Close Connection "59255207" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:41,158 [16] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:41,159 [16] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:41,160 [16] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:41,161 [16] DEBUG [(null)] - Open Connection "62077448" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:41,510 [16] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:41,512 [16] DEBUG [(null)] - Close Connection "62077448" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:41,531 [16] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:41,533 [16] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-10], @param2=[bgrq,2017/3/10 23:59:59], @param3=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:41,534 [16] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:41,535 [16] DEBUG [(null)] - Open Connection "55485508" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:41,554 [16] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:41,559 [16] DEBUG [(null)] - Close Connection "55485508" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:41,566 [16] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:41,582 [16] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-10], @param2=[bgrq,2017/3/10 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:41,591 [16] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:41,601 [16] DEBUG [(null)] - Open Connection "3294807" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:41,641 [16] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:41,642 [16] DEBUG [(null)] - Close Connection "3294807" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:41,644 [16] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:41,647 [16] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:41,649 [16] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:41,650 [16] DEBUG [(null)] - Open Connection "26015108" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:41,669 [16] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:41,672 [16] DEBUG [(null)] - Close Connection "26015108" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:41,673 [16] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '2a7a8a51-fe78-4687-8036-1494130f7945','a6057a78-1836-4fc3-8688-d987fcf1a99a','2017-03-10','2017/3/10 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:41,676 [16] DEBUG [(null)] - Open Connection "50212006" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:41,690 [16] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:41,691 [16] DEBUG [(null)] - Close Connection "50212006" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:41,692 [16] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:41,693 [16] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:41,694 [16] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:41,695 [16] DEBUG [(null)] - Open Connection "42076373" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:41,719 [16] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:41,720 [16] DEBUG [(null)] - Close Connection "42076373" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:41,722 [16] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:41,723 [16] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:41,724 [16] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:41,725 [16] DEBUG [(null)] - Open Connection "17588635" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:41,752 [16] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:41,753 [16] DEBUG [(null)] - Close Connection "17588635" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:41,755 [16] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [ts_notice]
      as db
       where  db.[flag_delete]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:41,756 [16] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Parameters: [@param0=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:41,757 [16] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:41,758 [16] DEBUG [(null)] - Open Connection "5656310" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:41,773 [16] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:41,774 [16] DEBUG [(null)] - Close Connection "5656310" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:41,776 [16] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.QueryPage] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select t.* from (select row_number() over( order by  
          db.rq_create desc
           ) as rownumber,db.* from  [ts_notice]
      as db  where  db.[flag_delete]= @param0  ) as t
       where  
          t.rownumber between ( @param1  + 1)
           and 
            ( @param1  +  @param2 )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:41,778 [16] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Parameters: [@param0=[flag_delete,0], @param1=[start,0], @param2=[limit,10]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:41,779 [16] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32], @param2=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:41,780 [16] DEBUG [(null)] - Open Connection "54741101" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:41,805 [16] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:41,806 [16] DEBUG [(null)] - Close Connection "54741101" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:42,624 [16] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:42,627 [16] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:42,640 [16] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:42,672 [16] DEBUG [(null)] - Open Connection "48050455" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:43,785 [16] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:43,787 [16] DEBUG [(null)] - Close Connection "48050455" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:44,896 [23] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:44,900 [23] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:44,903 [23] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:44,906 [23] DEBUG [(null)] - Open Connection "31267084" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:45,265 [23] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:45,267 [23] DEBUG [(null)] - Close Connection "31267084" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:45,332 [16] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and db.[id_father]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:45,338 [16] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[id_father,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:32:45,339 [16] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:45,342 [16] DEBUG [(null)] - Open Connection "51730444" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:45,358 [16] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:32:45,359 [16] DEBUG [(null)] - Close Connection "51730444" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:35:49,140 [22] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser],db.flag_delete from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  and db.[flag_delete]= @param1  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:35:49,142 [22] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:35:49,143 [22] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:35:49,148 [22] DEBUG [(null)] - Open Connection "2535271" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:35:49,171 [22] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:35:49,173 [22] DEBUG [(null)] - Close Connection "2535271" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:35:49,174 [22] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:35:49,176 [22] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:35:49,177 [22] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:35:49,180 [22] DEBUG [(null)] - Open Connection "34453680" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:35:49,235 [22] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:35:49,236 [22] DEBUG [(null)] - Close Connection "34453680" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:35:49,247 [22] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:35:49,248 [22] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-10], @param2=[bgrq,2017/3/10 23:59:59], @param3=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:35:49,249 [22] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:35:49,250 [22] DEBUG [(null)] - Open Connection "50075703" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:35:49,265 [22] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:35:49,266 [22] DEBUG [(null)] - Close Connection "50075703" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:35:49,268 [22] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:35:49,269 [22] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-10], @param2=[bgrq,2017/3/10 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:35:49,270 [22] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:35:49,272 [22] DEBUG [(null)] - Open Connection "26528783" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:35:49,294 [22] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:35:49,297 [22] DEBUG [(null)] - Close Connection "26528783" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:35:49,299 [22] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:35:49,300 [22] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:35:49,301 [22] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:35:49,302 [22] DEBUG [(null)] - Open Connection "51257748" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:35:49,316 [22] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:35:49,317 [22] DEBUG [(null)] - Close Connection "51257748" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:35:49,319 [22] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '2a7a8a51-fe78-4687-8036-1494130f7945','a6057a78-1836-4fc3-8688-d987fcf1a99a','2017-03-10','2017/3/10 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:35:49,320 [22] DEBUG [(null)] - Open Connection "2241260" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:35:49,334 [22] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:35:49,335 [22] DEBUG [(null)] - Close Connection "2241260" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:35:49,336 [22] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:35:49,338 [22] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:35:49,339 [22] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:35:49,340 [22] DEBUG [(null)] - Open Connection "7110653" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:35:49,372 [22] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:35:49,373 [22] DEBUG [(null)] - Close Connection "7110653" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:35:49,375 [22] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:35:49,377 [22] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:35:49,382 [22] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:35:49,384 [22] DEBUG [(null)] - Open Connection "57310990" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:35:50,004 [22] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:35:50,008 [22] DEBUG [(null)] - Close Connection "57310990" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:35:50,013 [22] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [ts_notice]
      as db
       where  db.[flag_delete]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:35:50,018 [22] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Parameters: [@param0=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:35:50,022 [22] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:35:50,026 [22] DEBUG [(null)] - Open Connection "28321888" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:35:50,066 [22] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:35:50,068 [22] DEBUG [(null)] - Close Connection "28321888" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:35:50,069 [22] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.QueryPage] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select t.* from (select row_number() over( order by  
          db.rq_create desc
           ) as rownumber,db.* from  [ts_notice]
      as db  where  db.[flag_delete]= @param0  ) as t
       where  
          t.rownumber between ( @param1  + 1)
           and 
            ( @param1  +  @param2 )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:35:50,072 [22] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Parameters: [@param0=[flag_delete,0], @param1=[start,0], @param2=[limit,10]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:35:50,076 [22] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32], @param2=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:35:50,079 [22] DEBUG [(null)] - Open Connection "16689899" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:35:50,205 [22] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:35:50,208 [22] DEBUG [(null)] - Close Connection "16689899" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:35:51,208 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:35:51,219 [7] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:35:51,243 [7] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:35:51,276 [7] DEBUG [(null)] - Open Connection "45705463" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:35:51,640 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:35:51,643 [7] DEBUG [(null)] - Close Connection "45705463" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:35:52,844 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:35:52,846 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:35:52,848 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:35:52,849 [13] DEBUG [(null)] - Open Connection "57352339" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:35:52,904 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:35:52,906 [13] DEBUG [(null)] - Close Connection "57352339" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:35:52,963 [14] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and db.[id_father]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:35:52,964 [14] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[id_father,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:35:52,966 [14] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:35:52,969 [14] DEBUG [(null)] - Open Connection "27484383" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:35:52,993 [14] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:35:52,997 [14] DEBUG [(null)] - Close Connection "27484383" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:36:13,573 [22] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser],db.flag_delete from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  and db.[flag_delete]= @param1  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:36:13,575 [22] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:36:13,578 [22] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:36:13,579 [22] DEBUG [(null)] - Open Connection "86650" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:36:13,594 [22] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:36:13,595 [22] DEBUG [(null)] - Close Connection "86650" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:36:13,596 [22] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:36:13,598 [22] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:36:13,599 [22] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:36:13,600 [22] DEBUG [(null)] - Open Connection "8058500" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:36:13,645 [22] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:36:13,647 [22] DEBUG [(null)] - Close Connection "8058500" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:36:13,658 [22] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:36:13,659 [22] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-10], @param2=[bgrq,2017/3/10 23:59:59], @param3=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:36:13,660 [22] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:36:13,661 [22] DEBUG [(null)] - Open Connection "11243077" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:36:13,678 [22] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:36:13,679 [22] DEBUG [(null)] - Close Connection "11243077" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:36:13,680 [22] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:36:13,681 [22] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-10], @param2=[bgrq,2017/3/10 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:36:13,682 [22] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:36:13,683 [22] DEBUG [(null)] - Open Connection "38973237" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:36:13,699 [22] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:36:13,700 [22] DEBUG [(null)] - Close Connection "38973237" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:36:13,701 [22] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:36:13,702 [22] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:36:13,705 [22] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:36:13,706 [22] DEBUG [(null)] - Open Connection "632416" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:36:13,724 [22] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:36:13,725 [22] DEBUG [(null)] - Close Connection "632416" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:36:13,727 [22] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '2a7a8a51-fe78-4687-8036-1494130f7945','a6057a78-1836-4fc3-8688-d987fcf1a99a','2017-03-10','2017/3/10 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:36:13,728 [22] DEBUG [(null)] - Open Connection "58814779" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:36:13,743 [22] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:36:13,745 [22] DEBUG [(null)] - Close Connection "58814779" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:36:13,746 [22] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:36:13,747 [22] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:36:13,748 [22] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:36:13,749 [22] DEBUG [(null)] - Open Connection "33956515" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:36:13,773 [22] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:36:13,774 [22] DEBUG [(null)] - Close Connection "33956515" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:36:13,775 [22] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:36:13,776 [22] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:36:13,778 [22] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:36:13,779 [22] DEBUG [(null)] - Open Connection "3839317" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:36:13,817 [22] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:36:13,819 [22] DEBUG [(null)] - Close Connection "3839317" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:36:13,822 [22] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [ts_notice]
      as db
       where  db.[flag_delete]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:36:13,823 [22] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Parameters: [@param0=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:36:13,824 [22] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:36:13,826 [22] DEBUG [(null)] - Open Connection "21512210" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:36:13,839 [22] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:36:13,840 [22] DEBUG [(null)] - Close Connection "21512210" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:36:13,841 [22] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.QueryPage] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select t.* from (select row_number() over( order by  
          db.rq_create desc
           ) as rownumber,db.* from  [ts_notice]
      as db  where  db.[flag_delete]= @param0  ) as t
       where  
          t.rownumber between ( @param1  + 1)
           and 
            ( @param1  +  @param2 )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:36:13,843 [22] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Parameters: [@param0=[flag_delete,0], @param1=[start,0], @param2=[limit,10]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:36:13,844 [22] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32], @param2=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:36:13,846 [22] DEBUG [(null)] - Open Connection "54478513" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:36:13,879 [22] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:36:13,880 [22] DEBUG [(null)] - Close Connection "54478513" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:36:14,710 [14] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:36:14,712 [14] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:36:14,714 [14] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:36:14,715 [14] DEBUG [(null)] - Open Connection "21039904" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:36:15,692 [14] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:36:15,694 [14] DEBUG [(null)] - Close Connection "21039904" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:36:16,839 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:36:16,841 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:36:16,842 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:36:16,843 [13] DEBUG [(null)] - Open Connection "32073039" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:36:16,896 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:36:16,897 [13] DEBUG [(null)] - Close Connection "32073039" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:36:16,946 [14] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and db.[id_father]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:36:16,947 [14] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[id_father,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:36:16,948 [14] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:36:16,949 [14] DEBUG [(null)] - Open Connection "12388700" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:36:17,266 [14] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:36:17,270 [14] DEBUG [(null)] - Close Connection "12388700" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:45:25,174 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser],db.flag_delete from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  and db.[flag_delete]= @param1  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:45:25,175 [7] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:45:25,178 [7] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:45:25,181 [7] DEBUG [(null)] - Open Connection "38956674" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:45:25,193 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:45:25,195 [7] DEBUG [(null)] - Close Connection "38956674" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:45:25,198 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:45:25,200 [7] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:45:25,201 [7] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:45:25,202 [7] DEBUG [(null)] - Open Connection "10501851" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:45:25,253 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:45:25,254 [7] DEBUG [(null)] - Close Connection "10501851" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:45:25,266 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:45:25,268 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-10], @param2=[bgrq,2017/3/10 23:59:59], @param3=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:45:25,270 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:45:25,271 [7] DEBUG [(null)] - Open Connection "11016789" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:45:25,291 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:45:25,295 [7] DEBUG [(null)] - Close Connection "11016789" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:45:25,296 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:45:25,297 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-10], @param2=[bgrq,2017/3/10 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:45:25,299 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:45:25,300 [7] DEBUG [(null)] - Open Connection "28009727" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:45:25,316 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:45:25,317 [7] DEBUG [(null)] - Close Connection "28009727" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:45:25,318 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:45:25,319 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:45:25,320 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:45:25,321 [7] DEBUG [(null)] - Open Connection "51905769" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:45:25,340 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:45:25,341 [7] DEBUG [(null)] - Close Connection "51905769" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:45:25,343 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '2a7a8a51-fe78-4687-8036-1494130f7945','a6057a78-1836-4fc3-8688-d987fcf1a99a','2017-03-10','2017/3/10 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:45:25,345 [7] DEBUG [(null)] - Open Connection "35168804" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:45:25,358 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:45:25,360 [7] DEBUG [(null)] - Close Connection "35168804" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:45:25,361 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:45:25,362 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:45:25,363 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:45:25,364 [7] DEBUG [(null)] - Open Connection "19719872" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:45:25,391 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:45:25,393 [7] DEBUG [(null)] - Close Connection "19719872" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:45:25,394 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:45:25,395 [7] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:45:25,397 [7] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:45:25,398 [7] DEBUG [(null)] - Open Connection "46776012" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:45:25,734 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:45:25,737 [7] DEBUG [(null)] - Close Connection "46776012" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:45:25,740 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [ts_notice]
      as db
       where  db.[flag_delete]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:45:25,742 [7] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Parameters: [@param0=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:45:25,744 [7] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:45:25,746 [7] DEBUG [(null)] - Open Connection "104536" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:45:25,757 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:45:25,758 [7] DEBUG [(null)] - Close Connection "104536" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:45:25,761 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.QueryPage] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select t.* from (select row_number() over( order by  
          db.rq_create desc
           ) as rownumber,db.* from  [ts_notice]
      as db  where  db.[flag_delete]= @param0  ) as t
       where  
          t.rownumber between ( @param1  + 1)
           and 
            ( @param1  +  @param2 )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:45:25,762 [7] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Parameters: [@param0=[flag_delete,0], @param1=[start,0], @param2=[limit,10]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:45:25,763 [7] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32], @param2=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:45:25,764 [7] DEBUG [(null)] - Open Connection "3449717" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:45:25,791 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:45:25,792 [7] DEBUG [(null)] - Close Connection "3449717" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:45:33,395 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:45:33,399 [11] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:45:33,400 [11] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:45:33,402 [11] DEBUG [(null)] - Open Connection "60202650" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:45:33,457 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:45:33,458 [11] DEBUG [(null)] - Close Connection "60202650" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:45:53,972 [12] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:45:53,974 [12] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:45:53,975 [12] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:45:53,977 [12] DEBUG [(null)] - Open Connection "39765558" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:45:54,039 [12] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:45:54,040 [12] DEBUG [(null)] - Close Connection "39765558" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:45:54,108 [16] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and db.[id_father]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:45:54,109 [16] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[id_father,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:45:54,110 [16] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:45:54,111 [16] DEBUG [(null)] - Open Connection "51048978" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:45:54,132 [16] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:45:54,134 [16] DEBUG [(null)] - Close Connection "51048978" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:48:16,833 [12] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser],db.flag_delete from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  and db.[flag_delete]= @param1  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:48:16,835 [12] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:48:16,836 [12] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:48:16,838 [12] DEBUG [(null)] - Open Connection "46324404" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:48:16,858 [12] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:48:16,859 [12] DEBUG [(null)] - Close Connection "46324404" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:48:16,861 [12] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:48:16,862 [12] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:48:16,865 [12] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:48:16,867 [12] DEBUG [(null)] - Open Connection "39274358" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:48:16,904 [12] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:48:16,906 [12] DEBUG [(null)] - Close Connection "39274358" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:48:16,927 [12] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:48:16,937 [12] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-10], @param2=[bgrq,2017/3/10 23:59:59], @param3=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:48:16,941 [12] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:48:16,943 [12] DEBUG [(null)] - Open Connection "1166218" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:48:16,963 [12] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:48:16,977 [12] DEBUG [(null)] - Close Connection "1166218" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:48:16,978 [12] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:48:16,991 [12] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-10], @param2=[bgrq,2017/3/10 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:48:17,007 [12] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:48:17,010 [12] DEBUG [(null)] - Open Connection "61809563" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:48:17,044 [12] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:48:17,045 [12] DEBUG [(null)] - Close Connection "61809563" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:48:17,059 [12] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:48:17,085 [12] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:48:17,091 [12] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:48:17,093 [12] DEBUG [(null)] - Open Connection "54681373" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:48:17,123 [12] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:48:17,124 [12] DEBUG [(null)] - Close Connection "54681373" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:48:17,125 [12] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '2a7a8a51-fe78-4687-8036-1494130f7945','a6057a78-1836-4fc3-8688-d987fcf1a99a','2017-03-10','2017/3/10 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:48:17,126 [12] DEBUG [(null)] - Open Connection "12431650" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:48:17,147 [12] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:48:17,150 [12] DEBUG [(null)] - Close Connection "12431650" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:48:17,151 [12] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:48:17,152 [12] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:48:17,153 [12] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:48:17,154 [12] DEBUG [(null)] - Open Connection "54897725" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:48:17,184 [12] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:48:17,185 [12] DEBUG [(null)] - Close Connection "54897725" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:48:17,186 [12] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:48:17,187 [12] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:48:17,188 [12] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:48:17,189 [12] DEBUG [(null)] - Open Connection "23898292" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:48:17,216 [12] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:48:17,220 [12] DEBUG [(null)] - Close Connection "23898292" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:48:17,221 [12] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [ts_notice]
      as db
       where  db.[flag_delete]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:48:17,223 [12] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Parameters: [@param0=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:48:17,224 [12] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:48:17,225 [12] DEBUG [(null)] - Open Connection "58649927" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:48:17,255 [12] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:48:17,257 [12] DEBUG [(null)] - Close Connection "58649927" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:48:17,259 [12] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.QueryPage] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select t.* from (select row_number() over( order by  
          db.rq_create desc
           ) as rownumber,db.* from  [ts_notice]
      as db  where  db.[flag_delete]= @param0  ) as t
       where  
          t.rownumber between ( @param1  + 1)
           and 
            ( @param1  +  @param2 )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:48:17,261 [12] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Parameters: [@param0=[flag_delete,0], @param1=[start,0], @param2=[limit,10]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:48:17,276 [12] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32], @param2=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:48:17,278 [12] DEBUG [(null)] - Open Connection "21438404" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:48:17,306 [12] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:48:17,310 [12] DEBUG [(null)] - Close Connection "21438404" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:48:18,726 [12] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:48:18,734 [12] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:48:18,736 [12] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:48:18,737 [12] DEBUG [(null)] - Open Connection "20024732" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:48:18,775 [12] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:48:18,778 [12] DEBUG [(null)] - Close Connection "20024732" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:48:19,624 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:48:19,629 [9] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:48:19,640 [9] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:48:19,657 [9] DEBUG [(null)] - Open Connection "28695804" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:48:19,696 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:48:19,699 [9] DEBUG [(null)] - Close Connection "28695804" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:48:19,774 [16] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and db.[id_father]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:48:19,775 [16] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[id_father,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:48:19,777 [16] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:48:19,778 [16] DEBUG [(null)] - Open Connection "7556024" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:48:19,795 [16] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:48:19,796 [16] DEBUG [(null)] - Close Connection "7556024" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:53:52,190 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser],db.flag_delete from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  and db.[flag_delete]= @param1  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:53:52,200 [11] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:53:52,206 [11] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:53:52,208 [11] DEBUG [(null)] - Open Connection "21394202" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:53:52,228 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:53:52,230 [11] DEBUG [(null)] - Close Connection "21394202" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:53:52,232 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:53:52,233 [11] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:53:52,238 [11] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:53:52,241 [11] DEBUG [(null)] - Open Connection "41682971" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:53:52,297 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:53:52,298 [11] DEBUG [(null)] - Close Connection "41682971" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:53:52,310 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:53:52,313 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-10], @param2=[bgrq,2017/3/10 23:59:59], @param3=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:53:52,315 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:53:52,317 [11] DEBUG [(null)] - Open Connection "29199693" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:53:52,390 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:53:52,396 [11] DEBUG [(null)] - Close Connection "29199693" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:53:52,426 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:53:52,428 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-10], @param2=[bgrq,2017/3/10 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:53:52,431 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:53:52,445 [11] DEBUG [(null)] - Open Connection "21498835" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:53:52,504 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:53:52,511 [11] DEBUG [(null)] - Close Connection "21498835" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:53:52,515 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:53:52,517 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:53:52,528 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:53:52,529 [11] DEBUG [(null)] - Open Connection "46810003" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:53:52,560 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:53:52,561 [11] DEBUG [(null)] - Close Connection "46810003" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:53:52,563 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '2a7a8a51-fe78-4687-8036-1494130f7945','a6057a78-1836-4fc3-8688-d987fcf1a99a','2017-03-10','2017/3/10 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:53:52,564 [11] DEBUG [(null)] - Open Connection "11988783" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:53:52,588 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:53:52,595 [11] DEBUG [(null)] - Close Connection "11988783" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:53:52,597 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:53:52,598 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:53:52,599 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:53:52,601 [11] DEBUG [(null)] - Open Connection "50579468" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:53:52,642 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:53:52,644 [11] DEBUG [(null)] - Close Connection "50579468" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:53:52,645 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:53:52,646 [11] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:53:52,648 [11] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:53:52,649 [11] DEBUG [(null)] - Open Connection "62474829" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:53:52,679 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:53:52,680 [11] DEBUG [(null)] - Close Connection "62474829" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:53:52,681 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [ts_notice]
      as db
       where  db.[flag_delete]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:53:52,682 [11] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Parameters: [@param0=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:53:52,683 [11] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:53:52,687 [11] DEBUG [(null)] - Open Connection "41367767" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:53:52,706 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:53:52,709 [11] DEBUG [(null)] - Close Connection "41367767" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:53:52,727 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.QueryPage] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select t.* from (select row_number() over( order by  
          db.rq_create desc
           ) as rownumber,db.* from  [ts_notice]
      as db  where  db.[flag_delete]= @param0  ) as t
       where  
          t.rownumber between ( @param1  + 1)
           and 
            ( @param1  +  @param2 )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:53:52,730 [11] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Parameters: [@param0=[flag_delete,0], @param1=[start,0], @param2=[limit,10]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:53:52,732 [11] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32], @param2=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:53:52,737 [11] DEBUG [(null)] - Open Connection "13754702" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:53:52,764 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:53:52,767 [11] DEBUG [(null)] - Close Connection "13754702" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:53:54,197 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:53:54,200 [9] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:53:54,204 [9] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:53:54,211 [9] DEBUG [(null)] - Open Connection "32367643" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:53:54,315 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:53:54,348 [9] DEBUG [(null)] - Close Connection "32367643" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:53:55,162 [14] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:53:55,166 [14] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:53:55,168 [14] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:53:55,172 [14] DEBUG [(null)] - Open Connection "37157444" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:53:55,211 [14] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:53:55,213 [14] DEBUG [(null)] - Close Connection "37157444" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:53:55,308 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and db.[id_father]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:53:55,310 [11] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[id_father,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:53:55,312 [11] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:53:55,313 [11] DEBUG [(null)] - Open Connection "46834174" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:53:55,332 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:53:55,333 [11] DEBUG [(null)] - Close Connection "46834174" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:56:21,696 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser],db.flag_delete from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  and db.[flag_delete]= @param1  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:56:21,697 [15] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:56:21,698 [15] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:56:21,701 [15] DEBUG [(null)] - Open Connection "61354844" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:56:21,714 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:56:21,717 [15] DEBUG [(null)] - Close Connection "61354844" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:56:21,719 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:56:21,721 [15] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:56:21,722 [15] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:56:21,723 [15] DEBUG [(null)] - Open Connection "28641918" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:56:21,778 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:56:21,779 [15] DEBUG [(null)] - Close Connection "28641918" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:56:21,789 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:56:21,791 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-10], @param2=[bgrq,2017/3/10 23:59:59], @param3=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:56:21,792 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:56:21,794 [15] DEBUG [(null)] - Open Connection "49785377" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:56:21,815 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:56:21,817 [15] DEBUG [(null)] - Close Connection "49785377" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:56:21,819 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:56:21,821 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-10], @param2=[bgrq,2017/3/10 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:56:21,822 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:56:21,824 [15] DEBUG [(null)] - Open Connection "14824069" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:56:21,839 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:56:21,840 [15] DEBUG [(null)] - Close Connection "14824069" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:56:21,842 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:56:21,843 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:56:21,844 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:56:21,846 [15] DEBUG [(null)] - Open Connection "24040426" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:56:21,861 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:56:21,862 [15] DEBUG [(null)] - Close Connection "24040426" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:56:21,864 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '2a7a8a51-fe78-4687-8036-1494130f7945','a6057a78-1836-4fc3-8688-d987fcf1a99a','2017-03-10','2017/3/10 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:56:21,866 [15] DEBUG [(null)] - Open Connection "19123856" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:56:21,881 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:56:21,883 [15] DEBUG [(null)] - Close Connection "19123856" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:56:21,885 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:56:21,887 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:56:21,889 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:56:21,891 [15] DEBUG [(null)] - Open Connection "35091127" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:56:21,916 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:56:21,918 [15] DEBUG [(null)] - Close Connection "35091127" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:56:21,920 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:56:21,921 [15] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:56:21,922 [15] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:56:21,923 [15] DEBUG [(null)] - Open Connection "66330783" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:56:21,947 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:56:21,949 [15] DEBUG [(null)] - Close Connection "66330783" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:56:21,952 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [ts_notice]
      as db
       where  db.[flag_delete]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:56:21,953 [15] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Parameters: [@param0=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:56:21,954 [15] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:56:21,955 [15] DEBUG [(null)] - Open Connection "16533640" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:56:21,980 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:56:21,981 [15] DEBUG [(null)] - Close Connection "16533640" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:56:21,986 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.QueryPage] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select t.* from (select row_number() over( order by  
          db.rq_create desc
           ) as rownumber,db.* from  [ts_notice]
      as db  where  db.[flag_delete]= @param0  ) as t
       where  
          t.rownumber between ( @param1  + 1)
           and 
            ( @param1  +  @param2 )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:56:21,988 [15] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Parameters: [@param0=[flag_delete,0], @param1=[start,0], @param2=[limit,10]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:56:21,992 [15] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32], @param2=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:56:21,993 [15] DEBUG [(null)] - Open Connection "944818" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:56:22,012 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:56:22,013 [15] DEBUG [(null)] - Close Connection "944818" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:56:23,379 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:56:23,380 [11] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:56:23,385 [11] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:56:23,393 [11] DEBUG [(null)] - Open Connection "42343631" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:56:23,442 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:56:23,447 [11] DEBUG [(null)] - Close Connection "42343631" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:56:25,203 [22] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:56:25,205 [22] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:56:25,207 [22] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:56:25,209 [22] DEBUG [(null)] - Open Connection "29842766" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:56:25,246 [22] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:56:25,247 [22] DEBUG [(null)] - Close Connection "29842766" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:56:25,296 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and db.[id_father]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:56:25,297 [7] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[id_father,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:56:25,299 [7] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:56:25,302 [7] DEBUG [(null)] - Open Connection "18660388" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:56:25,328 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:56:25,329 [7] DEBUG [(null)] - Close Connection "18660388" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:58:26,499 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser],db.flag_delete from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  and db.[flag_delete]= @param1  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:58:26,500 [11] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:58:26,502 [11] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:58:26,503 [11] DEBUG [(null)] - Open Connection "7959579" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:58:26,524 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:58:26,526 [11] DEBUG [(null)] - Close Connection "7959579" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:58:26,528 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:58:26,530 [11] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:58:26,531 [11] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:58:26,532 [11] DEBUG [(null)] - Open Connection "54475057" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:58:26,589 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:58:26,592 [11] DEBUG [(null)] - Close Connection "54475057" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:58:26,612 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:58:26,614 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-10], @param2=[bgrq,2017/3/10 23:59:59], @param3=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:58:26,615 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:58:26,617 [11] DEBUG [(null)] - Open Connection "52032141" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:58:26,661 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:58:26,663 [11] DEBUG [(null)] - Close Connection "52032141" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:58:26,664 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:58:26,666 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-10], @param2=[bgrq,2017/3/10 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:58:26,667 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:58:26,668 [11] DEBUG [(null)] - Open Connection "66546961" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:58:26,692 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:58:26,693 [11] DEBUG [(null)] - Close Connection "66546961" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:58:26,695 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:58:26,696 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:58:26,697 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:58:26,699 [11] DEBUG [(null)] - Open Connection "39575650" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:58:26,719 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:58:26,720 [11] DEBUG [(null)] - Close Connection "39575650" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:58:26,723 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '2a7a8a51-fe78-4687-8036-1494130f7945','a6057a78-1836-4fc3-8688-d987fcf1a99a','2017-03-10','2017/3/10 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:58:26,725 [11] DEBUG [(null)] - Open Connection "60158692" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:58:26,768 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:58:26,769 [11] DEBUG [(null)] - Close Connection "60158692" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:58:26,770 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:58:26,774 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:58:26,776 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:58:26,779 [11] DEBUG [(null)] - Open Connection "62094778" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:58:26,844 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:58:26,849 [11] DEBUG [(null)] - Close Connection "62094778" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:58:26,854 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:58:26,857 [11] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:58:26,859 [11] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:58:26,863 [11] DEBUG [(null)] - Open Connection "22745290" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:58:26,895 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:58:26,897 [11] DEBUG [(null)] - Close Connection "22745290" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:58:26,900 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [ts_notice]
      as db
       where  db.[flag_delete]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:58:26,901 [11] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Parameters: [@param0=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:58:26,902 [11] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:58:26,903 [11] DEBUG [(null)] - Open Connection "40777398" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:58:26,936 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:58:26,941 [11] DEBUG [(null)] - Close Connection "40777398" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:58:26,943 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.QueryPage] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select t.* from (select row_number() over( order by  
          db.rq_create desc
           ) as rownumber,db.* from  [ts_notice]
      as db  where  db.[flag_delete]= @param0  ) as t
       where  
          t.rownumber between ( @param1  + 1)
           and 
            ( @param1  +  @param2 )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:58:26,946 [11] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Parameters: [@param0=[flag_delete,0], @param1=[start,0], @param2=[limit,10]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:58:26,948 [11] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32], @param2=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:58:26,950 [11] DEBUG [(null)] - Open Connection "51935459" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:58:26,968 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:58:26,969 [11] DEBUG [(null)] - Close Connection "51935459" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:58:28,407 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:58:28,416 [11] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:58:28,418 [11] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:58:28,420 [11] DEBUG [(null)] - Open Connection "5955541" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:58:28,479 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:58:28,518 [11] DEBUG [(null)] - Close Connection "5955541" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:58:29,954 [22] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:58:29,957 [22] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:58:29,968 [22] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:58:29,969 [22] DEBUG [(null)] - Open Connection "22829917" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:58:30,004 [22] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:58:30,007 [22] DEBUG [(null)] - Close Connection "22829917" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:58:30,066 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and db.[id_father]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:58:30,067 [7] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[id_father,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:58:30,068 [7] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:58:30,070 [7] DEBUG [(null)] - Open Connection "29482070" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:58:30,086 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:58:30,088 [7] DEBUG [(null)] - Close Connection "29482070" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:59:46,021 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser],db.flag_delete from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  and db.[flag_delete]= @param1  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:59:46,023 [7] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:59:46,024 [7] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:59:46,025 [7] DEBUG [(null)] - Open Connection "56242581" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:59:46,044 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:59:46,046 [7] DEBUG [(null)] - Close Connection "56242581" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:59:46,051 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:59:46,054 [7] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:59:46,055 [7] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:59:46,057 [7] DEBUG [(null)] - Open Connection "44065865" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:59:46,102 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:59:46,103 [7] DEBUG [(null)] - Close Connection "44065865" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:59:46,114 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:59:46,115 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-10], @param2=[bgrq,2017/3/10 23:59:59], @param3=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:59:46,116 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:59:46,118 [7] DEBUG [(null)] - Open Connection "44887405" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:59:46,140 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:59:46,141 [7] DEBUG [(null)] - Close Connection "44887405" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:59:46,142 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:59:46,143 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-10], @param2=[bgrq,2017/3/10 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:59:46,144 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:59:46,145 [7] DEBUG [(null)] - Open Connection "4889361" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:59:46,160 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:59:46,162 [7] DEBUG [(null)] - Close Connection "4889361" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:59:46,163 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:59:46,166 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:59:46,167 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:59:46,168 [7] DEBUG [(null)] - Open Connection "27131206" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:59:46,181 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:59:46,183 [7] DEBUG [(null)] - Close Connection "27131206" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:59:46,184 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '2a7a8a51-fe78-4687-8036-1494130f7945','a6057a78-1836-4fc3-8688-d987fcf1a99a','2017-03-10','2017/3/10 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:59:46,186 [7] DEBUG [(null)] - Open Connection "22914588" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:59:46,200 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:59:46,201 [7] DEBUG [(null)] - Close Connection "22914588" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:59:46,202 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:59:46,204 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:59:46,205 [7] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:59:46,206 [7] DEBUG [(null)] - Open Connection "17983906" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:59:46,230 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:59:46,232 [7] DEBUG [(null)] - Close Connection "17983906" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:59:46,234 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:59:46,235 [7] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:59:46,236 [7] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:59:46,237 [7] DEBUG [(null)] - Open Connection "56597992" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:59:46,264 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:59:46,268 [7] DEBUG [(null)] - Close Connection "56597992" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:59:46,272 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [ts_notice]
      as db
       where  db.[flag_delete]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:59:46,273 [7] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Parameters: [@param0=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:59:46,275 [7] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:59:46,277 [7] DEBUG [(null)] - Open Connection "55794431" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:59:46,294 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:59:46,296 [7] DEBUG [(null)] - Close Connection "55794431" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:59:46,301 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.QueryPage] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select t.* from (select row_number() over( order by  
          db.rq_create desc
           ) as rownumber,db.* from  [ts_notice]
      as db  where  db.[flag_delete]= @param0  ) as t
       where  
          t.rownumber between ( @param1  + 1)
           and 
            ( @param1  +  @param2 )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:59:46,303 [7] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Parameters: [@param0=[flag_delete,0], @param1=[start,0], @param2=[limit,10]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:59:46,306 [7] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32], @param2=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:59:46,309 [7] DEBUG [(null)] - Open Connection "29276919" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:59:46,338 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:59:46,340 [7] DEBUG [(null)] - Close Connection "29276919" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:59:47,525 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:59:47,533 [11] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:59:47,545 [11] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:59:47,652 [11] DEBUG [(null)] - Open Connection "54789266" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:59:47,834 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:59:47,836 [11] DEBUG [(null)] - Close Connection "54789266" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:59:49,154 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:59:49,156 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:59:49,159 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:59:49,161 [13] DEBUG [(null)] - Open Connection "18114407" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:59:49,207 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:59:49,208 [13] DEBUG [(null)] - Close Connection "18114407" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:59:49,263 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and db.[id_father]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:59:49,264 [7] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[id_father,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 11:59:49,267 [7] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:59:49,268 [7] DEBUG [(null)] - Open Connection "21328612" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:59:49,286 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 11:59:49,288 [7] DEBUG [(null)] - Close Connection "21328612" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:00:04,320 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser],db.flag_delete from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  and db.[flag_delete]= @param1  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:00:04,323 [11] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:00:04,325 [11] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:00:04,328 [11] DEBUG [(null)] - Open Connection "33133963" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:00:04,347 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:00:04,348 [11] DEBUG [(null)] - Close Connection "33133963" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:00:04,350 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:00:04,353 [11] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:00:04,354 [11] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:00:04,356 [11] DEBUG [(null)] - Open Connection "12951461" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:00:04,407 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:00:04,408 [11] DEBUG [(null)] - Close Connection "12951461" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:00:04,423 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:00:04,425 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-10], @param2=[bgrq,2017/3/10 23:59:59], @param3=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:00:04,426 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:00:04,427 [11] DEBUG [(null)] - Open Connection "30641849" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:00:04,448 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:00:04,449 [11] DEBUG [(null)] - Close Connection "30641849" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:00:04,450 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:00:04,451 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-10], @param2=[bgrq,2017/3/10 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:00:04,454 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:00:04,456 [11] DEBUG [(null)] - Open Connection "25055593" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:00:04,480 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:00:04,482 [11] DEBUG [(null)] - Close Connection "25055593" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:00:04,484 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:00:04,488 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:00:04,493 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:00:04,495 [11] DEBUG [(null)] - Open Connection "19764505" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:00:04,517 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:00:04,517 [11] DEBUG [(null)] - Close Connection "19764505" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:00:04,520 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '2a7a8a51-fe78-4687-8036-1494130f7945','a6057a78-1836-4fc3-8688-d987fcf1a99a','2017-03-10','2017/3/10 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:00:04,522 [11] DEBUG [(null)] - Open Connection "28936687" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:00:04,534 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:00:04,536 [11] DEBUG [(null)] - Close Connection "28936687" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:00:04,538 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:00:04,540 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:00:04,541 [11] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:00:04,542 [11] DEBUG [(null)] - Open Connection "8611533" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:00:04,563 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:00:04,564 [11] DEBUG [(null)] - Close Connection "8611533" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:00:04,565 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:00:04,566 [11] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:00:04,567 [11] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:00:04,568 [11] DEBUG [(null)] - Open Connection "19311960" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:00:04,625 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:00:04,626 [11] DEBUG [(null)] - Close Connection "19311960" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:00:04,628 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [ts_notice]
      as db
       where  db.[flag_delete]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:00:04,629 [11] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Parameters: [@param0=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:00:04,630 [11] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:00:04,631 [11] DEBUG [(null)] - Open Connection "6761972" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:00:04,646 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:00:04,647 [11] DEBUG [(null)] - Close Connection "6761972" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:00:04,648 [11] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.QueryPage] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select t.* from (select row_number() over( order by  
          db.rq_create desc
           ) as rownumber,db.* from  [ts_notice]
      as db  where  db.[flag_delete]= @param0  ) as t
       where  
          t.rownumber between ( @param1  + 1)
           and 
            ( @param1  +  @param2 )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:00:04,650 [11] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Parameters: [@param0=[flag_delete,0], @param1=[start,0], @param2=[limit,10]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:00:04,651 [11] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32], @param2=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:00:04,654 [11] DEBUG [(null)] - Open Connection "62901188" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:00:04,671 [11] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:00:04,673 [11] DEBUG [(null)] - Close Connection "62901188" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:00:05,474 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:00:05,476 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:00:05,481 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:00:05,483 [13] DEBUG [(null)] - Open Connection "35598712" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:00:05,568 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:00:05,572 [13] DEBUG [(null)] - Close Connection "35598712" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:00:06,238 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:00:06,240 [6] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:00:06,251 [6] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:00:06,256 [6] DEBUG [(null)] - Open Connection "15348365" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:00:06,294 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:00:06,295 [6] DEBUG [(null)] - Close Connection "15348365" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:00:06,352 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and db.[id_father]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:00:06,354 [7] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[id_father,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:00:06,355 [7] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:00:06,356 [7] DEBUG [(null)] - Open Connection "35150423" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:00:06,373 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:00:06,374 [7] DEBUG [(null)] - Close Connection "35150423" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:02:26,458 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser],db.flag_delete from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  and db.[flag_delete]= @param1  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:02:26,459 [13] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:02:26,460 [13] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:02:26,462 [13] DEBUG [(null)] - Open Connection "41397854" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:02:26,483 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:02:26,484 [13] DEBUG [(null)] - Close Connection "41397854" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:02:26,485 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:02:26,487 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:02:26,488 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:02:26,489 [13] DEBUG [(null)] - Open Connection "10867492" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:02:26,556 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:02:26,557 [13] DEBUG [(null)] - Close Connection "10867492" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:02:26,568 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:02:26,570 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-10], @param2=[bgrq,2017/3/10 23:59:59], @param3=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:02:26,571 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:02:26,572 [13] DEBUG [(null)] - Open Connection "15467287" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:02:26,604 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:02:26,606 [13] DEBUG [(null)] - Close Connection "15467287" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:02:26,608 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:02:26,609 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-10], @param2=[bgrq,2017/3/10 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:02:26,610 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:02:26,612 [13] DEBUG [(null)] - Open Connection "9220161" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:02:26,644 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:02:26,645 [13] DEBUG [(null)] - Close Connection "9220161" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:02:26,647 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:02:26,649 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:02:26,651 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:02:26,652 [13] DEBUG [(null)] - Open Connection "55787171" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:02:26,665 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:02:26,667 [13] DEBUG [(null)] - Close Connection "55787171" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:02:26,668 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '2a7a8a51-fe78-4687-8036-1494130f7945','a6057a78-1836-4fc3-8688-d987fcf1a99a','2017-03-10','2017/3/10 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:02:26,670 [13] DEBUG [(null)] - Open Connection "25752182" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:02:26,701 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:02:26,704 [13] DEBUG [(null)] - Close Connection "25752182" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:02:26,707 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:02:26,709 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:02:26,713 [13] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:02:26,723 [13] DEBUG [(null)] - Open Connection "58588267" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:02:26,816 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:02:26,819 [13] DEBUG [(null)] - Close Connection "58588267" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:02:26,823 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:02:26,825 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:02:26,826 [13] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:02:26,828 [13] DEBUG [(null)] - Open Connection "51196907" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:02:26,870 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:02:26,872 [13] DEBUG [(null)] - Close Connection "51196907" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:02:26,873 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [ts_notice]
      as db
       where  db.[flag_delete]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:02:26,874 [13] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Parameters: [@param0=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:02:26,875 [13] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:02:26,877 [13] DEBUG [(null)] - Open Connection "32542550" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:02:26,915 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:02:26,918 [13] DEBUG [(null)] - Close Connection "32542550" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:02:26,920 [13] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.QueryPage] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select t.* from (select row_number() over( order by  
          db.rq_create desc
           ) as rownumber,db.* from  [ts_notice]
      as db  where  db.[flag_delete]= @param0  ) as t
       where  
          t.rownumber between ( @param1  + 1)
           and 
            ( @param1  +  @param2 )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:02:26,921 [13] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Parameters: [@param0=[flag_delete,0], @param1=[start,0], @param2=[limit,10]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:02:26,921 [13] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32], @param2=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:02:26,922 [13] DEBUG [(null)] - Open Connection "42986054" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:02:26,938 [13] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:02:26,939 [13] DEBUG [(null)] - Close Connection "42986054" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:02:27,729 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:02:27,730 [6] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:02:27,735 [6] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:02:27,740 [6] DEBUG [(null)] - Open Connection "19709351" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:02:27,843 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:02:27,857 [6] DEBUG [(null)] - Close Connection "19709351" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:02:28,543 [14] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:02:28,551 [14] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:02:28,556 [14] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:02:28,570 [14] DEBUG [(null)] - Open Connection "28092704" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:02:28,609 [14] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:02:28,610 [14] DEBUG [(null)] - Close Connection "28092704" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:02:28,661 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and db.[id_father]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:02:28,663 [17] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[id_father,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:02:28,665 [17] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:02:28,668 [17] DEBUG [(null)] - Open Connection "27485951" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:02:28,693 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:02:28,695 [17] DEBUG [(null)] - Close Connection "27485951" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:33,798 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser],db.flag_delete from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  and db.[flag_delete]= @param1  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:33,799 [6] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:33,803 [6] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:33,806 [6] DEBUG [(null)] - Open Connection "22292436" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:33,820 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:33,821 [6] DEBUG [(null)] - Close Connection "22292436" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:33,824 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:33,836 [6] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:33,838 [6] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:33,839 [6] DEBUG [(null)] - Open Connection "42500877" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:33,892 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:33,893 [6] DEBUG [(null)] - Close Connection "42500877" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:33,906 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:33,908 [6] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-10], @param2=[bgrq,2017/3/10 23:59:59], @param3=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:33,909 [6] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:33,910 [6] DEBUG [(null)] - Open Connection "24565883" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:33,939 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:33,941 [6] DEBUG [(null)] - Close Connection "24565883" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:33,942 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:33,943 [6] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-10], @param2=[bgrq,2017/3/10 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:33,944 [6] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:33,945 [6] DEBUG [(null)] - Open Connection "41321975" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:33,968 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:33,970 [6] DEBUG [(null)] - Close Connection "41321975" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:33,972 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:33,973 [6] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:33,974 [6] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:33,975 [6] DEBUG [(null)] - Open Connection "57486592" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:33,991 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:33,992 [6] DEBUG [(null)] - Close Connection "57486592" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:33,993 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '2a7a8a51-fe78-4687-8036-1494130f7945','a6057a78-1836-4fc3-8688-d987fcf1a99a','2017-03-10','2017/3/10 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:33,995 [6] DEBUG [(null)] - Open Connection "56498432" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:34,030 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:34,032 [6] DEBUG [(null)] - Close Connection "56498432" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:34,034 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:34,038 [6] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:34,039 [6] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:34,040 [6] DEBUG [(null)] - Open Connection "27841792" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:34,103 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:34,105 [6] DEBUG [(null)] - Close Connection "27841792" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:34,106 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:34,107 [6] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:34,109 [6] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:34,110 [6] DEBUG [(null)] - Open Connection "2105613" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:34,165 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:34,166 [6] DEBUG [(null)] - Close Connection "2105613" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:34,168 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [ts_notice]
      as db
       where  db.[flag_delete]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:34,170 [6] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Parameters: [@param0=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:34,171 [6] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:34,172 [6] DEBUG [(null)] - Open Connection "61062794" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:34,183 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:34,187 [6] DEBUG [(null)] - Close Connection "61062794" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:34,189 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.QueryPage] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select t.* from (select row_number() over( order by  
          db.rq_create desc
           ) as rownumber,db.* from  [ts_notice]
      as db  where  db.[flag_delete]= @param0  ) as t
       where  
          t.rownumber between ( @param1  + 1)
           and 
            ( @param1  +  @param2 )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:34,190 [6] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Parameters: [@param0=[flag_delete,0], @param1=[start,0], @param2=[limit,10]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:34,191 [6] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32], @param2=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:34,192 [6] DEBUG [(null)] - Open Connection "25990581" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:34,206 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:34,207 [6] DEBUG [(null)] - Close Connection "25990581" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:35,213 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:35,233 [9] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:35,260 [9] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:35,261 [9] DEBUG [(null)] - Open Connection "39467546" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:35,355 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:35,357 [9] DEBUG [(null)] - Close Connection "39467546" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:36,016 [14] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:36,018 [14] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:36,020 [14] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:36,022 [14] DEBUG [(null)] - Open Connection "54958907" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:36,067 [14] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:36,069 [14] DEBUG [(null)] - Close Connection "54958907" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:36,137 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and db.[id_father]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:36,139 [9] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[id_father,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:36,140 [9] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:36,141 [9] DEBUG [(null)] - Open Connection "47534167" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:36,159 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:36,160 [9] DEBUG [(null)] - Close Connection "47534167" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:44,195 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser],db.flag_delete from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  and db.[flag_delete]= @param1  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:44,197 [6] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:44,198 [6] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:44,199 [6] DEBUG [(null)] - Open Connection "63911925" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:44,217 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:44,219 [6] DEBUG [(null)] - Close Connection "63911925" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:44,222 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:44,227 [6] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:44,229 [6] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:44,231 [6] DEBUG [(null)] - Open Connection "41506503" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:44,268 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:44,270 [6] DEBUG [(null)] - Close Connection "41506503" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:44,288 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:44,293 [6] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-10], @param2=[bgrq,2017/3/10 23:59:59], @param3=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:44,296 [6] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:44,298 [6] DEBUG [(null)] - Open Connection "62837909" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:44,340 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:44,345 [6] DEBUG [(null)] - Close Connection "62837909" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:44,348 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:44,350 [6] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-10], @param2=[bgrq,2017/3/10 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:44,351 [6] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:44,354 [6] DEBUG [(null)] - Open Connection "10360045" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:44,374 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:44,377 [6] DEBUG [(null)] - Close Connection "10360045" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:44,381 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:44,386 [6] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:44,389 [6] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:44,393 [6] DEBUG [(null)] - Open Connection "32005869" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:44,415 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:44,417 [6] DEBUG [(null)] - Close Connection "32005869" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:44,420 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '2a7a8a51-fe78-4687-8036-1494130f7945','a6057a78-1836-4fc3-8688-d987fcf1a99a','2017-03-10','2017/3/10 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:44,427 [6] DEBUG [(null)] - Open Connection "55754980" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:44,487 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:44,496 [6] DEBUG [(null)] - Close Connection "55754980" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:44,498 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:44,499 [6] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:44,501 [6] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:44,502 [6] DEBUG [(null)] - Open Connection "6281707" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:44,528 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:44,530 [6] DEBUG [(null)] - Close Connection "6281707" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:44,531 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:44,533 [6] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:44,534 [6] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:44,536 [6] DEBUG [(null)] - Open Connection "47951778" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:44,580 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:44,581 [6] DEBUG [(null)] - Close Connection "47951778" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:44,583 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [ts_notice]
      as db
       where  db.[flag_delete]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:44,584 [6] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Parameters: [@param0=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:44,585 [6] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:44,586 [6] DEBUG [(null)] - Open Connection "48424300" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:44,621 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:44,628 [6] DEBUG [(null)] - Close Connection "48424300" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:44,630 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.QueryPage] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select t.* from (select row_number() over( order by  
          db.rq_create desc
           ) as rownumber,db.* from  [ts_notice]
      as db  where  db.[flag_delete]= @param0  ) as t
       where  
          t.rownumber between ( @param1  + 1)
           and 
            ( @param1  +  @param2 )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:44,631 [6] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Parameters: [@param0=[flag_delete,0], @param1=[start,0], @param2=[limit,10]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:44,632 [6] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32], @param2=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:44,634 [6] DEBUG [(null)] - Open Connection "62127437" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:44,652 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:44,654 [6] DEBUG [(null)] - Close Connection "62127437" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:45,325 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:45,327 [9] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:45,329 [9] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:45,330 [9] DEBUG [(null)] - Open Connection "1793838" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:45,395 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:45,396 [9] DEBUG [(null)] - Close Connection "1793838" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:46,095 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:46,098 [15] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:46,100 [15] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:46,102 [15] DEBUG [(null)] - Open Connection "10536499" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:46,140 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:46,141 [15] DEBUG [(null)] - Close Connection "10536499" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:46,185 [14] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and db.[id_father]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:46,186 [14] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[id_father,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:03:46,188 [14] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:46,190 [14] DEBUG [(null)] - Open Connection "57659297" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:46,205 [14] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:03:46,207 [14] DEBUG [(null)] - Close Connection "57659297" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:04:55,242 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser],db.flag_delete from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  and db.[flag_delete]= @param1  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:04:55,248 [9] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:04:55,251 [9] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:04:55,253 [9] DEBUG [(null)] - Open Connection "36130605" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:04:55,272 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:04:55,273 [9] DEBUG [(null)] - Close Connection "36130605" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:04:55,275 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:04:55,278 [9] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:04:55,280 [9] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:04:55,281 [9] DEBUG [(null)] - Open Connection "4959808" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:04:55,336 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:04:55,337 [9] DEBUG [(null)] - Close Connection "4959808" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:04:55,348 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:04:55,350 [9] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-10], @param2=[bgrq,2017/3/10 23:59:59], @param3=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:04:55,351 [9] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:04:55,352 [9] DEBUG [(null)] - Open Connection "2025558" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:04:55,387 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:04:55,389 [9] DEBUG [(null)] - Close Connection "2025558" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:04:55,390 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:04:55,391 [9] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-10], @param2=[bgrq,2017/3/10 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:04:55,394 [9] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:04:55,395 [9] DEBUG [(null)] - Open Connection "15939031" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:04:55,415 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:04:55,416 [9] DEBUG [(null)] - Close Connection "15939031" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:04:55,417 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:04:55,419 [9] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:04:55,420 [9] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:04:55,421 [9] DEBUG [(null)] - Open Connection "49520534" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:04:55,435 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:04:55,436 [9] DEBUG [(null)] - Close Connection "49520534" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:04:55,438 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '2a7a8a51-fe78-4687-8036-1494130f7945','a6057a78-1836-4fc3-8688-d987fcf1a99a','2017-03-10','2017/3/10 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:04:55,439 [9] DEBUG [(null)] - Open Connection "17075977" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:04:55,482 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:04:55,483 [9] DEBUG [(null)] - Close Connection "17075977" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:04:55,484 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:04:55,485 [9] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:04:55,487 [9] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:04:55,488 [9] DEBUG [(null)] - Open Connection "29026452" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:04:55,550 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:04:55,551 [9] DEBUG [(null)] - Close Connection "29026452" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:04:55,553 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:04:55,554 [9] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:04:55,555 [9] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:04:55,556 [9] DEBUG [(null)] - Open Connection "49233854" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:04:55,584 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:04:55,586 [9] DEBUG [(null)] - Close Connection "49233854" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:04:55,587 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [ts_notice]
      as db
       where  db.[flag_delete]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:04:55,588 [9] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Parameters: [@param0=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:04:55,589 [9] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:04:55,591 [9] DEBUG [(null)] - Open Connection "5322104" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:04:55,617 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:04:55,618 [9] DEBUG [(null)] - Close Connection "5322104" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:04:55,619 [9] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.QueryPage] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select t.* from (select row_number() over( order by  
          db.rq_create desc
           ) as rownumber,db.* from  [ts_notice]
      as db  where  db.[flag_delete]= @param0  ) as t
       where  
          t.rownumber between ( @param1  + 1)
           and 
            ( @param1  +  @param2 )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:04:55,620 [9] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Parameters: [@param0=[flag_delete,0], @param1=[start,0], @param2=[limit,10]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:04:55,621 [9] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32], @param2=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:04:55,622 [9] DEBUG [(null)] - Open Connection "16879709" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:04:55,640 [9] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:04:55,642 [9] DEBUG [(null)] - Close Connection "16879709" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:04:56,408 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:04:56,413 [18] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:04:56,415 [18] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:04:56,419 [18] DEBUG [(null)] - Open Connection "37590978" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:04:56,576 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:04:56,580 [18] DEBUG [(null)] - Close Connection "37590978" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:04:57,319 [8] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:04:57,321 [8] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:04:57,322 [8] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:04:57,324 [8] DEBUG [(null)] - Open Connection "39622411" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:04:57,377 [8] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:04:57,380 [8] DEBUG [(null)] - Close Connection "39622411" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:04:57,432 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and db.[id_father]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:04:57,434 [18] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[id_father,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:04:57,437 [18] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:04:57,442 [18] DEBUG [(null)] - Open Connection "56167532" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:04:57,456 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:04:57,457 [18] DEBUG [(null)] - Close Connection "56167532" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:10,119 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser],db.flag_delete from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  and db.[flag_delete]= @param1  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:10,124 [15] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:10,128 [15] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:10,130 [15] DEBUG [(null)] - Open Connection "49495347" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:10,152 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:10,153 [15] DEBUG [(null)] - Close Connection "49495347" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:10,160 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:10,161 [15] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:10,165 [15] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:10,167 [15] DEBUG [(null)] - Open Connection "63080949" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:10,220 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:10,222 [15] DEBUG [(null)] - Close Connection "63080949" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:10,233 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:10,234 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-10], @param2=[bgrq,2017/3/10 23:59:59], @param3=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:10,235 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:10,237 [15] DEBUG [(null)] - Open Connection "6620984" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:10,264 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:10,266 [15] DEBUG [(null)] - Close Connection "6620984" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:10,267 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:10,268 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-10], @param2=[bgrq,2017/3/10 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:10,270 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:10,271 [15] DEBUG [(null)] - Open Connection "27710780" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:10,303 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:10,306 [15] DEBUG [(null)] - Close Connection "27710780" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:10,308 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:10,309 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:10,310 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:10,312 [15] DEBUG [(null)] - Open Connection "56370241" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:10,326 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:10,327 [15] DEBUG [(null)] - Close Connection "56370241" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:10,328 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '2a7a8a51-fe78-4687-8036-1494130f7945','a6057a78-1836-4fc3-8688-d987fcf1a99a','2017-03-10','2017/3/10 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:10,330 [15] DEBUG [(null)] - Open Connection "40187015" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:10,357 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:10,359 [15] DEBUG [(null)] - Close Connection "40187015" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:10,360 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:10,361 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:10,363 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:10,364 [15] DEBUG [(null)] - Open Connection "62019150" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:10,443 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:10,445 [15] DEBUG [(null)] - Close Connection "62019150" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:10,447 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:10,449 [15] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:10,451 [15] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:10,452 [15] DEBUG [(null)] - Open Connection "4712918" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:10,481 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:10,482 [15] DEBUG [(null)] - Close Connection "4712918" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:10,484 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [ts_notice]
      as db
       where  db.[flag_delete]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:10,485 [15] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Parameters: [@param0=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:10,486 [15] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:10,488 [15] DEBUG [(null)] - Open Connection "37904223" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:10,507 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:10,510 [15] DEBUG [(null)] - Close Connection "37904223" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:10,513 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.QueryPage] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select t.* from (select row_number() over( order by  
          db.rq_create desc
           ) as rownumber,db.* from  [ts_notice]
      as db  where  db.[flag_delete]= @param0  ) as t
       where  
          t.rownumber between ( @param1  + 1)
           and 
            ( @param1  +  @param2 )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:10,514 [15] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Parameters: [@param0=[flag_delete,0], @param1=[start,0], @param2=[limit,10]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:10,516 [15] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32], @param2=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:10,517 [15] DEBUG [(null)] - Open Connection "47855401" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:10,550 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:10,552 [15] DEBUG [(null)] - Close Connection "47855401" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:11,850 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:11,853 [15] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:11,860 [15] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:11,863 [15] DEBUG [(null)] - Open Connection "53408337" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:11,951 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:12,004 [15] DEBUG [(null)] - Close Connection "53408337" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:13,549 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:13,551 [6] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:13,552 [6] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:13,554 [6] DEBUG [(null)] - Open Connection "52448300" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:13,600 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:13,602 [6] DEBUG [(null)] - Close Connection "52448300" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:13,665 [14] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and db.[id_father]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:13,667 [14] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[id_father,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:13,668 [14] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:13,669 [14] DEBUG [(null)] - Open Connection "38029915" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:13,686 [14] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:13,687 [14] DEBUG [(null)] - Close Connection "38029915" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:27,167 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser],db.flag_delete from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  and db.[flag_delete]= @param1  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:27,169 [15] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:27,170 [15] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:27,172 [15] DEBUG [(null)] - Open Connection "48537422" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:27,192 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:27,194 [15] DEBUG [(null)] - Close Connection "48537422" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:27,197 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:27,199 [15] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:27,201 [15] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:27,203 [15] DEBUG [(null)] - Open Connection "815862" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:27,546 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:27,549 [15] DEBUG [(null)] - Close Connection "815862" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:27,575 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:27,577 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-10], @param2=[bgrq,2017/3/10 23:59:59], @param3=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:27,580 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:27,582 [15] DEBUG [(null)] - Open Connection "53031071" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:27,599 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:27,600 [15] DEBUG [(null)] - Close Connection "53031071" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:27,602 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:27,604 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-10], @param2=[bgrq,2017/3/10 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:27,605 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:27,607 [15] DEBUG [(null)] - Open Connection "24467593" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:27,622 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:27,625 [15] DEBUG [(null)] - Close Connection "24467593" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:27,629 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:27,631 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:27,633 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:27,635 [15] DEBUG [(null)] - Open Connection "46889716" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:27,668 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:27,670 [15] DEBUG [(null)] - Close Connection "46889716" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:27,671 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '2a7a8a51-fe78-4687-8036-1494130f7945','a6057a78-1836-4fc3-8688-d987fcf1a99a','2017-03-10','2017/3/10 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:27,672 [15] DEBUG [(null)] - Open Connection "27932704" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:27,687 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:27,688 [15] DEBUG [(null)] - Close Connection "27932704" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:27,689 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:27,690 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:27,691 [15] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:27,692 [15] DEBUG [(null)] - Open Connection "3686477" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:27,719 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:27,720 [15] DEBUG [(null)] - Close Connection "3686477" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:27,721 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:27,723 [15] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:27,724 [15] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:27,725 [15] DEBUG [(null)] - Open Connection "38294459" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:28,054 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:28,056 [15] DEBUG [(null)] - Close Connection "38294459" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:28,058 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [ts_notice]
      as db
       where  db.[flag_delete]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:28,059 [15] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Parameters: [@param0=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:28,061 [15] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:28,063 [15] DEBUG [(null)] - Open Connection "6111914" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:28,078 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:28,081 [15] DEBUG [(null)] - Close Connection "6111914" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:28,082 [15] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.QueryPage] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select t.* from (select row_number() over( order by  
          db.rq_create desc
           ) as rownumber,db.* from  [ts_notice]
      as db  where  db.[flag_delete]= @param0  ) as t
       where  
          t.rownumber between ( @param1  + 1)
           and 
            ( @param1  +  @param2 )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:28,084 [15] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Parameters: [@param0=[flag_delete,0], @param1=[start,0], @param2=[limit,10]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:28,085 [15] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32], @param2=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:28,086 [15] DEBUG [(null)] - Open Connection "61730138" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:28,111 [15] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:28,113 [15] DEBUG [(null)] - Close Connection "61730138" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:29,422 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:29,425 [17] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:29,429 [17] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:29,443 [17] DEBUG [(null)] - Open Connection "48984609" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:29,590 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:29,596 [17] DEBUG [(null)] - Close Connection "48984609" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:30,915 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:30,917 [6] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:30,918 [6] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:30,919 [6] DEBUG [(null)] - Open Connection "50188663" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:30,962 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:30,965 [6] DEBUG [(null)] - Close Connection "50188663" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:31,026 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and db.[id_father]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:31,029 [17] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[id_father,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:08:31,031 [17] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:31,033 [17] DEBUG [(null)] - Open Connection "60189034" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:31,050 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:08:31,051 [17] DEBUG [(null)] - Close Connection "60189034" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:13:23,809 [14] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser],db.flag_delete from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  and db.[flag_delete]= @param1  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:13:23,811 [14] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:13:23,812 [14] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:13:23,814 [14] DEBUG [(null)] - Open Connection "52562356" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:13:23,828 [14] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:13:23,830 [14] DEBUG [(null)] - Close Connection "52562356" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:13:23,831 [14] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:13:23,832 [14] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:13:23,834 [14] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:13:23,835 [14] DEBUG [(null)] - Open Connection "52187137" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:13:26,000 [14] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:13:26,005 [14] DEBUG [(null)] - Close Connection "52187137" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:13:26,041 [14] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:13:26,043 [14] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-10], @param2=[bgrq,2017/3/10 23:59:59], @param3=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:13:26,045 [14] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:13:26,047 [14] DEBUG [(null)] - Open Connection "29298783" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:13:26,080 [14] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:13:26,081 [14] DEBUG [(null)] - Close Connection "29298783" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:13:26,082 [14] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:13:26,083 [14] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-10], @param2=[bgrq,2017/3/10 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:13:26,084 [14] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:13:26,086 [14] DEBUG [(null)] - Open Connection "42395319" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:13:26,107 [14] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:13:26,109 [14] DEBUG [(null)] - Close Connection "42395319" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:13:26,110 [14] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:13:26,112 [14] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:13:26,113 [14] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:13:26,115 [14] DEBUG [(null)] - Open Connection "35977628" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:13:26,138 [14] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:13:26,140 [14] DEBUG [(null)] - Close Connection "35977628" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:13:26,142 [14] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '2a7a8a51-fe78-4687-8036-1494130f7945','a6057a78-1836-4fc3-8688-d987fcf1a99a','2017-03-10','2017/3/10 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:13:26,143 [14] DEBUG [(null)] - Open Connection "47151716" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:13:26,180 [14] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:13:26,182 [14] DEBUG [(null)] - Close Connection "47151716" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:13:26,183 [14] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:13:26,184 [14] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:13:26,185 [14] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:13:26,186 [14] DEBUG [(null)] - Open Connection "57682403" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:13:26,255 [14] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:13:26,258 [14] DEBUG [(null)] - Close Connection "57682403" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:13:26,262 [14] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:13:26,266 [14] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:13:26,268 [14] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:13:26,271 [14] DEBUG [(null)] - Open Connection "28965671" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:13:26,313 [14] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:13:26,314 [14] DEBUG [(null)] - Close Connection "28965671" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:13:26,316 [14] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [ts_notice]
      as db
       where  db.[flag_delete]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:13:26,317 [14] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Parameters: [@param0=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:13:26,319 [14] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:13:26,320 [14] DEBUG [(null)] - Open Connection "22075480" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:13:26,334 [14] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:13:26,337 [14] DEBUG [(null)] - Close Connection "22075480" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:13:26,340 [14] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.QueryPage] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select t.* from (select row_number() over( order by  
          db.rq_create desc
           ) as rownumber,db.* from  [ts_notice]
      as db  where  db.[flag_delete]= @param0  ) as t
       where  
          t.rownumber between ( @param1  + 1)
           and 
            ( @param1  +  @param2 )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:13:26,341 [14] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Parameters: [@param0=[flag_delete,0], @param1=[start,0], @param2=[limit,10]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:13:26,342 [14] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32], @param2=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:13:26,344 [14] DEBUG [(null)] - Open Connection "4427021" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:13:26,374 [14] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:13:26,375 [14] DEBUG [(null)] - Close Connection "4427021" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:13:28,012 [14] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:13:28,020 [14] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:13:28,097 [14] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:13:28,113 [14] DEBUG [(null)] - Open Connection "47293242" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:13:28,200 [14] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:13:28,204 [14] DEBUG [(null)] - Close Connection "47293242" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:13:28,953 [14] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:13:28,962 [14] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:13:28,978 [14] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:13:28,982 [14] DEBUG [(null)] - Open Connection "67079710" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:13:29,016 [14] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:13:29,018 [14] DEBUG [(null)] - Close Connection "67079710" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:13:29,078 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and db.[id_father]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:13:29,079 [17] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[id_father,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:13:29,081 [17] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:13:29,082 [17] DEBUG [(null)] - Open Connection "31459092" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:13:29,108 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:13:29,112 [17] DEBUG [(null)] - Close Connection "31459092" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:14:59,934 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser],db.flag_delete from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  and db.[flag_delete]= @param1  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:14:59,939 [18] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:14:59,940 [18] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:14:59,942 [18] DEBUG [(null)] - Open Connection "25108607" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:14:59,960 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:14:59,961 [18] DEBUG [(null)] - Close Connection "25108607" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:14:59,962 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:14:59,964 [18] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:14:59,965 [18] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:14:59,966 [18] DEBUG [(null)] - Open Connection "54314548" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:15:00,027 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:15:00,029 [18] DEBUG [(null)] - Close Connection "54314548" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:15:00,039 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:15:00,041 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-10], @param2=[bgrq,2017/3/10 23:59:59], @param3=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:15:00,042 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:15:00,043 [18] DEBUG [(null)] - Open Connection "21470644" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:15:00,075 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:15:00,076 [18] DEBUG [(null)] - Close Connection "21470644" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:15:00,077 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:15:00,078 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-10], @param2=[bgrq,2017/3/10 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:15:00,079 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:15:00,080 [18] DEBUG [(null)] - Open Connection "42626918" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:15:00,102 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:15:00,103 [18] DEBUG [(null)] - Close Connection "42626918" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:15:00,104 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:15:00,106 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:15:00,107 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:15:00,109 [18] DEBUG [(null)] - Open Connection "61047228" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:15:00,134 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:15:00,136 [18] DEBUG [(null)] - Close Connection "61047228" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:15:00,137 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '2a7a8a51-fe78-4687-8036-1494130f7945','a6057a78-1836-4fc3-8688-d987fcf1a99a','2017-03-10','2017/3/10 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:15:00,138 [18] DEBUG [(null)] - Open Connection "3016110" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:15:00,169 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:15:00,170 [18] DEBUG [(null)] - Close Connection "3016110" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:15:00,172 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:15:00,173 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:15:00,174 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:15:00,175 [18] DEBUG [(null)] - Open Connection "30913947" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:15:00,231 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:15:00,233 [18] DEBUG [(null)] - Close Connection "30913947" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:15:00,235 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:15:00,236 [18] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:15:00,237 [18] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:15:00,238 [18] DEBUG [(null)] - Open Connection "31563740" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:15:00,262 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:15:00,264 [18] DEBUG [(null)] - Close Connection "31563740" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:15:00,265 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [ts_notice]
      as db
       where  db.[flag_delete]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:15:00,267 [18] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Parameters: [@param0=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:15:00,269 [18] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:15:00,271 [18] DEBUG [(null)] - Open Connection "14488904" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:15:00,289 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:15:00,290 [18] DEBUG [(null)] - Close Connection "14488904" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:15:00,292 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.QueryPage] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select t.* from (select row_number() over( order by  
          db.rq_create desc
           ) as rownumber,db.* from  [ts_notice]
      as db  where  db.[flag_delete]= @param0  ) as t
       where  
          t.rownumber between ( @param1  + 1)
           and 
            ( @param1  +  @param2 )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:15:00,293 [18] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Parameters: [@param0=[flag_delete,0], @param1=[start,0], @param2=[limit,10]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:15:00,294 [18] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32], @param2=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:15:00,295 [18] DEBUG [(null)] - Open Connection "41903852" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:15:00,312 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:15:00,314 [18] DEBUG [(null)] - Close Connection "41903852" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:15:01,812 [14] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:15:01,814 [14] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:15:01,816 [14] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:15:01,823 [14] DEBUG [(null)] - Open Connection "5157466" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:15:01,891 [14] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:15:01,910 [14] DEBUG [(null)] - Close Connection "5157466" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:15:02,798 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:15:02,801 [7] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:15:02,804 [7] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:15:02,806 [7] DEBUG [(null)] - Open Connection "59215013" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:15:02,841 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:15:02,844 [7] DEBUG [(null)] - Close Connection "59215013" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:15:02,911 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and db.[id_father]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:15:02,913 [6] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[id_father,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:15:02,914 [6] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:15:02,915 [6] DEBUG [(null)] - Open Connection "12173773" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:15:02,960 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:15:02,962 [6] DEBUG [(null)] - Close Connection "12173773" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:15,789 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser],db.flag_delete from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  and db.[flag_delete]= @param1  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:15,792 [18] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:15,795 [18] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:15,797 [18] DEBUG [(null)] - Open Connection "36674625" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:15,815 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:15,817 [18] DEBUG [(null)] - Close Connection "36674625" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:15,818 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:15,820 [18] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:15,822 [18] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:15,825 [18] DEBUG [(null)] - Open Connection "5373863" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:15,882 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:15,883 [18] DEBUG [(null)] - Close Connection "5373863" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:15,901 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:15,905 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-10], @param2=[bgrq,2017/3/10 23:59:59], @param3=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:15,914 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:15,915 [18] DEBUG [(null)] - Open Connection "11134304" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:15,965 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:15,966 [18] DEBUG [(null)] - Close Connection "11134304" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:15,968 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:15,970 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-10], @param2=[bgrq,2017/3/10 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:15,972 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:15,973 [18] DEBUG [(null)] - Open Connection "52035064" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:16,006 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:16,016 [18] DEBUG [(null)] - Close Connection "52035064" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:16,021 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:16,023 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:16,035 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:16,038 [18] DEBUG [(null)] - Open Connection "47276958" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:16,069 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:16,086 [18] DEBUG [(null)] - Close Connection "47276958" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:16,088 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '2a7a8a51-fe78-4687-8036-1494130f7945','a6057a78-1836-4fc3-8688-d987fcf1a99a','2017-03-10','2017/3/10 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:16,097 [18] DEBUG [(null)] - Open Connection "16447112" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:16,179 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:16,196 [18] DEBUG [(null)] - Close Connection "16447112" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:16,222 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:16,238 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:16,247 [18] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:16,249 [18] DEBUG [(null)] - Open Connection "58468104" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:16,316 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:16,317 [18] DEBUG [(null)] - Close Connection "58468104" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:16,319 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:16,321 [18] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:16,332 [18] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:16,338 [18] DEBUG [(null)] - Open Connection "5750158" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:16,383 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:16,385 [18] DEBUG [(null)] - Close Connection "5750158" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:16,387 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [ts_notice]
      as db
       where  db.[flag_delete]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:16,388 [18] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Parameters: [@param0=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:16,390 [18] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:16,393 [18] DEBUG [(null)] - Open Connection "40109021" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:16,415 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:16,416 [18] DEBUG [(null)] - Close Connection "40109021" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:16,418 [18] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.QueryPage] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select t.* from (select row_number() over( order by  
          db.rq_create desc
           ) as rownumber,db.* from  [ts_notice]
      as db  where  db.[flag_delete]= @param0  ) as t
       where  
          t.rownumber between ( @param1  + 1)
           and 
            ( @param1  +  @param2 )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:16,419 [18] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Parameters: [@param0=[flag_delete,0], @param1=[start,0], @param2=[limit,10]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:16,420 [18] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32], @param2=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:16,421 [18] DEBUG [(null)] - Open Connection "1386928" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:16,438 [18] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:16,439 [18] DEBUG [(null)] - Close Connection "1386928" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:18,100 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:18,102 [6] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:18,103 [6] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:18,105 [6] DEBUG [(null)] - Open Connection "30354783" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:18,194 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:18,203 [6] DEBUG [(null)] - Close Connection "30354783" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:19,040 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:19,045 [6] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:19,049 [6] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:19,051 [6] DEBUG [(null)] - Open Connection "30028600" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:19,099 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:19,100 [6] DEBUG [(null)] - Close Connection "30028600" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:19,169 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and db.[id_father]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:19,170 [7] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[id_father,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:19,172 [7] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:19,173 [7] DEBUG [(null)] - Open Connection "5652440" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:19,190 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:19,192 [7] DEBUG [(null)] - Close Connection "5652440" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:37,761 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser],db.flag_delete from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  and db.[flag_delete]= @param1  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:37,762 [6] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:37,763 [6] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:37,764 [6] DEBUG [(null)] - Open Connection "15854396" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:37,788 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:37,789 [6] DEBUG [(null)] - Close Connection "15854396" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:37,791 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:37,793 [6] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:37,794 [6] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:37,795 [6] DEBUG [(null)] - Open Connection "57124300" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:37,851 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:37,852 [6] DEBUG [(null)] - Close Connection "57124300" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:37,862 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:37,863 [6] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-10], @param2=[bgrq,2017/3/10 23:59:59], @param3=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:37,865 [6] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:37,867 [6] DEBUG [(null)] - Open Connection "45991964" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:37,897 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:37,904 [6] DEBUG [(null)] - Close Connection "45991964" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:37,907 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:37,908 [6] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-10], @param2=[bgrq,2017/3/10 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:37,909 [6] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:37,911 [6] DEBUG [(null)] - Open Connection "58698553" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:37,950 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:37,952 [6] DEBUG [(null)] - Close Connection "58698553" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:37,953 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:37,954 [6] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:37,956 [6] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:37,957 [6] DEBUG [(null)] - Open Connection "24536454" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:37,972 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:37,974 [6] DEBUG [(null)] - Close Connection "24536454" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:37,976 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '2a7a8a51-fe78-4687-8036-1494130f7945','a6057a78-1836-4fc3-8688-d987fcf1a99a','2017-03-10','2017/3/10 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:37,978 [6] DEBUG [(null)] - Open Connection "40468545" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:38,003 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:38,006 [6] DEBUG [(null)] - Close Connection "40468545" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:38,008 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:38,009 [6] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:38,010 [6] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:38,011 [6] DEBUG [(null)] - Open Connection "32737144" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:38,076 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:38,078 [6] DEBUG [(null)] - Close Connection "32737144" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:38,079 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:38,080 [6] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:38,083 [6] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:38,085 [6] DEBUG [(null)] - Open Connection "9853099" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:38,121 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:38,122 [6] DEBUG [(null)] - Close Connection "9853099" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:38,123 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [ts_notice]
      as db
       where  db.[flag_delete]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:38,125 [6] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Parameters: [@param0=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:38,126 [6] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:38,127 [6] DEBUG [(null)] - Open Connection "17304416" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:38,142 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:38,144 [6] DEBUG [(null)] - Close Connection "17304416" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:38,145 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.QueryPage] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select t.* from (select row_number() over( order by  
          db.rq_create desc
           ) as rownumber,db.* from  [ts_notice]
      as db  where  db.[flag_delete]= @param0  ) as t
       where  
          t.rownumber between ( @param1  + 1)
           and 
            ( @param1  +  @param2 )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:38,146 [6] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Parameters: [@param0=[flag_delete,0], @param1=[start,0], @param2=[limit,10]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:38,147 [6] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32], @param2=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:38,158 [6] DEBUG [(null)] - Open Connection "32066026" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:38,183 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:38,186 [6] DEBUG [(null)] - Close Connection "32066026" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:39,473 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:39,495 [6] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:39,519 [6] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:39,523 [6] DEBUG [(null)] - Open Connection "31134782" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:39,591 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:39,594 [6] DEBUG [(null)] - Close Connection "31134782" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:40,415 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:40,421 [6] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:40,422 [6] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:40,427 [6] DEBUG [(null)] - Open Connection "33743036" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:40,473 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:40,475 [6] DEBUG [(null)] - Close Connection "33743036" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:40,554 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and db.[id_father]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:40,555 [7] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[id_father,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:16:40,557 [7] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:40,558 [7] DEBUG [(null)] - Open Connection "6289804" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:40,575 [7] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:16:40,576 [7] DEBUG [(null)] - Close Connection "6289804" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:17:27,422 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_User_Role.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id_user],db.[id_role],db.[id_create],db.[rq_create],db.[id_masteruser],db.flag_delete from  [Tb_user_role]
		  as db
			 where  db.[id_user]= @param0  and db.[flag_delete]= @param1  order by  db.[id_user] asc,db.[id_role] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:17:27,423 [6] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Parameters: [@param0=[id_user,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:17:27,424 [6] DEBUG [(null)] - Statement Id: [Tb_User_Role.QueryList] Types: [@param0=[String, System.String], @param1=[Byte, System.Byte]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:17:27,425 [6] DEBUG [(null)] - Open Connection "7821298" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:17:27,452 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:17:27,454 [6] DEBUG [(null)] - Close Connection "7821298" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:17:27,455 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and 
          db.[flag_stop]= 0  and
          db.id in (select id_function from dbo.tb_role_function where id_role in  (  @param1 ,   @param2 ,   @param3 ,   @param4 ) )
         order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:17:27,457 [6] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[rolelist[0],], @param2=[rolelist[1],1], @param3=[rolelist[2],2], @param4=[rolelist[3],3]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:17:27,458 [6] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String], @param2=[String, System.String], @param3=[String, System.String], @param4=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:17:27,460 [6] DEBUG [(null)] - Open Connection "25491069" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:17:27,494 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:17:27,497 [6] DEBUG [(null)] - Close Connection "25491069" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:17:27,507 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.home_page_data1] based off of PreparedStatement: [ 
      declare @xse decimal(28,7),@xsbs int,@thje decimal(28,8),@thbs int,@je_ml decimal(28,7)
      --销售额、销售笔数
      select @xse=sum(je_ys),@xsbs=sum(num)
      from
      (select SUM(je_ys) je_ys,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2 
      union all
      select SUM(je_ys),COUNT(1)
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  )temp
      --退货金额、退货笔数
      select @thje=sum(je_mxtotal),@thbs=sum(num)
      from
      (select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020'
      union all
      select SUM(je_ys) je_mxtotal,COUNT(1) num
      from td_ls_1c
      where id_shop= @param0  and rq between  @param1  and  @param2  and bm_djlx='LS020')temp
      --毛利
      select @je_ml=SUM(je_ml)
      from
      (select SUM(je_ml) je_ml
      from td_ls_1 ls1,td_ls_2 ls2
      where ls1.id_masteruser = @param3 --主用户
      and ls1.id_shop =  @param0 ---登录门店
      and ls2.id_bill = ls1.id
      and ls1.rq between  @param1  and  @param2 
      union all
      select SUM(je_ml) je_ml
      from td_ls_1c ls1c,td_ls_2c ls2c
      where ls1c.id_masteruser = @param3 --主用户
      and ls1c.id_shop =  @param0 ---登录门店
      and ls2c.id_bill = ls1c.id
      and ls1c.rq between  @param1  and  @param2 )temp
      select @xse xse,@xsbs xsbs,@thje thje,@thbs thbs,@je_ml je_ml
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:17:27,509 [6] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-10], @param2=[bgrq,2017/3/10 23:59:59], @param3=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:17:27,510 [6] DEBUG [(null)] - Statement Id: [Td_Ls_1.home_page_data1] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime], @param3=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:17:27,511 [6] DEBUG [(null)] - Open Connection "1043511" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:17:27,528 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:17:27,530 [6] DEBUG [(null)] - Close Connection "1043511" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:17:27,532 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePagePays] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select temp.*,p.mc from
      (
      select temp1.id_pay,SUM(temp1.je) je from
      (
      select lssk.id_pay,SUM(lssk.je) je from td_ls_sk lssk
      left join td_ls_1 ls1 on lssk.id_bill=ls1.id
      where ls1.id_shop= @param0  and ls1.rq between  @param1  and  @param2 
      group by lssk.id_pay
      union all
      select lssk.id_pay,SUM(lssk.je) je from td_ls_skc lssk
      left join td_ls_1c ls1c on lssk.id_bill=ls1c.id
      where ls1c.id_shop= @param0  and ls1c.rq between  @param1  and  @param2 
      group by lssk.id_pay
      )temp1
      group by temp1.id_pay
      )temp
      left join tb_pay p on temp.id_pay=p.id
      order by p.flag_type
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:17:27,534 [6] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Parameters: [@param0=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a], @param1=[lgrq,2017-03-10], @param2=[bgrq,2017/3/10 23:59:59]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:17:27,535 [6] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePagePays] Types: [@param0=[String, System.String], @param1=[String, System.String], @param2=[DateTime, System.DateTime]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:17:27,537 [6] DEBUG [(null)] - Open Connection "30261833" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:17:27,557 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:17:27,559 [6] DEBUG [(null)] - Close Connection "30261833" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:17:27,560 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageShopKcj] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select SUM(je_qm) as value from tz_sp_kc where id_masteruser= @param0  and id_shop= @param1 
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:17:27,561 [6] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:17:27,563 [6] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageShopKcj] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:17:27,565 [6] DEBUG [(null)] - Open Connection "5177953" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:17:27,579 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:17:27,580 [6] DEBUG [(null)] - Close Connection "5177953" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:17:27,581 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageCxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     

      exec p_query_cxsp  '2a7a8a51-fe78-4687-8036-1494130f7945','a6057a78-1836-4fc3-8688-d987fcf1a99a','2017-03-10','2017/3/10 23:59:59'



    ]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:17:27,584 [6] DEBUG [(null)] - Open Connection "15942912" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:17:27,609 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:17:27,637 [6] DEBUG [(null)] - Close Connection "15942912" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:17:27,657 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Td_Ls_1.QueryHomePageZxsp] based off of PreparedStatement: [ 
      set nocount on
       
      set transaction isolation level read uncommitted
     
      select top 8 a.mc,a.id from tb_shopsp a
      where a.id_masteruser= @param0 --主用户
      and a.id_shop=  @param1 ----登录门店
      and  exists(select 1 from tz_sp_kc b where b.id_masteruser=a.id_masteruser
      and b.id_shop=a.id_shop
      and b.id_kcsp=a.id_kcsp
      and b.sl_qm>0)
      and not exists(select 1 from td_ls_1c c,td_ls_2c d
      where c.id=d.id_bill
      and c.id_masteruser=a.id_masteruser
      and c.id_shop=a.id_shop
      and d.id_kcsp=a.id_kcsp
      and c.rq>DATEADD(MM,-1,GETDATE()) )
    ]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:17:27,674 [6] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Parameters: [@param0=[id_masteruser,2a7a8a51-fe78-4687-8036-1494130f7945], @param1=[id_shop,a6057a78-1836-4fc3-8688-d987fcf1a99a]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:17:27,693 [6] DEBUG [(null)] - Statement Id: [Td_Ls_1.QueryHomePageZxsp] Types: [@param0=[String, System.String], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:17:27,708 [6] DEBUG [(null)] - Open Connection "59691269" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:17:27,831 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:17:27,836 [6] DEBUG [(null)] - Close Connection "59691269" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:17:27,838 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_type]= @param0  and db.[flag_stop]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:17:27,841 [6] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_type,action], @param1=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:17:27,845 [6] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[String, System.String], @param1=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:17:27,850 [6] DEBUG [(null)] - Open Connection "53325214" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:17:27,877 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:17:27,879 [6] DEBUG [(null)] - Close Connection "53325214" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:17:27,892 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.GetCount] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select count(1) as value from  [ts_notice]
      as db
       where  db.[flag_delete]= @param0]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:17:27,903 [6] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Parameters: [@param0=[flag_delete,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:17:27,908 [6] DEBUG [(null)] - Statement Id: [Ts_Notice.GetCount] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:17:27,911 [6] DEBUG [(null)] - Open Connection "2927338" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:17:27,955 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:17:27,973 [6] DEBUG [(null)] - Close Connection "2927338" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:17:27,978 [6] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Ts_Notice.QueryPage] based off of PreparedStatement: [set nocount on
       
      set transaction isolation level read uncommitted
     
      select t.* from (select row_number() over( order by  
          db.rq_create desc
           ) as rownumber,db.* from  [ts_notice]
      as db  where  db.[flag_delete]= @param0  ) as t
       where  
          t.rownumber between ( @param1  + 1)
           and 
            ( @param1  +  @param2 )]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:17:27,981 [6] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Parameters: [@param0=[flag_delete,0], @param1=[start,0], @param2=[limit,10]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:17:27,987 [6] DEBUG [(null)] - Statement Id: [Ts_Notice.QueryPage] Types: [@param0=[Int32, System.Int32], @param1=[Int32, System.Int32], @param2=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:17:27,989 [6] DEBUG [(null)] - Open Connection "17783953" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:17:28,023 [6] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:17:28,025 [6] DEBUG [(null)] - Close Connection "17783953" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:17:29,390 [17] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  order by  
					db.sort_id
					   asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:17:29,395 [17] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:17:29,412 [17] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:17:29,419 [17] DEBUG [(null)] - Open Connection "36848875" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:17:29,488 [17] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:17:29,494 [17] DEBUG [(null)] - Close Connection "36848875" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:17:31,296 [20] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:17:31,299 [20] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:17:31,321 [20] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:17:31,325 [20] DEBUG [(null)] - Open Connection "18194467" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:17:31,375 [20] DEBUG [(null)] - Closing session
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:17:31,376 [20] DEBUG [(null)] - Close Connection "18194467" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:17:31,436 [7] DEBUG [(null)] - Preparing to apply parameter information to Statement Id: [Tb_Function.QueryList] based off of PreparedStatement: [set nocount on
			 
			set transaction isolation level read uncommitted
		 
      select db.[id],db.[name],db.[version],db.[flag_type],db.[flag_stop],db.[id_father],db.[path],db.[sort_id],db.[id_create],db.[rq_create],db.[id_edit],db.[rq_edit],db.[controller_name],db.[action_name],db.[icon],db.[tag_name] from  [Tb_function]
		  as db
			 where  db.[flag_stop]= @param0  and db.[id_father]= @param1  order by  db.[id] asc]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:17:31,439 [7] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Parameters: [@param0=[flag_stop,0], @param1=[id_father,0]]
Apache.Ibatis.DataMapper.Data.DefaultPreparedCommand: 2017-03-10 12:17:31,442 [7] DEBUG [(null)] - Statement Id: [Tb_Function.QueryList] Types: [@param0=[Int32, System.Int32], @param1=[String, System.String]]
Apache.Ibatis.DataMapper.Session.DataMapperSession: 2017-03-10 12:17:31,445 [7] DEBUG [(null)] - Open Connection "62720977" to "Microsoft SQL Server, provider V4.0.0.0 in .NET Framework V4.0".
